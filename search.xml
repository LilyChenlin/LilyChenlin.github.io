<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>è¯»ucf-scriptsè„šæ‰‹æ¶æºç </title>
    <url>/2022/01/17/%E8%AF%BBucf-scripts%E8%84%9A%E6%89%8B%E6%9E%B6%E6%BA%90%E7%A0%81/</url>
    <content><![CDATA[<h1 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1. ä»‹ç»"></a>1. ä»‹ç»</h1><p>ucf-scriptsæ˜¯bipå¹³å°ç»Ÿä¸€çš„å‰ç«¯å·¥ç¨‹è„šæ‰‹æ¶ã€‚</p>
<span id="more"></span>


<h1 id="2-ç›®å½•"><a href="#2-ç›®å½•" class="headerlink" title="2. ç›®å½•"></a>2. ç›®å½•</h1><p><img src="1.png" alt="ç›®å½•"></p>
<p>ç›®å½•æ–‡ä»¶è¯´æ˜</p>
<ol>
<li>base.config.js åŸºç¡€é…ç½®æ–‡ä»¶</li>
<li>start.js æœ¬åœ°èµ·æœåŠ¡å…¥å£æ–‡ä»¶</li>
<li>build.js æ‰“åŒ…æœåŠ¡å…¥å£æ–‡ä»¶</li>
<li>start.config.js æœ¬åœ°èµ·æœåŠ¡é…ç½®æ–‡ä»¶</li>
<li>build.config.js æ‰“åŒ…é…ç½®æ–‡ä»¶</li>
<li>utils.js å·¥å…·æ–¹æ³•</li>
</ol>
<h1 id="3-Pluginsæ’ä»¶"><a href="#3-Pluginsæ’ä»¶" class="headerlink" title="3. Pluginsæ’ä»¶"></a>3. Pluginsæ’ä»¶</h1><h2 id="3-1-start-config-js"><a href="#3-1-start-config-js" class="headerlink" title="3.1 start.config.js"></a>3.1 start.config.js</h2><h3 id="3-1-1-open-browser-plugin"><a href="#3-1-1-open-browser-plugin" class="headerlink" title="3.1.1. open-browser-plugin"></a>3.1.1. open-browser-plugin</h3><p>é¡¹ç›®å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</p>
<h3 id="3-1-2-html-webpack-plugin"><a href="#3-1-2-html-webpack-plugin" class="headerlink" title="3.1.2. html-webpack-plugin"></a>3.1.2. html-webpack-plugin</h3><p>html-webpack-plugin ä¸ºåº”ç”¨ç¨‹åºç”Ÿæˆä¸€ä¸ª HTML æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°†ç”Ÿæˆçš„æ‰€æœ‰ bundle æ³¨å…¥åˆ°æ­¤æ–‡ä»¶ä¸­ã€‚</p>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p><img src="2.png" alt="htmlWebpackPluginé…ç½®"></p>
<ul>
<li>è¯´æ˜<ol>
<li>filename ç”Ÿæˆçš„æ¨¡ç‰ˆæ–‡ä»¶çš„åå­—</li>
<li>template æ¨¡ç‰ˆæ¥æºæ–‡ä»¶</li>
<li>inject å¼•å…¥æ¨¡æ¿çš„æ³¨å…¥ä½ç½®ï¼Œå–å€¼æœ‰true/false/body/head <ul>
<li>trueï¼šé»˜è®¤å€¼ï¼Œscriptæ ‡ç­¾ä½äºhtmlæ–‡ä»¶çš„bodyåº•éƒ¨</li>
<li>body:scriptæ ‡ç­¾ä½äºhtmlæ–‡ä»¶çš„bodyåº•éƒ¨</li>
<li>head:scriptæ ‡ç­¾ä½äºhtmlæ–‡ä»¶çš„headä¸­</li>
<li>false:ä¸æ’å…¥ç”Ÿæˆçš„jsæ–‡ä»¶ï¼Œè¿™ä¸ªå‡ ä¹ä¸ä¼šç”¨åˆ°</li>
</ul>
</li>
<li>chunks å¼•å…¥çš„æ¨¡å—ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ˜¯entryä¸­è®¾ç½®å¤šä¸ªjsæ—¶ï¼Œåœ¨è¿™é‡ŒæŒ‡å®šå¼•å…¥çš„jsï¼Œå¦‚æœä¸è®¾ç½®åˆ™é»˜è®¤å…¨éƒ¨å¼•å…¥</li>
<li>hash <ul>
<li>true æ‰“åŒ…ç”Ÿæˆçš„htmlæ–‡ä»¶å¼•å…¥çš„js/csså¸¦æœ‰hashå€¼</li>
</ul>
</li>
<li>static_url</li>
</ol>
</li>
<li>å›°æƒ‘è§£æä½¿ç”¨require.resolveå‡½æ•°æ¥æŸ¥è¯¢æŸä¸ªæ¨¡å—æ–‡ä»¶çš„å¸¦æœ‰å®Œæ•´ç»å¯¹è·¯å¾„çš„æ–‡ä»¶å<ol>
<li>require.resolve(url)</li>
</ol>
</li>
</ul>
<h3 id="3-1-3-HotModuleReplacementPlugin"><a href="#3-1-3-HotModuleReplacementPlugin" class="headerlink" title="3.1.3. HotModuleReplacementPlugin"></a>3.1.3. HotModuleReplacementPlugin</h3><p>çƒ­æ›´æ–°æ¨¡å—</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">    ...HtmlPlugin</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-1-4-DefinePlugin"><a href="#3-1-4-DefinePlugin" class="headerlink" title="3.1.4. DefinePlugin"></a>3.1.4. DefinePlugin</h3><p>å…è®¸åœ¨ <strong>ç¼–è¯‘æ—¶</strong> å°†ä½ ä»£ç ä¸­çš„å˜é‡æ›¿æ¢ä¸ºå…¶ä»–å€¼æˆ–è¡¨è¾¾å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¯å¢ƒå˜é‡æ³¨å…¥</span></span><br><span class="line">cfg.global_env &amp;&amp; (config.plugins = config.plugins.concat(<span class="keyword">new</span> webpack.DefinePlugin(cfg.global_env)));</span><br></pre></td></tr></table></figure>

<h3 id="3-1-5-tinper-next-plugin"><a href="#3-1-5-tinper-next-plugin" class="headerlink" title="3.1.5. @tinper/next-plugin"></a>3.1.5. @tinper/next-plugin</h3><p>ç»Ÿä¸€å‰ç«¯ä¸‰æ–¹åŒ…æ¥å…¥Plugin</p>
<h2 id="3-2-base-config-js"><a href="#3-2-base-config-js" class="headerlink" title="3.2. base.config.js"></a>3.2. base.config.js</h2><h3 id="3-2-1-BannerPlugin"><a href="#3-2-1-BannerPlugin" class="headerlink" title="3.2.1. BannerPlugin"></a>3.2.1. BannerPlugin</h3><p>webpackå†…ç½®Pluginï¼Œåœ¨æ‰“åŒ…å¥½çš„jsæ–‡ä»¶æœ€å¼€å§‹å¤„æ·»åŠ ç‰ˆæƒå£°æ˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.BannerPlugin(&#123;</span><br><span class="line">        <span class="attr">banner</span>: <span class="string">`File:[file] Date:<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-mini-css-extract-plugin"><a href="#3-2-2-mini-css-extract-plugin" class="headerlink" title="3.2.2. mini-css-extract-plugin"></a>3.2.2. mini-css-extract-plugin</h3><p>åŸæœ¬çš„çŠ¶æ€æ˜¯css-in-jsï¼Œä½¿ç”¨è¯¥æ’ä»¶åå¯ä»¥å°†csså•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;[name].css&#x27;</span>,</span><br><span class="line">            <span class="attr">chunkFilename</span>: <span class="string">&#x27;[name].css&#x27;</span>,</span><br><span class="line">            <span class="attr">ignoreOrder</span>: <span class="literal">true</span></span><br><span class="line">        &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-ProgressPlugin"><a href="#3-2-3-ProgressPlugin" class="headerlink" title="3.2.3. ProgressPlugin"></a>3.2.3. ProgressPlugin</h3><p>webpackæ„å»ºè¿›åº¦æ¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.ProgressPlugin()</span><br></pre></td></tr></table></figure>

<h2 id="3-3-build-config-js"><a href="#3-3-build-config-js" class="headerlink" title="3.3 build.config.js"></a>3.3 build.config.js</h2><h3 id="3-3-1-CleanWebpackPlugin"><a href="#3-3-1-CleanWebpackPlugin" class="headerlink" title="3.3.1. CleanWebpackPlugin"></a>3.3.1. CleanWebpackPlugin</h3><p>åˆ é™¤æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚åœ¨é¡¹ç›®ä¸­ä¸»è¦ç”¨æ¥åœ¨æ¯ä¸€æ¬¡ç¼–è¯‘å‰ï¼Œå…ˆåˆ é™¤ä¸Šä¸€æ¬¡ç¼–è¯‘å®Œåçš„ä»£ç ã€‚</p>
<h3 id="3-3-2-OptimizeCSSAssetsPlugin"><a href="#3-3-2-OptimizeCSSAssetsPlugin" class="headerlink" title="3.3.2. OptimizeCSSAssetsPlugin"></a>3.3.2. OptimizeCSSAssetsPlugin</h3><p>å‹ç¼©cssä»£ç </p>
<h3 id="3-3-3-TerserWebpackPlugin"><a href="#3-3-3-TerserWebpackPlugin" class="headerlink" title="3.3.3. TerserWebpackPlugin"></a>3.3.3. TerserWebpackPlugin</h3><ol>
<li>webpack5å·²å†…ç½®è¯¥æ’ä»¶ï¼Œä½†webpack v4å¹¶æ²¡æœ‰å†…ç½®ã€‚</li>
<li>è¯¥æ’ä»¶ä½¿ç”¨ <a href="https://github.com/terser/terser">terser</a> æ¥å‹ç¼© JavaScriptã€‚</li>
</ol>
<h3 id="3-3-4-html-webpack-plugin"><a href="#3-3-4-html-webpack-plugin" class="headerlink" title="3.3.4. html-webpack-plugin"></a>3.3.4. html-webpack-plugin</h3><h3 id="3-3-5-TNSClientPlugin"><a href="#3-3-5-TNSClientPlugin" class="headerlink" title="3.3.5. TNSClientPlugin"></a>3.3.5. TNSClientPlugin</h3><h1 id="4-Loader"><a href="#4-Loader" class="headerlink" title="4. Loader"></a>4. Loader</h1><ol>
<li>loaderçš„é¡ºåºæ˜¯ä»ä¸‹å¾€ä¸Šï¼Œä»å³å¾€å·¦</li>
</ol>
<h2 id="4-1-start-config-js"><a href="#4-1-start-config-js" class="headerlink" title="4.1. start.config.js"></a>4.1. start.config.js</h2><h3 id="æ— "><a href="#æ— " class="headerlink" title="æ— "></a>æ— </h3><h2 id="4-2-base-config-js"><a href="#4-2-base-config-js" class="headerlink" title="4.2. base.config.js"></a>4.2. base.config.js</h2><h3 id="4-2-1-babel-loader"><a href="#4-2-1-babel-loader" class="headerlink" title="4.2.1. babel-loader"></a>4.2.1. babel-loader</h3><p>babel-loaderå¯ä»¥å°†ES6ã€ES7ç­‰ä¸€äº›æµè§ˆå™¨ä¸æ”¯æŒçš„é«˜çº§è¯­æ³•ç¼–è¯‘æˆæµè§ˆå™¨å¯ä»¥è¯†åˆ«çš„ES5è¯­æ³•ã€‚</p>
<h3 id="4-2-2-css-loader"><a href="#4-2-2-css-loader" class="headerlink" title="4.2.2. css-loader"></a>4.2.2. css-loader</h3><p>å¯¹@importå’Œurl()è¿›è¡Œå¤„ç†ï¼Œå°±åƒjsè§£æimport/require()ä¸€æ ·ã€‚</p>
<h3 id="4-2-3-postcss-loader"><a href="#4-2-3-postcss-loader" class="headerlink" title="4.2.3. postcss-loader"></a>4.2.3. postcss-loader</h3><p>è¿›ä¸€æ­¥å¤„ç†cssæ–‡ä»¶ï¼Œæ¯”å¦‚æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œå‹ç¼©CSSç­‰ã€‚</p>
<h3 id="4-2-4-less-loader"><a href="#4-2-4-less-loader" class="headerlink" title="4.2.4. less-loader"></a>4.2.4. less-loader</h3><p>å°†Lessç¼–è¯‘æˆcss</p>
<h3 id="4-2-5-style-loader"><a href="#4-2-5-style-loader" class="headerlink" title="4.2.5. style-loader"></a>4.2.5. style-loader</h3><p>å°†cssæ’å…¥åˆ°domä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨MiniCSSExtractPluginå°†CSSæ‰“åŒ…æˆç‹¬ç«‹çš„cssæ–‡ä»¶ï¼Œå¹¶é€šè¿‡HtmlWebpackPluginå¼•å…¥cssæ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨è¿™ä¸ªloader</p>
<h3 id="4-2-6-url-loader"><a href="#4-2-6-url-loader" class="headerlink" title="4.2.6. url-loader"></a>4.2.6. url-loader</h3><p> å°†æ–‡ä»¶ä½œä¸º data URI å†…è”åˆ° bundle ä¸­</p>
<h3 id="4-2-7-file-loader"><a href="#4-2-7-file-loader" class="headerlink" title="4.2.7. file-loader"></a>4.2.7. file-loader</h3><p>å°†æ–‡ä»¶å‘é€åˆ°è¾“å‡ºç›®å½•</p>
<h2 id="4-3-build-config-js"><a href="#4-3-build-config-js" class="headerlink" title="4.3 build.config.js"></a>4.3 build.config.js</h2><h3 id="æ— -1"><a href="#æ— -1" class="headerlink" title="æ— "></a>æ— </h3><h1 id="5-Middleware"><a href="#5-Middleware" class="headerlink" title="5. Middleware"></a>5. Middleware</h1><h2 id="5-1-start-config-js"><a href="#5-1-start-config-js" class="headerlink" title="5.1 start.config.js"></a>5.1 start.config.js</h2><h3 id="5-1-1-http-proxy-middleware"><a href="#5-1-1-http-proxy-middleware" class="headerlink" title="5.1.1. http-proxy-middleware"></a>5.1.1. http-proxy-middleware</h3><p>ä»£ç†ä¸­é—´ä»¶ï¼Œç”¨äºè½¬å‘è¯·æ±‚ï¼Œå°†å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æ•°æ®è½¬å‘åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œå†å°†å“åº”è¾“é€åˆ°å®¢æˆ·ç«¯ã€‚</p>
<h3 id="5-1-2-webpack-dev-middleware"><a href="#5-1-2-webpack-dev-middleware" class="headerlink" title="5.1.2. webpack-dev-middleware"></a>5.1.2. webpack-dev-middleware</h3><p>ç”Ÿæˆä¸€ä¸ªä¸webpackçš„compilerç»‘å®šçš„ä¸­é—´ä»¶ï¼Œåœ¨expresså¯åŠ¨çš„æœåŠ¡appä¸­è°ƒç”¨è¿™ä¸ªä¸­é—´ä»¶ã€‚<br><img src="3.png" alt="devMiddleware"><br>ä½œç”¨</p>
<ol>
<li>é€šè¿‡watch modeï¼Œç›‘å¬èµ„æºçš„å˜æ›´ï¼Œè‡ªåŠ¨æ‰“åŒ…</li>
<li>å¿«é€Ÿç¼–è¯‘ï¼Œèµ°å†…å­˜ ï¼ï¼ï¼</li>
<li>è¿”å›ä¸­é—´ä»¶ï¼Œæ”¯æŒexpressçš„useæ ¼å¼</li>
</ol>
<h3 id="5-1-3-webpack-hot-middleware"><a href="#5-1-3-webpack-hot-middleware" class="headerlink" title="5.1.3. webpack-hot-middleware"></a>5.1.3. webpack-hot-middleware</h3><p>å®ç°é¡µé¢çƒ­æ›´æ–°ï¼Œä¸€èˆ¬ä¸webpack-dev-middlewareé…åˆä½¿ç”¨<br><img src="4.png" alt="hotMiddleware"></p>
<h1 id="6-åˆ†æ"><a href="#6-åˆ†æ" class="headerlink" title="6. åˆ†æ"></a>6. åˆ†æ</h1><p><strong>æœ¬åœ°èµ·æœåŠ¡èµ°start.js, ç¼–è¯‘èµ°build.jsã€‚</strong><br><strong>â€‹</strong></p>
<h2 id="6-1-base-config-js"><a href="#6-1-base-config-js" class="headerlink" title="6.1 base.config.js"></a>6.1 base.config.js</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸºæœ¬é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">	<span class="attr">output</span>: &#123;&#125;, </span><br><span class="line">  <span class="attr">module</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">resolve</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">plugins</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-1-output"><a href="#6-1-1-output" class="headerlink" title="6.1.1. output"></a>6.1.1. output</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é…ç½®webpackå¦‚ä½•è¾“å‡ºã€ä»¥åŠåœ¨å“ªé‡Œè¾“å‡ºä½ çš„ã€Œbundleã€asset å’Œå…¶ä»–ä½ æ‰€æ‰“åŒ…æˆ–ä½¿ç”¨ webpack è½½å…¥çš„ä»»ä½•å†…å®¹ã€ã€‚</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">	<span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.resolve(<span class="string">&#x27;.&#x27;</span>, dist_root, _context), <span class="comment">// è¾“å‡ºè·¯å¾„</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span>, <span class="comment">// bundleåç§°</span></span><br><span class="line">        <span class="attr">chunkFilename</span>: <span class="string">&#x27;[name].js&#x27;</span>, <span class="comment">// éåˆå§‹chunkæ–‡ä»¶çš„åç§°</span></span><br><span class="line">        <span class="attr">publicPath</span>: cfg.publicPath ? <span class="string">&#x27;/&#x27;</span> + _context : <span class="literal">undefined</span>, <span class="comment">// åœ¨æµè§ˆå™¨ä¸­æ‰€å¼•ç”¨çš„ã€Œæ­¤è¾“å‡ºç›®å½•å¯¹åº”çš„å…¬å¼€ URLã€</span></span><br><span class="line">        <span class="attr">environment</span>: &#123;</span><br><span class="line">            <span class="comment">// The environment supports arrow functions (&#x27;() =&gt; &#123; ... &#125;&#x27;).</span></span><br><span class="line">            <span class="attr">arrowFunction</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// The environment supports BigInt as literal (123n).</span></span><br><span class="line">            <span class="attr">bigIntLiteral</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// The environment supports const and let for variable declarations.</span></span><br><span class="line">            <span class="attr">const</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// The environment supports destructuring (&#x27;&#123; a, b &#125; = obj&#x27;).</span></span><br><span class="line">            <span class="attr">destructuring</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// The environment supports an async import() function to import EcmaScript modules.</span></span><br><span class="line">            <span class="attr">dynamicImport</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// The environment supports &#x27;for of&#x27; iteration (&#x27;for (const x of array) &#123; ... &#125;&#x27;).</span></span><br><span class="line">            <span class="attr">forOf</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// The environment supports ECMAScript Module syntax to import ECMAScript modules (import ... from &#x27;...&#x27;).</span></span><br><span class="line">            <span class="attr">module</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-2-module"><a href="#6-1-2-module" class="headerlink" title="6.1.2. module"></a>6.1.2. module</h3><ol>
<li>ä½¿ç”¨ç›¸å¯¹åº”çš„loaderå¯¹js/less/css/å›¾ç‰‡/å›¾æ ‡å­—ä½“/svgç­‰åšå¤„ç†ç¼–è¯‘</li>
</ol>
<h3 id="6-1-3-resolve"><a href="#6-1-3-resolve" class="headerlink" title="6.1.3. resolve"></a>6.1.3. resolve</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">	<span class="attr">resolve</span>: &#123;</span><br><span class="line">    		<span class="comment">// å°è¯•æŒ‰é¡ºåºè§£æè¿™äº›åç¼€åã€‚å¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶æœ‰ç›¸åŒçš„åå­—ï¼Œä½†åç¼€åä¸åŒï¼Œwebpack ä¼šè§£æåˆ—åœ¨æ•°ç»„é¦–ä½çš„åç¼€çš„æ–‡ä»¶ å¹¶è·³è¿‡å…¶ä½™çš„åç¼€ã€‚</span></span><br><span class="line">        <span class="attr">extensions</span>: [</span><br><span class="line">            <span class="string">&quot;.jsx&quot;</span>, <span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.less&quot;</span>, <span class="string">&quot;.css&quot;</span>, <span class="string">&quot;.json&quot;</span></span><br><span class="line">        ],</span><br><span class="line">    </span><br><span class="line">    		<span class="comment">// åˆ«åé…ç½®</span></span><br><span class="line">        <span class="attr">alias</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;ucf-apps&#x27;</span>: path.resolve(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;ucf-apps/&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;ucf-common&#x27;</span>: path.resolve(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;ucf-common/src/&#x27;</span>),</span><br><span class="line">            <span class="attr">components</span>: path.resolve(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;ucf-common/src/components/&#x27;</span>),</span><br><span class="line">            <span class="attr">static</span>: path.resolve(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;ucf-common/src/static/&#x27;</span>),</span><br><span class="line">            <span class="attr">utils</span>: path.resolve(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;ucf-common/src/utils/&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-1-4-plugins"><a href="#6-1-4-plugins" class="headerlink" title="6.1.4. plugins"></a>6.1.4. plugins</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> webpack.BannerPlugin(&#123;</span><br><span class="line">            <span class="attr">banner</span>: <span class="string">`File:[file] Date:<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</span>`</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;[name].css&#x27;</span>,</span><br><span class="line">            <span class="attr">chunkFilename</span>: <span class="string">&#x27;[name].css&#x27;</span>,</span><br><span class="line">            <span class="attr">ignoreOrder</span>: <span class="literal">true</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> webpack.ProgressPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-2-start-js"><a href="#6-2-start-js" class="headerlink" title="6.2 start.js"></a>6.2 start.js</h2><ol>
<li>æœ¬åœ°èµ·æœåŠ¡çš„æ—¶å€™ï¼Œè°ƒç”¨serveræ–¹æ³•ï¼Œå¹¶ä¼ å…¥{port, ip}</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getPort = <span class="built_in">require</span>(<span class="string">&#x27;get-port&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> ip = <span class="built_in">require</span>(<span class="string">&#x27;ip&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®é»˜è®¤ç«¯å£</span></span><br><span class="line">        <span class="comment">// æ£€æµ‹æ˜¯å¦è¢«å ç”¨ï¼Œæ›´æ¢ç«¯å£ï¼Œå¯åŠ¨è°ƒè¯•æœåŠ¡</span></span><br><span class="line">        getPort(&#123;</span><br><span class="line">            <span class="attr">port</span>: commands.port || <span class="number">3000</span></span><br><span class="line">        &#125;).then(<span class="function"><span class="params">port</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// å¯åŠ¨æœåŠ¡</span></span><br><span class="line">            server(&#123;</span><br><span class="line">                port,</span><br><span class="line">                <span class="attr">ip</span>: ip.address()</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>serveræ–¹æ³•å®šä¹‰å¦‚ä¸‹</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> webpackConfig = <span class="built_in">require</span>(<span class="string">&#x27;./start.config&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> compiler = webpack(webpackConfig);</span><br><span class="line"></span><br><span class="line">server = <span class="function"><span class="params">opt</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨webpack-dev-middlewareç”Ÿæˆä¸€ä¸ªå’Œwebpackçš„compilerç»‘å®šçš„ä¸­é—´ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> instance = devMiddleware(compiler, &#123;</span><br><span class="line">        <span class="attr">publicPath</span>: webpackConfig.output.publicPath,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Ucf-Server&#x27;</span>: util.getPkg().version</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">stats</span>: &#123;</span><br><span class="line">            <span class="attr">colors</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">hash</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">children</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">chunks</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// é™æ€èµ„æºæ‰˜ç®¡</span></span><br><span class="line">    cfg.static &amp;&amp; app.use((cfg.context == <span class="string">&#x27;&#x27;</span> || cfg.context == <span class="literal">undefined</span>) ? <span class="string">&#x27;&#x27;</span> : <span class="string">`/<span class="subst">$&#123;cfg.context&#125;</span>`</span>, express.static(path.resolve(<span class="string">&quot;.&quot;</span>, cfg.static)));</span><br><span class="line">    <span class="comment">// åŠ è½½å®ä¾‹</span></span><br><span class="line">    app.use(instance);</span><br><span class="line">    <span class="comment">// çƒ­æ›´æ–°</span></span><br><span class="line">    app.use(hotMiddleware(compiler));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ è½½ä»£ç†æ’ä»¶</span></span><br><span class="line">    <span class="comment">// å¤„ç†proxyæ•°ç»„æƒ…å†µ</span></span><br><span class="line">    cfg.proxy &amp;&amp; cfg.proxy.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (element.enable) &#123;<span class="comment">// ä»£ç†å¼€å¯</span></span><br><span class="line">            <span class="comment">// é»˜è®¤é…ç½®é¡¹</span></span><br><span class="line">            <span class="keyword">let</span> proxyOpt = &#123;</span><br><span class="line">                <span class="attr">target</span>: element.url,</span><br><span class="line">                <span class="attr">logLevel</span>: <span class="string">&quot;debug&quot;</span>,</span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">pathRewrite</span>: <span class="built_in">Object</span>.assign(&#123;&#125;, element.pathRewrite),</span><br><span class="line">                <span class="attr">headers</span>: (<span class="keyword">typeof</span> element.headers !== <span class="string">&#x27;undefined&#x27;</span> ? element.headers : &#123;&#125;),</span><br><span class="line">                <span class="attr">onProxyRes</span>: <span class="function"><span class="keyword">function</span> (<span class="params">proxyRes</span>) </span>&#123;</span><br><span class="line">                    proxyRes.headers[<span class="string">&quot;Ucf-Proxy&quot;</span>] = <span class="string">&quot;success&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            app.use(element.router, createProxyMiddleware(element.opts || proxyOpt));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// è¿è¡Œè°ƒè¯•æœåŠ¡</span></span><br><span class="line">    app.listen(opt.port, host, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log();</span><br><span class="line">        <span class="built_in">console</span>.log(chalk.green(<span class="string">`----------------------------------------------------`</span>));</span><br><span class="line">        <span class="built_in">console</span>.log(chalk.yellow(<span class="string">`\t ğŸš€ UCF Develop Server`</span>));</span><br><span class="line">        <span class="built_in">console</span>.log(chalk.green(<span class="string">`\t [Server Version]: ğŸ… <span class="subst">$&#123;util.getPkg().version&#125;</span>`</span>));</span><br><span class="line">        <span class="built_in">console</span>.log(chalk.green(<span class="string">`\t [Local]         : ğŸ  http://<span class="subst">$&#123;browserHost&#125;</span>:<span class="subst">$&#123;opt.port&#125;</span>`</span>));</span><br><span class="line">        <span class="built_in">console</span>.log(chalk.green(<span class="string">`\t [Lan]           : ğŸ“¡ http://<span class="subst">$&#123;opt.ip&#125;</span>:<span class="subst">$&#123;opt.port&#125;</span>`</span>));</span><br><span class="line">        <span class="built_in">console</span>.log(chalk.green(<span class="string">`----------------------------------------------------`</span>));</span><br><span class="line">        <span class="built_in">console</span>.log();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-start-config-js"><a href="#6-3-start-config-js" class="headerlink" title="6.3 start.config.js"></a>6.3 start.config.js</h2><ol>
<li>å¤§è‡´çš„é…ç½®ï¼Œä¼šä¸base.config.jsåˆå¹¶ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> base = <span class="built_in">require</span>(<span class="string">&#x27;./base.config&#x27;</span>);</span><br><span class="line"><span class="comment">//é»˜è®¤çš„é…ç½®ç”¨äºmergeæ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">externals</span>: cfg.externals, <span class="comment">// æ„å»ºæ’é™¤æŒ‡å®šåŒ…</span></span><br><span class="line">    <span class="attr">resolve</span>: &#123; </span><br><span class="line">        <span class="attr">alias</span>: cfg.alias <span class="comment">// åˆ«åé…ç½®</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: cfg.loader <span class="comment">// loaderé…ç½®</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(), <span class="comment">// çƒ­æ›´æ–°Plugin</span></span><br><span class="line">        ...HtmlPlugin <span class="comment">// æŸ¥çœ‹ç¬¬2ç‚¹</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…¥å£</span></span><br><span class="line">config.entry = entries;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¯å¢ƒå˜é‡æ³¨å…¥</span></span><br><span class="line">cfg.global_env &amp;&amp; (config.plugins = config.plugins.concat(<span class="keyword">new</span> webpack.DefinePlugin(cfg.global_env)));</span><br><span class="line"><span class="comment">//ä¼ å…¥æ’ä»¶è®¾ç½®</span></span><br><span class="line">cfg.devPlugins &amp;&amp; (config.plugins = config.plugins.concat(cfg.devPlugins));</span><br><span class="line"><span class="built_in">module</span>.exports = merge(base, config);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>HtmlPluginçš„ç›¸å…³é…ç½®</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlPlugin = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦åŠ è½½é»˜è®¤é¡µé¢æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">if</span> (commands.homepage) &#123;</span><br><span class="line">    HtmlPlugin.push(<span class="keyword">new</span> OpenBrowserPlugin(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`http://<span class="subst">$&#123;browserHost&#125;</span>:<span class="subst">$&#123;commands.port || <span class="number">3000</span>&#125;</span>/<span class="subst">$&#123;commands.homepage || <span class="string">&#x27;&#x27;</span>&#125;</span>`</span></span><br><span class="line">    &#125;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ è½½æœ¬åœ°å¼€å‘ç¯å¢ƒçš„Portal</span></span><br><span class="line">glob.sync(<span class="string">&#x27;./ucf-common/src/portal/src/app.js&#x27;</span>).forEach(<span class="function"><span class="params">_path</span> =&gt;</span> &#123;</span><br><span class="line">    entries[<span class="string">&#x27;index&#x27;</span>] = <span class="string">&#x27;./ucf-common/src/portal/src/app.js&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> htmlConf = &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">`index.html`</span>,</span><br><span class="line">        <span class="attr">template</span>: <span class="string">&#x27;./ucf-common/src/portal/src/index.html&#x27;</span>,</span><br><span class="line">        <span class="attr">inject</span>: <span class="string">&#x27;body&#x27;</span>,</span><br><span class="line">        <span class="attr">chunks</span>: [<span class="string">&#x27;index&#x27;</span>],</span><br><span class="line">        <span class="attr">hash</span>: <span class="literal">true</span></span><br><span class="line">    &#125;;</span><br><span class="line">    HtmlPlugin.push(<span class="keyword">new</span> HtmlWebPackPlugin(htmlConf));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ æ¨¡å—åŠ è½½å…¥å£ä»¥åŠhtmlå‡ºå£</span></span><br><span class="line">bootFiles.forEach(<span class="function"><span class="params">_path</span> =&gt;</span> &#123;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">// è·å–ä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="keyword">let</span> _context = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (!cfg.publicPath &amp;&amp; cfg.context) &#123;</span><br><span class="line">        _context = <span class="string">`<span class="subst">$&#123;cfg.context&#125;</span>/`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ¨¡å—å</span></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">module</span> = _path.split(<span class="string">`./<span class="subst">$&#123;scan_root&#125;</span>/`</span>)[<span class="number">1</span>].split(<span class="string">`/src/<span class="subst">$&#123;bootName&#125;</span>`</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> chunk = <span class="string">`<span class="subst">$&#123;_context&#125;</span><span class="subst">$&#123;<span class="built_in">module</span>&#125;</span>/index`</span>; <span class="comment">// æ‹¼æ¥ç»“æœ&#x27;iuap-mdm-ucf/association/index&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> targetDir = _path.split(<span class="string">`/<span class="subst">$&#123;bootName&#125;</span>`</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¼å®¹å…¶ä»–ç±»å‹çš„æ¨¡ç‰ˆé…ç½®ï¼Œå¦‚ï¼šejs</span></span><br><span class="line">    <span class="keyword">const</span> templateType = cfg.templateType ? cfg.templateType : <span class="string">&#x27;html&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> htmlConf = <span class="built_in">Object</span>.assign(&#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">`<span class="subst">$&#123;chunk&#125;</span>.html`</span>,</span><br><span class="line">        <span class="attr">template</span>: <span class="string">`<span class="subst">$&#123;targetDir&#125;</span>/index.<span class="subst">$&#123;templateType&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">inject</span>: <span class="string">&#x27;body&#x27;</span>,</span><br><span class="line">        <span class="attr">chunks</span>: [chunk],</span><br><span class="line">        <span class="attr">hash</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">static_url</span>: cfg.static_url ? cfg.static_url : <span class="string">&#x27;&#x27;</span> </span><br><span class="line">    &#125;,HtmlPluginConf);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//å¤„ç†å¯åŠ¨å™¨é€»è¾‘</span></span><br><span class="line">    <span class="keyword">if</span> (bootList &amp;&amp; <span class="keyword">typeof</span> bootList == <span class="string">&#x27;boolean&#x27;</span>) &#123;</span><br><span class="line">        entries[chunk] = [_path, <span class="built_in">require</span>.resolve(<span class="string">&#x27;./webpack-hot-middleware/client&#x27;</span>)];</span><br><span class="line">        HtmlPlugin.push(<span class="keyword">new</span> HtmlWebPackPlugin(htmlConf));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(bootList) &amp;&amp; bootList.length &gt; <span class="number">0</span>) &#123; <span class="comment">// å¤šå…¥å£</span></span><br><span class="line">        bootList.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            _bootList.add(item);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (_bootList.has(<span class="built_in">module</span>)) &#123;</span><br><span class="line">            entries[chunk] = [_path, <span class="built_in">require</span>.resolve(<span class="string">&#x27;./webpack-hot-middleware/client&#x27;</span>)];</span><br><span class="line">            HtmlPlugin.push(<span class="keyword">new</span> HtmlWebPackPlugin(htmlConf));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»Ÿä¸€å‰ç«¯ä¸‰æ–¹åŒ…æ¥å…¥TNS</span></span><br><span class="line"><span class="keyword">if</span> (tnsEnabled) &#123;</span><br><span class="line">    HtmlPlugin.push(<span class="keyword">new</span> TNSClientPlugin(&#123;<span class="attr">libraryDebug</span>: <span class="literal">true</span>, ...tnsDetailCfg&#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-build-js"><a href="#6-4-build-js" class="headerlink" title="6.4 build.js"></a>6.4 build.js</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> webpackConfig = <span class="built_in">require</span>(<span class="string">&#x27;./build.config&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> compiler = webpack(webpackConfig);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯åŠ¨æ„å»º</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">plugin</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨buildæ–¹æ³•</span></span><br><span class="line">build = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    <span class="built_in">console</span>.log(chalk.green(<span class="string">`--------------------------------------------`</span>));</span><br><span class="line">    <span class="built_in">console</span>.log(chalk.yellow(<span class="string">`\t ğŸš€  UCF Build Server`</span>));</span><br><span class="line">    <span class="built_in">console</span>.log(chalk.green(<span class="string">`\t [Build Version] : ğŸ… <span class="subst">$&#123;util.getPkg().version&#125;</span>`</span>));</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    <span class="built_in">console</span>.log(chalk.green(<span class="string">`\t ğŸ’ª Good Luck Please Wait â˜ƒï¸`</span>));</span><br><span class="line">    <span class="built_in">console</span>.log(chalk.green(<span class="string">`--------------------------------------------`</span>));</span><br><span class="line">    <span class="built_in">console</span>.log();</span><br><span class="line">    compiler.run(<span class="function">(<span class="params">err, stats</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;\n&#x27;</span> + stats.toString(&#123;</span><br><span class="line">                <span class="attr">hash</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">chunks</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">children</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">colors</span>: <span class="literal">true</span></span><br><span class="line">            &#125;));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(chalk.red(err));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-build-config-js"><a href="#6-5-build-config-js" class="headerlink" title="6.5. build.config.js"></a>6.5. build.config.js</h2><ol>
<li>å¤§è‡´çš„é…ç½®ï¼Œä¼šä¸base.config.js</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    output,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;cheap-module-source-map&#x27;</span>,</span><br><span class="line">    <span class="attr">externals</span>: cfg.externals,</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">        <span class="attr">alias</span>: cfg.alias</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: cfg.loader</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">optimization</span>: &#123;</span><br><span class="line">        <span class="comment">// ä¸ä½¿ç”¨å†…éƒ¨å‹ç¼©å‚æ•°å…³é—­</span></span><br><span class="line">        <span class="attr">minimize</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">        <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;</span><br><span class="line">            <span class="attr">cssProcessorOptions</span>: &#123;</span><br><span class="line">                <span class="attr">safe</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">mergeLonghand</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">discardComments</span>: &#123; <span class="attr">removeAll</span>: <span class="literal">true</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">canPrint</span>: <span class="literal">true</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> TerserPlugin(&#123;</span><br><span class="line">            <span class="comment">// test: /\.js(\?.*)?$/i,</span></span><br><span class="line">            <span class="comment">// cache: true,</span></span><br><span class="line">            <span class="attr">parallel</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">// sourceMap: cfg.open_source_map == undefined ? true : cfg.open_source_map</span></span><br><span class="line">            <span class="comment">// include:&#x27;vendor&#x27;,</span></span><br><span class="line">            <span class="comment">// exclude:&#x27;vendor&#x27;,</span></span><br><span class="line">        &#125;),</span><br><span class="line">        ...HtmlPlugin <span class="comment">// æŸ¥çœ‹2ç‚¹</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¥å£</span></span><br><span class="line">config.entry = entries;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¯å¢ƒå˜é‡æ³¨å…¥</span></span><br><span class="line">cfg.global_env &amp;&amp; (config.plugins = config.plugins.concat(<span class="keyword">new</span> webpack.DefinePlugin(cfg.global_env)));</span><br><span class="line"><span class="comment">// ä¼ å…¥æ’ä»¶è®¾ç½®</span></span><br><span class="line">cfg.buildPlugins &amp;&amp; (config.plugins = config.plugins.concat(cfg.buildPlugins));</span><br><span class="line"><span class="comment">// æ˜¯å¦å¯ç”¨ä¼˜åŒ–èµ„æºå•ç‹¬ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line">cfg.res_extra &amp;&amp; (cfg.splitChunks ? config.optimization[<span class="string">&#x27;splitChunks&#x27;</span>] = cfg.splitChunks : config.optimization[<span class="string">&#x27;splitChunks&#x27;</span>] = splitChunks);</span><br><span class="line"><span class="built_in">module</span>.exports = merge(base, config);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>HtmlPlugin</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlPlugin = [];</span><br><span class="line"></span><br><span class="line">bootFiles.forEach(<span class="function"><span class="params">_path</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//æ¨¡å—å</span></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">module</span> = _path.split(<span class="string">`./<span class="subst">$&#123;scan_root&#125;</span>/`</span>)[<span class="number">1</span>].split(<span class="string">`/src/<span class="subst">$&#123;bootName&#125;</span>`</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> chunk = <span class="string">`<span class="subst">$&#123;<span class="built_in">module</span>&#125;</span>/index`</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> targetDir = _path.split(<span class="string">`/<span class="subst">$&#123;bootName&#125;</span>`</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="comment">// å…¼å®¹å…¶ä»–ç±»å‹çš„æ¨¡ç‰ˆé…ç½®ï¼Œå¦‚ï¼šejs</span></span><br><span class="line">    <span class="keyword">const</span> templateType = cfg.templateType ? cfg.templateType : <span class="string">&#x27;html&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> htmlConf = <span class="built_in">Object</span>.assign(&#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">`<span class="subst">$&#123;chunk&#125;</span>.html`</span>,</span><br><span class="line">        <span class="attr">template</span>: <span class="string">`<span class="subst">$&#123;targetDir&#125;</span>/index.<span class="subst">$&#123;templateType&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">inject</span>: <span class="string">&#x27;body&#x27;</span>,</span><br><span class="line">        <span class="attr">chunks</span>: [<span class="string">&#x27;vendor&#x27;</span>, chunk],</span><br><span class="line">        <span class="attr">hash</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">static_url</span>: cfg.static_url ? cfg.static_url : <span class="string">&#x27;&#x27;</span> </span><br><span class="line">        &#125;,HtmlPluginConf) ;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//å¤„ç†å¯åŠ¨å™¨é€»è¾‘</span></span><br><span class="line">    <span class="keyword">if</span> (bootList &amp;&amp; <span class="keyword">typeof</span> bootList == <span class="string">&#x27;boolean&#x27;</span>) &#123;</span><br><span class="line">        entries[chunk] = _path;</span><br><span class="line">        HtmlPlugin.push(<span class="keyword">new</span> HtmlWebPackPlugin(htmlConf));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(bootList) &amp;&amp; bootList.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        bootList.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            _bootList.add(item);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (_bootList.has(<span class="built_in">module</span>)) &#123;</span><br><span class="line">            entries[chunk] = _path;</span><br><span class="line">            HtmlPlugin.push(<span class="keyword">new</span> HtmlWebPackPlugin(htmlConf));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (tnsEnabled) &#123;</span><br><span class="line">    HtmlPlugin.push(<span class="keyword">new</span> TNSClientPlugin(&#123;excludeModules&#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å…¶ä»–é…ç½®</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// outputè¾“å‡ºçš„æ–‡ä»¶æ·»åŠ hashå€¼å®ç°ç¼“å­˜</span></span><br><span class="line"><span class="keyword">const</span> output = cfg.hasHash ? &#123;</span><br><span class="line">    ...base.output,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].[hash].js&#x27;</span>,</span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&#x27;[name].[hash].js&#x27;</span>,</span><br><span class="line">&#125; : base.output;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// splitChunksè¿›è¡Œä»£ç åˆ†ç¦»ï¼Œé¿å…åŠ è½½é‡å¤ä»£ç </span></span><br><span class="line"><span class="keyword">let</span> splitChunks = &#123;</span><br><span class="line">    <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="attr">default</span>: &#123;</span><br><span class="line">            <span class="attr">minChunks</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">priority</span>: -<span class="number">20</span>,</span><br><span class="line">            <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//æ‰“åŒ…é‡å¤å‡ºç°çš„ä»£ç </span></span><br><span class="line">        <span class="attr">vendor</span>: &#123;</span><br><span class="line">            <span class="attr">chunks</span>: <span class="string">&#x27;initial&#x27;</span>,</span><br><span class="line">            <span class="attr">minChunks</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">maxInitialRequests</span>: <span class="number">5</span>, <span class="comment">// The default limit is too small to showcase the effect</span></span><br><span class="line">            <span class="attr">minSize</span>: <span class="number">0</span>, <span class="comment">// This is example is too small to create commons chunks</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;vendor&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//æ‰“åŒ…ç¬¬ä¸‰æ–¹ç±»åº“</span></span><br><span class="line">        <span class="attr">commons</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;vendor&#x27;</span>,</span><br><span class="line">            <span class="attr">chunks</span>: <span class="string">&#x27;initial&#x27;</span>,</span><br><span class="line">            <span class="attr">minChunks</span>: <span class="literal">Infinity</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-6-start-config-jsä¸build-config-jså·®å¼‚"><a href="#6-6-start-config-jsä¸build-config-jså·®å¼‚" class="headerlink" title="6.6 start.config.jsä¸build.config.jså·®å¼‚"></a>6.6 start.config.jsä¸build.config.jså·®å¼‚</h2><h3 id="6-6-1-start-config-js"><a href="#6-6-1-start-config-js" class="headerlink" title="6.6.1. start.config.js"></a>6.6.1. start.config.js</h3><ul>
<li>ä½¿ç”¨HotModuleReplacementPluginçƒ­æ›´æ–°æ¨¡å—</li>
<li>ä½¿ç”¨open-browser-pluginæœ¬åœ°èµ·æœåŠ¡æ—¶è‡ªåŠ¨æ‰“å¼€æŒ‡å®šé¡µé¢</li>
</ul>
<h3 id="6-6-2-build-cofig-js"><a href="#6-6-2-build-cofig-js" class="headerlink" title="6.6.2. build.cofig.js"></a>6.6.2. build.cofig.js</h3><ul>
<li>ä½¿ç”¨CleanWebpackPluginåœ¨æ¯ä¸€æ¬¡æ„å»ºå‰æ¸…é™¤æŒ‡å®šç›®å½•æ–‡ä»¶ </li>
<li>ä½¿ç”¨OptimizeCSSAssetsPluginå‹ç¼©CSSä»£ç  </li>
<li>ä½¿ç”¨TerserWebpackPluginå‹ç¼©JSä»£ç </li>
</ul>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>01ï½œChromeæ¶æ„ï¼šä»…ä»…æ‰“å¼€äº†1ä¸ªé¡µé¢ï¼Œä¸ºä»€ä¹ˆæœ‰4ä¸ªè¿›ç¨‹</title>
    <url>/2022/03/22/01%EF%BD%9CChrome%E6%9E%B6%E6%9E%84%EF%BC%9A%E4%BB%85%E4%BB%85%E6%89%93%E5%BC%80%E4%BA%861%E4%B8%AA%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%894%E4%B8%AA%E8%BF%9B%E7%A8%8B/</url>
    <content><![CDATA[<blockquote>
<p>è¿™æ˜¯é˜…è¯»æå…µ â€”â€”ã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹å¹¶ä½œå‡ºæ€»ç»“çš„ç¬¬ä¸€å¤©ï¼Œæ•´ä¸ªä¸“é¢˜å…±æœ‰46è®²ï¼Œè§„åˆ’æ˜¯ä¸€å¤©åšä¸€è®²çš„æ€»ç»“å¹¶å›é¡¾ä¹‹å‰çš„æ–‡ç« ã€‚</p>
</blockquote>
<h1 id="1-è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#1-è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="1. è¿›ç¨‹å’Œçº¿ç¨‹"></a>1. è¿›ç¨‹å’Œçº¿ç¨‹</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯å¹¶è¡Œå¤„ç†"><a href="#1-1-ä»€ä¹ˆæ˜¯å¹¶è¡Œå¤„ç†" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯å¹¶è¡Œå¤„ç†"></a>1.1 ä»€ä¹ˆæ˜¯å¹¶è¡Œå¤„ç†</h2><span id="more"></span>
<ol>
<li>å¹¶è¡Œå¤„ç†å°±æ˜¯åŒä¸€æ—¶åˆ»å¯ä»¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡</li>
</ol>
<h2 id="1-2-çº¿ç¨‹VSè¿›ç¨‹"><a href="#1-2-çº¿ç¨‹VSè¿›ç¨‹" class="headerlink" title="1.2 çº¿ç¨‹VSè¿›ç¨‹"></a>1.2 çº¿ç¨‹VSè¿›ç¨‹</h2><ol>
<li>çº¿ç¨‹æ˜¯ä¸èƒ½å•ç‹¬å­˜åœ¨çš„ï¼Œç”±è¿›ç¨‹æ¥å¯ç”¨å’Œç®¡ç†</li>
<li>ä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªç¨‹åºçš„è¿è¡Œå®ä¾‹</li>
<li>è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„4ä¸ªç‰¹ç‚¹<ol>
<li>è¿›ç¨‹ä¸­çš„ä»»ä¸€çº¿ç¨‹å´©æºƒéƒ½ä¼šå¯¼è‡´è¿›ç¨‹çš„å´©æºƒ</li>
<li>çº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«è¿›ç¨‹çš„æ•°æ®</li>
<li>å½“ä¸€ä¸ªè¿›ç¨‹å…³é—­ä¹‹åï¼Œæ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜</li>
<li>è¿›ç¨‹ä¹‹é—´çš„å†…å®¹ç›¸äº’éš”ç¦»</li>
</ol>
</li>
</ol>
<h1 id="2-å•è¿›ç¨‹æµè§ˆå™¨æ—¶ä»£"><a href="#2-å•è¿›ç¨‹æµè§ˆå™¨æ—¶ä»£" class="headerlink" title="2. å•è¿›ç¨‹æµè§ˆå™¨æ—¶ä»£"></a>2. å•è¿›ç¨‹æµè§ˆå™¨æ—¶ä»£</h1><p><img src="https://cdn.nlark.com/yuque/0/2022/png/323971/1647908726062-796e9ddb-e2be-4e58-9c8f-c3bfe2b495c3.png" alt="image.png"><br>å•è¿›ç¨‹æµè§ˆå™¨æ—¶ä»£ï¼Œæµè§ˆå™¨çš„æ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ç½‘ç»œã€æ’ä»¶ã€JavaScriptè¿è¡Œç¯å¢ƒã€æ¸²æŸ“å¼•æ“å’Œé¡µé¢ç­‰ï¼‰éƒ½è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œã€‚<br>å•è¿›ç¨‹æµè§ˆå™¨å­˜åœ¨ä¸ç¨³å®šã€ä¸æµç•…ã€ä¸å®‰å…¨çš„é—®é¢˜ã€‚</p>
<h2 id="2-1-ä¸ç¨³å®š"><a href="#2-1-ä¸ç¨³å®š" class="headerlink" title="2.1 ä¸ç¨³å®š"></a>2.1 ä¸ç¨³å®š</h2><blockquote>
<p>æ’ä»¶</p>
</blockquote>
<p>å•è¿›ç¨‹æµè§ˆå™¨æ—¶ä»£ï¼Œéœ€è¦å€ŸåŠ©<code>æ’ä»¶</code>æ¥å®ç°è¯¸å¦‚Webè§†é¢‘ã€Webæ¸¸æˆç­‰å„ç§å¼ºå¤§çš„åŠŸèƒ½ï¼Œä½†æ˜¯æ’ä»¶æ˜¯æœ€å®¹æ˜“å‡ºé—®é¢˜çš„æ¨¡å—ï¼Œå¹¶ä¸”è¿˜è¿è¡Œåœ¨æµè§ˆå™¨è¿›ç¨‹ä¸­ï¼Œæ‰€ä»¥ä¸€ä¸ªæ’ä»¶çš„æ„å¤–å´©æºƒä¼šå¼•èµ·æ•´ä¸ªæµè§ˆå™¨çš„å´©æºƒã€‚</p>
<blockquote>
<p>æ¸²æŸ“å¼•æ“</p>
</blockquote>
<p>æ¸²æŸ“å¼•æ“æ¨¡å—ï¼Œé€šå¸¸ä¸€äº›å¤æ‚çš„JSä»£ç éƒ½æœ‰å¯èƒ½å¼•èµ·æ¸²æŸ“å¼•æ“æ¨¡å—çš„å´©æºƒ</p>
<h2 id="2-2-ä¸æµç•…"><a href="#2-2-ä¸æµç•…" class="headerlink" title="2.2  ä¸æµç•…"></a>2.2  ä¸æµç•…</h2><p>æ‰€æœ‰é¡µé¢çš„æ¸²æŸ“çº¿ç¨‹ã€JavaScriptæ‰§è¡Œç¯å¢ƒä»¥åŠæ’ä»¶éƒ½è¿è¡Œåœ¨ä¸€ä¸ªé¡µé¢çº¿ç¨‹é‡Œï¼Œæ„å‘³ç€åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ¨¡å—å¯ä»¥è¢«æ‰§è¡Œã€‚</p>
<blockquote>
<p>è„šæœ¬æˆ–æ’ä»¶ä½¿å•è¿›ç¨‹æµè§ˆå™¨å˜å¡é¡¿</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">freeze</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;freeze&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">freeze();</span><br></pre></td></tr></table></figure>

<ul>
<li>æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜</li>
</ul>
<p>JavaScriptæ‰§è¡Œä¼šç‹¬å æ•´ä¸ªçº¿ç¨‹ï¼Œå¯¼è‡´è¯¥çº¿ç¨‹å…¶ä»–æ¨¡å—æ— æ³•è¢«æ‰§è¡Œï¼Œå³é¡µé¢æ²¡æœ‰æœºä¼šå»æ‰§è¡Œä»»åŠ¡ï¼Œå¯¼è‡´æ•´ä¸ªæµè§ˆå™¨å¤±å»å“åº”ã€‚</p>
<blockquote>
<p>é¡µé¢å†…å­˜æ³„æ¼ä½¿å•è¿›ç¨‹å˜æ…¢</p>
</blockquote>
<p>æµè§ˆå™¨çš„å†…æ ¸æ˜¯ååˆ†å¤æ‚çš„ï¼Œè¿è¡Œä¸€ä¸ªå¤æ‚çš„é¡µé¢å†å…³é—­é¡µé¢ï¼Œä¼šå­˜åœ¨å†…å­˜ä¸èƒ½å®Œå…¨å›æ”¶çš„æƒ…å†µï¼Œå¯¼è‡´ä½¿ç”¨æ—¶é—´è¶Šé•¿ï¼Œå†…å­˜å ç”¨è¶Šé«˜ï¼Œæµè§ˆå™¨å°±ä¼šå˜å¾—è¶Šæ…¢</p>
<h2 id="2-3-ä¸å®‰å…¨"><a href="#2-3-ä¸å®‰å…¨" class="headerlink" title="2.3 ä¸å®‰å…¨"></a>2.3 ä¸å®‰å…¨</h2><blockquote>
<p>æ’ä»¶</p>
</blockquote>
<p>æ’ä»¶å¯ä»¥è·å–åˆ°æ“ä½œç³»ç»Ÿçš„ä»»æ„èµ„æºï¼Œå½“ä½ åœ¨é¡µé¢è¿è¡Œä¸€ä¸ªæ’ä»¶æ—¶å°±æ„å‘³ç€è¿™ä¸ªæ’ä»¶èƒ½å®Œå…¨æ“ä½œä½ çš„ç”µè„‘ã€‚å¦‚æœæ˜¯ä¸ªæ¶æ„æ’ä»¶ï¼Œå°±æœ‰å¯èƒ½é‡Šæ”¾ç—…æ¯’ï¼Œ çªƒå–è´¦å·å¯†ç ï¼Œå¼•å‘å®‰å…¨é—®é¢˜</p>
<blockquote>
<p>é¡µé¢è„šæœ¬</p>
</blockquote>
<p>å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„æ¼æ´æ¥è·å–ç³»ç»Ÿæƒé™ï¼Œè¿™äº›è„šæœ¬è·å–ç³»ç»Ÿæƒé™ä¹‹åä¹Ÿå¯ä»¥å¯¹ç”µè„‘åšä¸€äº›æ¶æ„çš„äº‹æƒ…ï¼Œå¼•å‘å®‰å…¨é—®é¢˜ã€‚</p>
<h1 id="3-å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£"><a href="#3-å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£" class="headerlink" title="3. å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£"></a>3. å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£</h1><p><img src="https://cdn.nlark.com/yuque/0/2022/png/323971/1647925378646-b0effeba-5b28-492c-91c6-60781c2d9ef3.png" alt="image.png"></p>
<h2 id="3-1-è§£å†³ä¸ç¨³å®šé—®é¢˜"><a href="#3-1-è§£å†³ä¸ç¨³å®šé—®é¢˜" class="headerlink" title="3.1 è§£å†³ä¸ç¨³å®šé—®é¢˜"></a>3.1 è§£å†³ä¸ç¨³å®šé—®é¢˜</h2><p>è¿›ç¨‹ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå½“ä¸€ä¸ªé¡µé¢æˆ–è€…æ’ä»¶å´©æºƒï¼Œå½±å“åˆ°çš„ä»…ä»…æ˜¯å½“å‰çš„é¡µé¢è¿›ç¨‹æˆ–è€…æ’ä»¶è¿›ç¨‹ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°æµè§ˆå™¨å’Œå…¶ä»–é¡µé¢ã€‚è¿™å°±è§£å†³äº†å•è¿›ç¨‹æµè§ˆå™¨æ—¶ä»£é¡µé¢æˆ–è€…æ’ä»¶çš„å´©æºƒå¯¼è‡´æµè§ˆå™¨å´©æºƒçš„ä¸ç¨³å®šé—®é¢˜</p>
<h2 id="3-2-è§£å†³ä¸æµç•…é—®é¢˜"><a href="#3-2-è§£å†³ä¸æµç•…é—®é¢˜" class="headerlink" title="3.2 è§£å†³ä¸æµç•…é—®é¢˜"></a>3.2 è§£å†³ä¸æµç•…é—®é¢˜</h2><p>JavaScriptåªä¼šè¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œå³ä½¿JSé˜»å¡äº†æ¸²æŸ“è¿›ç¨‹ï¼Œå½±å“åˆ°çš„ä¹Ÿåªæ˜¯å½“å‰çš„æ¸²æŸ“é¡µé¢ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°æµè§ˆå™¨å’Œå…¶ä»–é¡µé¢ï¼Œå› ä¸ºå…¶ä»–é¡µé¢çš„è„šæœ¬æ˜¯è¿è¡Œåœ¨è‡ªå·±çš„æ¸²æŸ“è¿›ç¨‹ä¸­çš„ã€‚</p>
<blockquote>
<p>é¡µé¢å†…å­˜æ³„æ¼</p>
</blockquote>
<p>åœ¨å…³é—­é¡µé¢åï¼Œæ•´ä¸ªæ¸²æŸ“è¿›ç¨‹ä¹Ÿä¼šè¢«å…³é—­ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å ç”¨çš„å†…å­˜å°±ä¼šè¢«æ“ä½œç³»ç»Ÿå›æ”¶ï¼Œå°±è½»æ¾è§£å†³äº†å†…å­˜æ³„æ¼é—®é¢˜</p>
<h2 id="3-2-è§£å†³ä¸å®‰å…¨é—®é¢˜"><a href="#3-2-è§£å†³ä¸å®‰å…¨é—®é¢˜" class="headerlink" title="3.2 è§£å†³ä¸å®‰å…¨é—®é¢˜"></a>3.2 è§£å†³ä¸å®‰å…¨é—®é¢˜</h2><p>ä½¿ç”¨å®‰å…¨æ²™ç®±ã€‚å°†æ¸²æŸ“è¿›ç¨‹å’Œéƒ¨åˆ†æ’ä»¶è¿›ç¨‹é”åœ¨æ²™ç®±é‡Œé¢ï¼Œå³ä½¿åœ¨æ¸²æŸ“è¿›ç¨‹å’Œæ’ä»¶è¿›ç¨‹é‡Œé¢æ‰§è¡Œæ¶æ„ç¨‹åºï¼Œä¹Ÿæ— æ³•çªç ´æ²™ç®±å»è·å–ç³»ç»Ÿæƒé™ã€‚</p>
<h1 id="4-æœªæ¥é¢å‘æœåŠ¡çš„æ¶æ„"><a href="#4-æœªæ¥é¢å‘æœåŠ¡çš„æ¶æ„" class="headerlink" title="4. æœªæ¥é¢å‘æœåŠ¡çš„æ¶æ„"></a>4. æœªæ¥é¢å‘æœåŠ¡çš„æ¶æ„</h1><p><img src="https://cdn.nlark.com/yuque/0/2022/png/323971/1647925693055-784e0ac7-7ba9-479a-8b05-5b74948ec367.png#clientId=ue7ed3d14-4548-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=291&id=ud2b2b057&margin=%5Bobject%20Object%5D&name=image.png&originHeight=582&originWidth=1142&originalType=binary&ratio=1&rotation=0&showTitle=false&size=136514&status=done&style=none&taskId=u168ad080-1f5f-4d37-8201-16d7de4638b&title=&width=571" alt="image.png"></p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ol>
<li>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è§£ç­”é¢˜ç›®ï¼ˆé¢˜ç›®ï¼šä»…ä»…æ‰“å¼€äº†1ä¸ªé¡µé¢ï¼Œä¸ºä»€ä¹ˆæœ‰4ä¸ªè¿›ç¨‹ï¼‰ä¸ºä»€ä¹ˆæœ‰4ä¸ªè¿›ç¨‹äº†ã€‚<ol>
<li>å››ä¸ªè¿›ç¨‹åˆ†åˆ«æ˜¯æµè§ˆå™¨è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ã€GPUè¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹ã€‚</li>
<li>å› ä¸ºæµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹æµè§ˆå™¨ï¼Œæ‰€ä»¥æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œå°±ä¼šæœ‰4ä¸ªè¿›ç¨‹ï¼Œå¦‚æœæœ‰ä½¿ç”¨æ’ä»¶çš„è¯ï¼Œå°±ä¼šå†å¤šä¸€ä¸ªæ’ä»¶è¿›ç¨‹ã€‚</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>ã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>02 | TCPåè®®ï¼šå¦‚ä½•ä¿è¯é¡µé¢æ–‡ä»¶èƒ½è¢«å®Œæ•´é€è¾¾æµè§ˆå™¨ï¼Ÿ</title>
    <url>/2022/03/24/02%EF%BD%9CTCP%E5%8D%8F%E8%AE%AE%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E9%A1%B5%E9%9D%A2%E6%96%87%E4%BB%B6%E8%83%BD%E8%A2%AB%E5%AE%8C%E6%95%B4%E9%80%81%E8%BE%BE%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%9F/</url>
    <content><![CDATA[<h1 id="1-IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº"><a href="#1-IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº" class="headerlink" title="1. IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº"></a>1. IPï¼šæŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœº</h1><p><strong>è®¡ç®—æœºçš„åœ°å€ç§°ä¸ºIPåœ°å€ï¼Œè®¿é—®ä»»ä½•ç½‘ç«™å®é™…ä¸Šåªæ˜¯ä½ çš„è®¡ç®—æœºå‘å¦å¤–ä¸€å°è®¡ç®—æœºè¯·æ±‚ä¿¡æ¯ã€‚</strong><br><img src="https://cdn.nlark.com/yuque/0/2022/png/323971/1647998216854-c2a1b421-59d6-4550-ade3-10ad68e511f8.png" alt="image.png"></p>
<span id="more"></span>
<blockquote>
<p>æ•°æ®åŒ…ä»ä¸»æœºAåˆ°ä¸»æœºBçš„æ—…ç¨‹</p>
</blockquote>
<ul>
<li>ä¸Šå±‚å°†â€œæå®¢æ—¶é—´â€çš„æ•°æ®åŒ…äº¤ç»™æ•°æ®å±‚</li>
<li>ç½‘ç»œå±‚å†å°†IPå¤´é™„åŠ åˆ°æ•°æ®åŒ…ä¸Šï¼Œç»„æˆæ–°çš„IPæ•°æ®åŒ…ï¼Œå¹¶äº¤ç»™åº•å±‚</li>
<li>åº•å±‚é€šè¿‡ç‰©ç†ç½‘ç»œå°†æ•°æ®åŒ…ä¼ è¾“ç»™ä¸»æœºB</li>
<li>æ•°æ®åŒ…è¢«ä¼ è¾“åˆ°ä¸»æœºBçš„ç½‘ç»œå±‚ï¼Œä¸»æœºBæ‹†åˆ†æ•°æ®åŒ…çš„IPå¤´ä¿¡æ¯ï¼Œå¹¶å°†æ‹†å¼€çš„æ•°æ®éƒ¨åˆ†äº¤ç»™ä¸Šå±‚</li>
<li>æœ€åï¼Œå«æœ‰â€œæå®¢æ—¶é—´â€ä¿¡æ¯çš„æ•°æ®åŒ…å°±åˆ°è¾¾äº†ä¸»æœºBçš„ä¸Šå±‚</li>
</ul>
<h1 id="2-UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº"><a href="#2-UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº" class="headerlink" title="2. UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº"></a>2. UDPï¼šæŠŠæ•°æ®åŒ…é€è¾¾åº”ç”¨ç¨‹åº</h1><p><code>IP</code>æ˜¯éå¸¸åº•å±‚çš„åè®®ï¼Œåªè´Ÿè´£æŠŠæ•°æ®åŒ…ä¼ é€åˆ°å¯¹æ–¹ç”µè„‘ï¼Œä½†æ˜¯å¯¹æ–¹å¹¶ä¸çŸ¥é“è¦æŠŠæ•°æ®åŒ…ä¼ è¾“ç»™å“ªä¸ªç¨‹åºï¼Œæ˜¯äº¤ç»™æµè§ˆå™¨è¿˜æ˜¯äº¤ç»™ç‹è€…è£è€€ï¼Ÿå› æ­¤ï¼ŒåŸºäº<code>IP</code>ä¹‹ä¸Šå¼€å‘èƒ½å’Œåº”ç”¨æ‰“äº¤é“çš„åè®®ã€‚æœ€å¸¸è§çš„å°±æ˜¯â€œç”¨æˆ·æ•°æ®åŒ…åè®®(User Datagram Protocol)ï¼Œç®€ç§°<code>UDP</code>â€</p>
<p><code>UDP</code>ä¸­ä¸€ä¸ªæœ€é‡è¦çš„ä¿¡æ¯å°±æ˜¯ç«¯å£å·ï¼Œé€šè¿‡ç«¯å£å·<code>UDP</code>å°±èƒ½æŠŠæŒ‡å®šçš„æ•°æ®åŒ…å‘é€ç»™æŒ‡å®šçš„ç¨‹åºã€‚</p>
<p><strong>IPé€šè¿‡IPåœ°å€ä¿¡æ¯æŠŠæ•°æ®åŒ…å‘é€ç»™æŒ‡å®šçš„ç”µè„‘ï¼ŒUDPé€šè¿‡ç«¯å£å·æŠŠæ•°æ®åˆ†å‘ç»™æ­£ç¡®çš„ç¨‹åºã€‚</strong></p>
<p>UDPå¤´ä¸­é™¤äº†ç›®çš„ç«¯å£ï¼Œè¿˜æœ‰æºç«¯å£ä¿¡æ¯ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2022/png/323971/1647998778293-f1d5e758-241e-453c-abe6-83988c21f833.png" alt="image.png"></p>
<blockquote>
<p>æ•°æ®åŒ…ä»ä¸»æœºAåˆ°ä¸»æœºBçš„è¿‡ç¨‹</p>
</blockquote>
<ul>
<li>ä¸Šå±‚å°†å«æœ‰â€œæå®¢æ—¶é—´â€çš„æ•°æ®åŒ…äº¤ç»™ä¼ è¾“å±‚</li>
<li>ä¼ è¾“å±‚åœ¨æ•°æ®åŒ…å‰é¢åŠ ä¸ŠUDPå¤´ï¼Œç»„æˆæ–°çš„UDPæ•°æ®åŒ…ï¼Œå†å°†æ–°çš„UDPæ•°æ®åŒ…äº¤ç»™ç½‘ç»œå±‚</li>
<li>ç½‘ç»œå±‚å†å°†IPå¤´é™„åŠ åˆ°æ•°æ®åŒ…ä¸Šï¼Œç»„æˆæ–°çš„IPæ•°æ®åŒ…ï¼Œå¹¶äº¤ç»™åº•å±‚</li>
<li>æ•°æ®åŒ…è¢«ä¼ è¾“ç»™ä¸»æœºBçš„ç½‘ç»œå±‚ï¼Œåœ¨è¿™é‡Œä¸»æœºBæ‹†åˆ†IPå¤´ä¿¡æ¯ï¼Œå¹¶å°†æ‹†å¼€æ¥çš„æ•°æ®äº¤ç»™ä¼ è¾“å±‚</li>
<li>åœ¨ä¼ è¾“å±‚ä¸­ï¼Œæ•°æ®åŒ…çš„UDPå¤´ä¼šæŠŠæ‹†å¼€ï¼Œå¹¶æ ¹æ®UDPä¸­æä¾›çš„ç«¯å£å·ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç¨‹åºï¼Œå°†æ•°æ®äº¤ç»™ä¸Šå±‚çš„åº”ç”¨ç¨‹åºã€‚</li>
<li>æœ€ç»ˆï¼Œå«æœ‰â€œæå®¢æ—¶é—´â€ä¿¡æ¯çš„æ•°æ®å°±åˆ°äº†ä¸»æœºBçš„ä¸Šå±‚åº”ç”¨ç¨‹åºè¿™é‡Œã€‚</li>
</ul>
<blockquote>
<p>UDPå­˜åœ¨çš„é—®é¢˜</p>
</blockquote>
<ul>
<li>UDPå¯ä»¥æ ¡éªŒæ•°æ®æ˜¯å¦æ­£ç¡®ï¼Œä½†å‘é€åæ— æ³•ç¡®è®¤æ•°æ®æ˜¯å¦åˆ°è¾¾ç›®æ ‡ç¨‹åº</li>
<li>æ•°æ®æœ‰å¯èƒ½åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼Œä½†æ˜¯UDPä¸æä¾›é‡ä¼ æœºåˆ¶ï¼Œä¸¢å¤±çš„æ•°æ®æ— æ³•å†é‡å‘åˆ°ç›®æ ‡ç¨‹åº</li>
</ul>
<h1 id="3-TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº"><a href="#3-TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº" class="headerlink" title="3. TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº"></a>3. TCPï¼šæŠŠæ•°æ®å®Œæ•´åœ°é€è¾¾åº”ç”¨ç¨‹åº</h1><blockquote>
<p>UDPå­˜åœ¨çš„é—®é¢˜</p>
</blockquote>
<ol>
<li>ä¸æä¾›é‡ä¼ çš„æœºåˆ¶ï¼Œä¸¢å¤±çš„æ•°æ®åŒ…æ— æ³•è¢«å†æ¬¡ä¼ è¾“ï¼Œå¯¼è‡´æ•°æ®å®¹æ˜“ä¸¢å¤±ã€‚</li>
<li>æ•°æ®åŒ…åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ä¼šè¢«åˆ†æˆå¾ˆå¤šå°çš„æ•°æ®åŒ…æ¥ä¼ è¾“ï¼Œè¿™äº›å°çš„æ•°æ®åŒ…ä¼šç»è¿‡ä¸åŒçš„è·¯ç”±ï¼Œå¹¶åœ¨ä¸åŒçš„æ—¶é—´åˆ°è¾¾æ¥æ”¶ç«¯ã€‚ä½†æ˜¯UDPåè®®å¹¶ä¸çŸ¥é“è¯¥å¦‚ä½•ç»„è£…è¿™äº›æ•°æ®åŒ…ï¼Œä»è€ŒæŠŠè¿™äº›æ•°æ®åŒ…è¿˜åŸæˆå®Œæ•´çš„æ–‡ä»¶ã€‚</li>
</ol>
<blockquote>
<p>å¼•å…¥TCP</p>
</blockquote>
<p><strong>TCPæ˜¯ä¸€ç§é¢å‘è¿æ¥ï¼Œå¯é çš„ï¼ŒåŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚ç›¸å¯¹äºUDPï¼ŒTCPæœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>å¯¹äºæ•°æ®åŒ…ä¸¢å¤±ï¼Œæä¾›é‡ä¼ æœºåˆ¶</li>
<li>å¼•å…¥äº†æ•°æ®åŒ…æ’åºæœºåˆ¶ï¼Œç”¨æ¥ä¿è¯æŠŠä¹±åºçš„æ•°æ®åŒ…ç»„åˆæˆä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ã€‚</li>
</ol>
<p>å’ŒUDPå¤´ä¸€æ ·ï¼ŒTCPå¤´é™¤äº†åŒ…å«äº†ç›®æ ‡ç«¯å£å’Œæœ¬æœºç«¯å£å·å¤–ï¼Œè¿˜æä¾›äº†ç”¨äºæ’åºçš„åºåˆ—å·ï¼Œä»¥ä¾¿æ¥æ”¶ç«¯é€šè¿‡åºå·æ¥é‡æ’æ•°æ®åŒ…ã€‚</p>
<p>ä¸‹å›¾æ˜¯TCPä¸‹å•ä¸ªæ•°æ®åŒ…çš„ä¼ è¾“è¿‡ç¨‹ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/323971/1648079519137-b9af7ef9-2d2c-49c1-a87d-e18180a295c8.png" alt="image.png"><br>å†æ¥ç»§ç»­çœ‹<strong>å®Œæ•´çš„TCPè¿æ¥è¿‡ç¨‹ï¼Œ</strong>é€šè¿‡è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å°±èƒ½æ˜ç™½TCPæ˜¯å¦‚ä½•ä¿è¯é‡ä¼ æœºåˆ¶å’Œæ•°æ®åŒ…çš„æ’åºåŠŸèƒ½çš„ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2022/png/323971/1648079594794-7d30c679-805b-4563-88c3-f4aaea740de0.png" alt="image.png"><br>ä¸€ä¸ªå®Œæ•´çš„TCPè¿æ¥çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬äº†â€œ**å»ºç«‹è¿æ¥â€ â€œä¼ è¾“æ•°æ® â€ â€œæ–­å¼€è¿æ¥â€ **è¿™ä¸‰ä¸ªé˜¶æ®µã€‚</p>
<ul>
<li><strong>å»ºç«‹è¿æ¥é˜¶æ®µã€‚</strong>è¿™ä¸ªé˜¶æ®µé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„è¿æ¥ã€‚ä¸‰æ¬¡æ¡æ‰‹ï¼Œå°±æ˜¯æŒ‡åœ¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ€»å…±è¦å‘ç”Ÿä¸‰ä¸ªæ•°æ®åŒ…æ¥ç¡®å®šè¿æ¥çš„å»ºç«‹</li>
<li><strong>ä¼ è¾“æ•°æ®é˜¶æ®µã€‚</strong>åœ¨è¯¥é˜¶æ®µï¼Œæ¥æ”¶ç«¯éœ€è¦å¯¹æ¯ä¸ªæ•°æ®åŒ…è¿›è¡Œç¡®è®¤æ“ä½œï¼Œä¹Ÿå°±æ˜¯æ¥æ”¶ç«¯åœ¨æ¥æ”¶åˆ°æ•°æ®åŒ…ä¹‹åï¼Œéœ€è¦å‘é€ç¡®è®¤æ•°æ®åŒ…ç»™å‘é€ç«¯ã€‚æ‰€ä»¥å½“å‘é€ç«¯å‘é€äº†ä¸€ä¸ªæ•°æ®åŒ…ä¹‹åï¼Œåœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ¥æ”¶ç«¯åé¦ˆçš„ç¡®è®¤æ¶ˆæ¯ï¼Œåˆ™åˆ¤æ–­ä¸ºæ•°æ®åŒ…ä¸¢å¤±ï¼Œå¹¶è§¦å‘å‘é€ç«¯çš„é‡ä¼ æœºåˆ¶ã€‚åŒæ ·ï¼Œä¸€ä¸ªå¤§çš„æ–‡ä»¶åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šè¢«æ‹†åˆ†æˆå¾ˆå¤šå°çš„æ•°æ®åŒ…æ¥è¿›è¡Œä¼ è¾“ï¼Œè¿™äº›æ•°æ®åŒ…åˆ°è¾¾æ¥æ”¶ç«¯åï¼Œæ¥æ”¶ç«¯ä¼šæŒ‰ç…§TCPå¤´ä¸­çš„åºå·ä¸ºå…¶æ’åºï¼Œä»è€Œä¿è¯ç»„æˆå®Œæ•´çš„æ•°æ®ã€‚</li>
<li><strong>æœ€åï¼Œæ–­å¼€è¿æ¥é˜¶æ®µã€‚</strong>æ•°æ®ä¼ è¾“å®Œæ¯•ä¹‹åï¼Œå°±è¦ç»ˆæ­¢è¿æ¥äº†ï¼Œæ¶‰åŠåˆ°æœ€åä¸€ä¸ªé˜¶æ®µâ€œå››æ¬¡æŒ¥æ‰‹â€æ¥ä¿è¯åŒæ–¹éƒ½èƒ½æ–­å¼€è¿æ¥ã€‚</li>
</ul>
<p>TCPä¸ºäº†ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Œç‰ºç‰²äº†æ•°æ®åŒ…çš„ä¼ è¾“é€Ÿåº¦ï¼Œå› æ­¤â€œä¸‰æ¬¡æ¡æ‰‹â€å’Œâ€œæ•°æ®åŒ…æ ¡éªŒæœºåˆ¶â€ç­‰æŠŠä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®åŒ…çš„æ•°é‡æé«˜äº†ä¸€å€ã€‚</p>
<h1 id="æ€è€ƒï¼šå¦‚ä½•ç†è§£HTTPå’ŒTCPçš„å…³ç³»ï¼Ÿ"><a href="#æ€è€ƒï¼šå¦‚ä½•ç†è§£HTTPå’ŒTCPçš„å…³ç³»ï¼Ÿ" class="headerlink" title="æ€è€ƒï¼šå¦‚ä½•ç†è§£HTTPå’ŒTCPçš„å…³ç³»ï¼Ÿ"></a>æ€è€ƒï¼šå¦‚ä½•ç†è§£HTTPå’ŒTCPçš„å…³ç³»ï¼Ÿ</h1><ol>
<li>HTTPå’ŒTCPéƒ½æ˜¯TCP/IPåè®®ç°‡çš„å­é›†ã€‚</li>
<li>HTTPå±äºåº”ç”¨å±‚ï¼ŒTCPå±äºä¼ è¾“å±‚ï¼ŒHTTPåè®®ä½äºTCPåè®®çš„ä¸Šå±‚ã€‚</li>
<li>è¯·æ±‚æ–¹è¦å‘é€çš„æ•°æ®ï¼Œåœ¨åº”ç”¨å±‚åŠ ä¸ŠHTTPå¤´ä»¥åä¼šäº¤ç»™ä¼ è¾“å±‚çš„TCPåè®®å¤„ç†ï¼Œåº”ç­”æ–¹æ¥æ”¶åˆ°çš„æ•°æ®åŒ…ï¼Œåœ¨ä¼ è¾“å±‚æ‹†æ‰TCPå¤´ä»¥åäº¤ç»™åº”ç”¨å±‚HTTPåè®®å¤„ç†ã€‚</li>
<li>å»ºç«‹TCPè¿æ¥åä¼šé¡ºåºæ”¶å‘æ•°æ®ï¼Œè¯·æ±‚æ–¹å’Œåº”ç­”æ–¹éƒ½å¿…é¡»ä¾æ®HTTPè§„èŒƒæ„å»ºå’Œè§£æHTTPæŠ¥æ–‡ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>ã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Promiseå®ç°</title>
    <url>/2022/03/15/Promise%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<h1 id="1-åˆå§‹ç»“æ„"><a href="#1-åˆå§‹ç»“æ„" class="headerlink" title="1. åˆå§‹ç»“æ„"></a>1. åˆå§‹ç»“æ„</h1><h2 id="åŸç”Ÿ"><a href="#åŸç”Ÿ" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¼ å…¥funcï¼Œfuncçš„å‚æ•°åˆ†åˆ«æ˜¯resolve, reject<span id="more"></span>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myPromise</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line">    func(<span class="built_in">this</span>.resolve, <span class="built_in">this</span>.reject)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">resolve</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="title">reject</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-çŠ¶æ€"><a href="#2-çŠ¶æ€" class="headerlink" title="2. çŠ¶æ€"></a>2. çŠ¶æ€</h1><ol>
<li>å…±æœ‰ä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯<ul>
<li>Pending</li>
<li>Fulfilled</li>
<li>Rejected</li>
</ul>
</li>
</ol>
<h2 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> PENDING = <span class="string">&#x27;pending&#x27;</span>;</span><br><span class="line">    <span class="keyword">static</span> FULFILLED = <span class="string">&#x27;fulfilled&#x27;</span>;</span><br><span class="line">    <span class="keyword">static</span> REJECTED = <span class="string">&#x27;rejected&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = MyPromise.PENDING;</span><br><span class="line">        func(<span class="built_in">this</span>.resolve, <span class="built_in">this</span>.reject);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">resolve</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">            <span class="built_in">this</span>.status = MyPromise.FULFILLED;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">reject</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">            <span class="built_in">this</span>.status = MyPromise.REJECTED;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>staticå…³é”®å­—</p>
</blockquote>
<ol>
<li><p>staticå®šä¹‰é™æ€æ–¹æ³•/é™æ€å±æ€§</p>
</li>
<li><p>ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œå®ä¾‹èƒ½å¤Ÿç»§æ‰¿åŸå‹ä¸Šçš„æ–¹æ³•å’Œå±æ€§ï¼›</p>
</li>
<li><p>åŠ ä¸Šstaticå…³é”®å­—ï¼Œæ–¹æ³•æˆ–è€…å±æ€§å°±ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œéœ€è¦é€šè¿‡ç±»æ¥è°ƒç”¨ã€‚</p>
</li>
</ol>
<h3 id="æ‰§è¡Œ"><a href="#æ‰§è¡Œ" class="headerlink" title="æ‰§è¡Œ"></a>æ‰§è¡Œ</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="1.png" alt="1.png"></p>
<p>ç°è±¡ï¼šæŠ¥é”™Cannot read property â€˜statusâ€™ of undefined</p>
<p>åŸå› : </p>
<ol>
<li><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºæ–°å®ä¾‹çš„æ—¶å€™ç¡®å®ç»‘å®šäº†thisæŒ‡å‘</p>
</li>
<li><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬æ˜¯åœ¨æ–°å®ä¾‹è¢«åˆ›å»ºåå†åœ¨å¤–éƒ¨ç¯å¢ƒä¸‹æ‰§è¡Œresolveæ–¹æ³•çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨resolveæ‰“å°ä¸€ä¸‹thisæŒ‡å‘</p>
</li>
</ol>
<p><img src="2.png" alt="2.png"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶thisæŒ‡å‘undefined</p>
<p>è§£å†³åŠæ³•ï¼šç»‘å®šthiså€¼ï¼Œå¯ä»¥é€šè¿‡bind, ç®­å¤´å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">		...</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line">				....</span><br><span class="line">        func(<span class="built_in">this</span>.resolve.bind(<span class="built_in">this</span>), <span class="built_in">this</span>.reject.bind(<span class="built_in">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line">		...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾ˆå¥½ï¼Œæ­¤æ—¶thisæŒ‡å‘å¯¹äº†ã€‚</p>
<h1 id="3-ä¼ å‚æ•°"><a href="#3-ä¼ å‚æ•°" class="headerlink" title="3. ä¼ å‚æ•°"></a>3. ä¼ å‚æ•°</h1><h2 id="åŸç”Ÿ-1"><a href="#åŸç”Ÿ-1" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h2><ol>
<li>åŸç”Ÿçš„promiseå¯ä»¥ç»™resolve/rejectå›è°ƒä¼ å…¥å‚æ•°ï¼Œå¹¶ä¸”åœ¨thenä¸­å¯ä»¥æ¥æ”¶åˆ°ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;42&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h2><ol>
<li>åœ¨constructoræ„é€ å‡½æ•°ä¸­å®šä¹‰å˜é‡resultï¼Œç”¨æ¥å­˜å‚¨ä¼ è¿›æ¥çš„å‚æ•°</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">		...</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line">      ...</span><br><span class="line">        <span class="built_in">this</span>.result = <span class="literal">null</span>;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">resolve</span>(<span class="params">result</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">						...</span><br><span class="line">            <span class="built_in">this</span>.result = result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">reject</span>(<span class="params">result</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">						...</span><br><span class="line">            <span class="built_in">this</span>.result = result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-then"><a href="#4-then" class="headerlink" title="4. then"></a>4. then</h1><h2 id="åŸç”Ÿ-2"><a href="#åŸç”Ÿ-2" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;42&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">promise1.then(</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(result) &#125;,</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(result)&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol>
<li>åŸç”Ÿçš„thenæ”¯æŒä¼ å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°</li>
<li>ä½†æ˜¯åªèƒ½æ‰§è¡Œå…¶ä¸­ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¦‚æœçŠ¶æ€æ˜¯fulfilledï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼›å¦åˆ™ï¼Œæ‰§è¡Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°</li>
</ol>
<h2 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h2><ol>
<li>å®šä¹‰thenå‡½æ•°ï¼Œä¼ å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">		....</span><br><span class="line">    <span class="function"><span class="title">then</span>(<span class="params">onFulFILLED, onREJECTED</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.FULFILLED) &#123;</span><br><span class="line">            onFulFILLED(<span class="built_in">this</span>.result)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.REJECTED) &#123;</span><br><span class="line">            onREJECTED(<span class="built_in">this</span>.result)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-æ‰§è¡Œå¼‚å¸¸"><a href="#5-æ‰§è¡Œå¼‚å¸¸" class="headerlink" title="5. æ‰§è¡Œå¼‚å¸¸"></a>5. æ‰§è¡Œå¼‚å¸¸</h1><h2 id="å¼‚å¸¸ä¸€"><a href="#å¼‚å¸¸ä¸€" class="headerlink" title="å¼‚å¸¸ä¸€"></a>å¼‚å¸¸ä¸€</h2><h3 id="åŸç”Ÿ-3"><a href="#åŸç”Ÿ-3" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;æ‰§è¡Œå¼‚å¸¸&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">promise1.then(</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(result) &#125;,</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(result.message)&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œå¼‚å¸¸</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨new Promiseæ—¶æŠ›å‡ºé”™è¯¯ï¼Œthrow new Error(â€˜â€¦â€™)ï¼›åœ¨thenä¸­çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ä¸­å¯ä»¥catchåˆ°è¿™ä¸ªé”™è¯¯</li>
</ol>
<h3 id="å®ç°-4"><a href="#å®ç°-4" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="ç›®å‰æ•ˆæœ"><a href="#ç›®å‰æ•ˆæœ" class="headerlink" title="ç›®å‰æ•ˆæœ"></a>ç›®å‰æ•ˆæœ</h4><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬ç°æœ‰çš„å®ç°ä»£ç ä¸­æŠ›å‡ºç›¸åŒå¼‚å¸¸ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<p><img src="3.png" alt="3.png"></p>
<h4 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a><strong>è§£å†³åŠæ³•</strong></h4><p>åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ tryâ€¦catchï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯å°±èµ°æ­£å¸¸çš„funcï¼Œå¦‚æœæœ‰é”™è¯¯å°±ç›´æ¥èµ°rejectæ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">		...</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = MyPromise.PENDING;</span><br><span class="line">        <span class="built_in">this</span>.result = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            func(<span class="built_in">this</span>.resolve.bind(<span class="built_in">this</span>), <span class="built_in">this</span>.reject.bind(<span class="built_in">this</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">            <span class="built_in">this</span>.reject(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">		...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œ</strong></p>
<p><img src="4.png" alt="4.png"></p>
<h2 id="å¼‚å¸¸äºŒ"><a href="#å¼‚å¸¸äºŒ" class="headerlink" title="å¼‚å¸¸äºŒ"></a>å¼‚å¸¸äºŒ</h2><h3 id="åŸç”Ÿ-4"><a href="#åŸç”Ÿ-4" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h3><ol>
<li>åŸç”ŸPromiseè§„å®šthené‡Œé¢çš„ä¸¤ä¸ªå‚æ•°å¦‚æœä¸æ˜¯å‡½æ•°çš„è¯å°±è¦è¢«å¿½ç•¥</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;42&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">promise1.then(</span><br><span class="line">    <span class="literal">undefined</span>,</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(result.message)&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ç”±äºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„undefined,æ ¹æ®è§„å®šï¼Œè¿™ä¸ªå‚æ•°è¢«å¿½ç•¥ã€‚æ‰€ä»¥æ§åˆ¶å°æ²¡æœ‰ä»»ä½•è¾“å‡º</p>
<h3 id="å®ç°-5"><a href="#å®ç°-5" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="ç›®å‰æ•ˆæœ-1"><a href="#ç›®å‰æ•ˆæœ-1" class="headerlink" title="ç›®å‰æ•ˆæœ"></a>ç›®å‰æ•ˆæœ</h4><p>å°è¯•åœ¨æˆ‘ä»¬ç›®å‰çš„å®ç°ä»£ç ä¸­ä¼ å…¥undefeindï¼Œæ˜¯ä¼šæŠ¥é”™çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="5.png" alt="5.png"></p>
<h4 id="è§£å†³åŠæ³•-1"><a href="#è§£å†³åŠæ³•-1" class="headerlink" title="è§£å†³åŠæ³•"></a><strong>è§£å†³åŠæ³•</strong></h4><p>é»˜è®¤å°†onFulFILLEDå’ŒonREJECTEDå¤„ç†æˆä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">    <span class="function"><span class="title">then</span>(<span class="params">onFulFILLED, onREJECTED</span>)</span> &#123;</span><br><span class="line">        onFulFILLED = <span class="keyword">typeof</span> onFulFILLED === <span class="string">&#x27;function&#x27;</span> ? onFulFILLED : <span class="function">() =&gt;</span> &#123; &#125;;</span><br><span class="line">        onREJECTED = <span class="keyword">typeof</span> onREJECTED === <span class="string">&#x27;function&#x27;</span> ? onREJECTED : <span class="function">() =&gt;</span> &#123; &#125;;</span><br><span class="line">		...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œå°±èƒ½å’ŒåŸç”Ÿä¸€æ ·äº†ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ä¸æ˜¯å‡½æ•°çš„è¯ï¼Œå°±å¿½ç•¥ã€‚</p>
<h1 id="6-å¼‚æ­¥"><a href="#6-å¼‚æ­¥" class="headerlink" title="6. å¼‚æ­¥"></a>6. å¼‚æ­¥</h1><h2 id="å…³æ³¨ç‚¹ä¸€"><a href="#å…³æ³¨ç‚¹ä¸€" class="headerlink" title="å…³æ³¨ç‚¹ä¸€"></a>å…³æ³¨ç‚¹ä¸€</h2><h3 id="åŸç”Ÿ-5"><a href="#åŸç”Ÿ-5" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹åŸç”ŸPromiseçš„æ‰§è¡Œæœºåˆ¶ã€‚å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">    resolve(<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">promise1.then(</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(result) &#125;,</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(result.message)&#125;</span><br><span class="line">)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;3&#x27;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p> è¿™é‡Œå…³ç³»åˆ°äº‹ä»¶æ‰§è¡Œæœºåˆ¶ï¼Œä¸æ‡‚çš„å¯ä»¥å»äº†è§£ä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚</p>
</blockquote>
<p>æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">å“ˆå“ˆ</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼Œæ‰€ä»¥è¾“å‡º1ï¼Œ2ï¼Œ3ï¼›ç„¶åæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œè¾“å‡ºå“ˆå“ˆï¼›</p>
<h3 id="å®ç°-6"><a href="#å®ç°-6" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="ç›®å‰æ•ˆæœ-2"><a href="#ç›®å‰æ•ˆæœ-2" class="headerlink" title="ç›®å‰æ•ˆæœ"></a>ç›®å‰æ•ˆæœ</h4><p>è®©æˆ‘ä»¬åœ¨ç›®å‰çš„å®ç°ä»£ç ä¸­æ‰§è¡Œè¯¥æ®µä»£ç ï¼Œ</p>
<p><img src="6.png" alt="6.png"></p>
<p>å’ŒåŸç”Ÿä¸ä¸€æ ·å‘¢ï¼Œå®ƒå¹¶æ²¡æœ‰å¼‚æ­¥çš„feelï½</p>
<h4 id="è§£å†³åŠæ³•-2"><a href="#è§£å†³åŠæ³•-2" class="headerlink" title="è§£å†³åŠæ³•"></a><strong>è§£å†³åŠæ³•</strong></h4><ol>
<li>å¼•å…¥setTimeoutè®©æˆ‘ä»¬çš„Promise.thenå˜æˆå¼‚æ­¥æ¥æ¨¡ä»¿åŸç”ŸPromiseçš„æ‰§è¡Œæ•ˆæœæŠŠï½</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">		...</span><br><span class="line">    <span class="function"><span class="title">then</span>(<span class="params">onFulFILLED, onREJECTED</span>)</span> &#123;</span><br><span class="line">				...</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.FULFILLED) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                onFulFILLED(<span class="built_in">this</span>.result)</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.REJECTED) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                onREJECTED(<span class="built_in">this</span>.result)</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>è¿˜æ˜¯æ‰§è¡Œä¸Šé¢çš„ä»£ç </li>
</ol>
<p><img src="7.png" alt="7.png"></p>
<p>å“‡å””ï½ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼‚æ­¥è¾“å‡ºå“ˆå“ˆå•¦ï½</p>
<h2 id="å…³æ³¨ç‚¹äºŒ"><a href="#å…³æ³¨ç‚¹äºŒ" class="headerlink" title="å…³æ³¨ç‚¹äºŒ"></a>å…³æ³¨ç‚¹äºŒ</h2><h3 id="åŸç”Ÿ-6"><a href="#åŸç”Ÿ-6" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h3><p>å¦‚æœæˆ‘ä»¬åœ¨new Promiseä¸­çš„resolveå›è°ƒå¤–é¢åŠ å…¥ä¸€ä¸ªsetTimeoutå‘¢ï¼Ÿæ­¤æ—¶åŸç”ŸPromiseçš„æ‰§è¡Œæ•ˆæœä¼šæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;4&#x27;</span>);</span><br><span class="line">        resolve(<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line">promise1.then(</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(result) &#125;,</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(result.message)&#125;</span><br><span class="line">)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;3&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line">å“ˆå“ˆ</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°-7"><a href="#å®ç°-7" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="ç›®å‰æ•ˆæœ-3"><a href="#ç›®å‰æ•ˆæœ-3" class="headerlink" title="ç›®å‰æ•ˆæœ"></a>ç›®å‰æ•ˆæœ</h4><p>è®©æˆ‘ä»¬ç»§ç»­åœ¨å®ç°ä»£ç ä¸­æ‰§è¡Œä»¥ä¸Šçš„ä»£ç çœ‹çœ‹è¾“å‡ºé¡ºåºå§ï½</p>
<p><img src="8.png" alt="8.png"></p>
<p>å’¦ï½å“ˆå“ˆå“ªé‡Œå»äº†ï¼Ÿï¼Ÿ</p>
<h4 id="åˆ†æåŸå› "><a href="#åˆ†æåŸå› " class="headerlink" title="åˆ†æåŸå› "></a><strong>åˆ†æåŸå› </strong></h4><p>â€œå“ˆå“ˆâ€æ²¡æœ‰è¢«è¾“å‡ºåŸå›  -&gt; thenæ–¹æ³•å¯èƒ½æ²¡æœ‰è¢«æ‰§è¡Œ -&gt; thenæ–¹æ³•ä¸­çš„çŠ¶æ€å¯èƒ½æ²¡æœ‰è¢«æ”¹å˜ -&gt; å› æ­¤ï¼Œè®©æˆ‘ä»¬è¾“å‡ºä¸€ä¸‹çŠ¶æ€çœ‹çœ‹å§</p>
<p><img src="9.png" alt="9.png"></p>
<ol>
<li><p>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œstatusæœ‰å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶ä¸”ä»pending -&gt; fulfilledï¼›</p>
</li>
<li><p>åœ¨thenå‡½æ•°ä¸­ï¼Œæ²¡æœ‰è°ƒç”¨status === â€˜fulfilledâ€™çš„å›è°ƒå‡½æ•°</p>
<ol>
<li>åœ¨äº‹ä»¶å¾ªç¯æœºåˆ¶ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä¸è€ƒè™‘ç°æœ‰çš„å¾®ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ï¼Œå•çº¯ä»ä»£ç æ¥çœ‹ï¼Œpromise1.thenæ–¹æ³•çš„æ‰§è¡Œä¼šæ—©äºsetTimeoutï¼›ä¹Ÿå°±æ˜¯åœ¨resolveæ‰§è¡Œä¹‹å‰å³statusè¿˜æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œçš„thenæ–¹æ³•ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å®ç°ä»£ç çš„thenæ–¹æ³•ä¸­è¾“å‡ºä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰§è¡Œé¡ºåº</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">æ‰§è¡Œäº†thenæ–¹æ³•,æ­¤æ—¶çš„statusçŠ¶æ€ä¸º pending</span><br><span class="line"><span class="number">3</span></span><br><span class="line">pending</span><br><span class="line"><span class="number">4</span></span><br><span class="line">fulfilled</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ‰€ä»¥å°½ç®¡setTimeoutä¸­çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–åˆ°fulfilledï¼Œä½†æ˜¯thenæ–¹æ³•å·²ç»å…ˆä¸€æ­¥æ‰§è¡Œäº†ï¼Œæ‰€ä»¥æ— æ³•è¾“å‡ºâ€œå“ˆå“ˆâ€</li>
</ol>
</li>
</ol>
<h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><ol>
<li>æˆ‘ä»¬éœ€è¦åœ¨status === â€˜PENDINGâ€™æ—¶ï¼Œåšä¸€äº›åˆ¤æ–­<ol>
<li>æ­¤æ—¶ï¼Œæˆ‘ä»¬æ‰§è¡Œthenæ–¹æ³•çš„æ—¶å€™ï¼Œstatusä¸ºPENDINGçŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å›è°ƒå‡½æ•°é€šè¿‡æ•°ç»„å­˜å‚¨èµ·æ¥</li>
<li>å½“æˆ‘ä»¬åœ¨setTimeoutä¸­è°ƒç”¨resolveæ—¶ï¼Œå¯ä»¥éå†æ•°ç»„ï¼Œå¦‚æœæ•°ç»„ä¸­æœ‰å€¼ï¼Œæˆ‘ä»¬éå†è°ƒç”¨æ•°ç»„ä¸­å­˜å‚¨çš„å›è°ƒå‡½æ•°callback</li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  	...</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line">				...</span><br><span class="line">        <span class="built_in">this</span>.resolveCallBack = [];</span><br><span class="line">        <span class="built_in">this</span>.rejectCallBack = [];</span><br><span class="line">				...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">resolve</span>(<span class="params">result</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">            <span class="built_in">this</span>.status = MyPromise.FULFILLED;</span><br><span class="line">            <span class="built_in">this</span>.result = result;</span><br><span class="line">            <span class="built_in">this</span>.resolveCallBack.forEach(<span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">                callback(result);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">reject</span>(<span class="params">result</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">            <span class="built_in">this</span>.status = MyPromise.REJECTED;</span><br><span class="line">            <span class="built_in">this</span>.result = result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.rejectCallBack.forEach(<span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">            callback(result);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¾“å‡º</p>
<p><img src="10.png" alt="10.png"></p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ­£å¸¸è¾“å‡ºâ€œå“ˆå“ˆâ€äº†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„â€œå“ˆå“ˆâ€ä½ç½®æ˜¾ç„¶æ˜¯ä¸å¯¹çš„ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä»–åº”è¯¥åœ¨5åé¢æ‰è¾“å‡ºçš„ã€‚</p>
<p>å›é¡¾å®ç°ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨resoveå’Œrejectæ–¹æ³•ä¸­ä½¿ç”¨setTimeoutæ¥ä¿è¯è¾“å‡ºæœºåˆ¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  	...</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">func</span>)</span> &#123;</span><br><span class="line">				...</span><br><span class="line">        <span class="built_in">this</span>.resolveCallBack = [];</span><br><span class="line">        <span class="built_in">this</span>.rejectCallBack = [];</span><br><span class="line">				...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">resolve</span>(<span class="params">result</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">                <span class="built_in">this</span>.status = MyPromise.FULFILLED;</span><br><span class="line">                <span class="built_in">this</span>.result = result;</span><br><span class="line">                <span class="built_in">this</span>.resolveCallBack.forEach(<span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">                    callback(result);</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">reject</span>(<span class="params">result</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.status === MyPromise.PENDING) &#123;</span><br><span class="line">                <span class="built_in">this</span>.status = MyPromise.REJECTED;</span><br><span class="line">                <span class="built_in">this</span>.result = result;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">this</span>.rejectCallBack.forEach(<span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">                callback(result);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œè¾“å‡ºé¡ºåºå¦‚ä¸‹</p>
<p><img src="11.png" alt="11.png"></p>
<h1 id="7-é“¾å¼"><a href="#7-é“¾å¼" class="headerlink" title="7. é“¾å¼"></a>7. é“¾å¼</h1><h2 id="åŸç”Ÿ-7"><a href="#åŸç”Ÿ-7" class="headerlink" title="åŸç”Ÿ"></a>åŸç”Ÿ</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œ åœ¨åŸç”ŸPromiseä¸­ï¼ŒPromise.thenæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªthenï¼Œå¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">promise1.then(</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(result)&#125;,</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(result.message)&#125;</span><br><span class="line">).then(</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">&#x27;é“¾å¼è°ƒç”¨&#x27;</span>);&#125;,</span><br><span class="line">    <span class="function"><span class="params">result</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(result.message) &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¾“å‡º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">å“ˆå“ˆ</span><br><span class="line">é“¾å¼è°ƒç”¨</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°-8"><a href="#å®ç°-8" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="ç›®å‰æ•ˆæœ-4"><a href="#ç›®å‰æ•ˆæœ-4" class="headerlink" title="ç›®å‰æ•ˆæœ"></a>ç›®å‰æ•ˆæœ</h3><p><img src="12.png" alt="12.png"></p>
<p>æŠ¥é”™äº†ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„thenæ–¹æ³•å¹¶æ²¡æœ‰è¿”å›thenæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨thenæ–¹æ³•ä¸­returnä¸€ä¸ªMyPromiseï¼ŒMyPromiseæœ‰thenæ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°é“¾å¼è°ƒç”¨äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPromise</span> </span>&#123;</span><br><span class="line">  ....</span><br><span class="line">    <span class="function"><span class="title">then</span>(<span class="params">onFulFILLED, onREJECTED</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            onFulFILLED = <span class="keyword">typeof</span> onFulFILLED === <span class="string">&#x27;function&#x27;</span> ? onFulFILLED : <span class="function">() =&gt;</span> &#123; &#125;;</span><br><span class="line">            onREJECTED = <span class="keyword">typeof</span> onREJECTED === <span class="string">&#x27;function&#x27;</span> ? onREJECTED : <span class="function">() =&gt;</span> &#123; &#125;;</span><br><span class="line">					...</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨äº†ï¼Œä½†æ˜¯é“¾å¼è°ƒç”¨ä¸­çš„thenå¹¶ä¸èƒ½æ­£å¸¸è¾“å‡ºï¼Œè¿˜æœ‰å¾ˆå¤šç»†èŠ‚ï½ æ…¢æ…¢å®ç°</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»åˆå§‹ç»“æ„ -&gt; çŠ¶æ€ -&gt; ä¼ å‚ -&gt; thenå‡½æ•° -&gt; Promiseä¸­å¼‚å¸¸å¤„ç† -&gt; å¼‚æ­¥ -&gt; é“¾æ¥æ¥å®ç°äº†ç®€å•ç‰ˆçš„Promiseï¼Œè™½ç„¶è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰å®ç°ï¼Œä½†æ˜¯æ”¶è·å¾ˆå¤§ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>axiosä¸­çš„utilså·¥å…·æ–‡ä»¶.md</title>
    <url>/2022/03/09/axios%E4%B8%AD%E7%9A%84utils%E5%B7%A5%E5%85%B7%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<h1 id="Axios-utils-js"><a href="#Axios-utils-js" class="headerlink" title="Axios/utils.js"></a>Axios/utils.js</h1><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><ol>
<li>è¿™æ˜¯è·Ÿéš<a href="https://juejin.cn/user/1415826704971918">@è‹¥å·</a> æ‰“å¡æºç æ´»åŠ¨çš„ç¬¬ä¸€ä¸ªæ‰“å¡ã€‚</li>
<li>å‚è€ƒ<a href="https://juejin.cn/post/7042610679815241758">é˜…è¯»axiosæºç ï¼Œå‘ç°äº†è¿™äº›å®ç”¨çš„åŸºç¡€å·¥å…·å‡½æ•°</a> ï¼Œä¸å¾—ä¸è¯´ï¼Œç¯å¢ƒå‡†å¤‡å†™å¾—å¾ˆç»†è‡´ï¼Œæ‰€ä»¥è¿™è¾¹ç•™ä¸ªè®°å½•ã€‚</li>
<li>æœ¬æ¬¡æºç é˜…è¯»çš„ä¸»è¦å†…å®¹æ˜¯<a href="https://github.com/axios/axios/blob/master/lib/utils.js">utils.js</a>.</li>
</ol>
<span id="more"></span>
<h1 id="å·¥å…·å‡½æ•°"><a href="#å·¥å…·å‡½æ•°" class="headerlink" title="å·¥å…·å‡½æ•°"></a>å·¥å…·å‡½æ•°</h1><blockquote>
<p>æœ¬èŠ‚å†…å®¹å°†éå†utils.jsä¸­æ‰€æœ‰çš„å·¥å…·å‡½æ•°</p>
</blockquote>
<h2 id="isArray"><a href="#isArray" class="headerlink" title="isArray"></a>isArray</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is an Array</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is an Array, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isUndefined"><a href="#isUndefined" class="headerlink" title="isUndefined"></a>isUndefined</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is undefined åˆ¤æ–­å€¼æ˜¯å¦æ˜¯undefined</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if the value is undefined, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUndefined</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">&#x27;undefined&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isBuffer"><a href="#isBuffer" class="headerlink" title="isBuffer"></a>isBuffer</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a Buffer åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯Bufferç±»å‹</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a Buffer, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBuffer</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> val !== <span class="literal">null</span> &amp;&amp;</span><br><span class="line">    		 !isUndefined(val) &amp;&amp;</span><br><span class="line">    		 val.constructor !== <span class="literal">null</span> &amp;&amp;</span><br><span class="line">    		 !isUndefined(val.constructor) &amp;&amp;</span><br><span class="line">    		 <span class="keyword">typeof</span> val.constructor.isBuffer === <span class="string">&#x27;function&#x27;</span> &amp;&amp;</span><br><span class="line">    		 val.constructor.isBuffer(val); <span class="comment">// é€šè¿‡æ„é€ å‡½æ•°çš„isBufferæ–¹æ³•æ¥åˆ¤æ–­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»€ä¹ˆæ˜¯Buffer</p>
</blockquote>
<p><a href="https://www.runoob.com/nodejs/nodejs-buffer.html">å‚è€ƒ</a></p>
<p>Buffer ç¼“å†²åŒº</p>
<p>å­˜åœ¨åŸå› ï¼š</p>
<ol>
<li>JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚</li>
<li>ä½†åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.jsä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚</li>
</ol>
<h2 id="isArrayBuffer"><a href="#isArrayBuffer" class="headerlink" title="isArrayBuffer"></a>isArrayBuffer</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArrayBuffer</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(val) === <span class="string">&#x27;[object ArrayBuffer]&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»€ä¹ˆæ˜¯ArrayBuffer</p>
</blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">å‚è€ƒ</a></p>
<p>ArrayBuffer é€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒº</p>
<h2 id="isFormData"><a href="#isFormData" class="headerlink" title="isFormData"></a>isFormData</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a FormData</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is an FormData, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFormData</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(val) === <span class="string">&#x27;[object FormData]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isArrayBufferView"><a href="#isArrayBufferView" class="headerlink" title="isArrayBufferView"></a>isArrayBufferView</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a view on an ArrayBuffer</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a view on an ArrayBuffer, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArrayBufferView</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">typeof</span> <span class="built_in">ArrayBuffer</span> !== <span class="string">&#x27;undefined&#x27;</span>) &amp;&amp; (<span class="built_in">ArrayBuffer</span>.isView)) &#123;</span><br><span class="line">    result = <span class="built_in">ArrayBuffer</span>.isView(val);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = (val) &amp;&amp; (val.buffer) &amp;&amp; (isArrayBuffer(val.buffer));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æ­£å¸¸æƒ…å†µä¸‹, typeof ArrayBuffer === â€˜functionâ€™</li>
<li>Array.isView  å¦‚æœå‚æ•°æ˜¯ArrayBufferçš„è§†å›¾å®ä¾‹åˆ™è¿”å›true</li>
</ol>
<h2 id="isString"><a href="#isString" class="headerlink" title="isString"></a>isString</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a String</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a String, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isString</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isNumber"><a href="#isNumber" class="headerlink" title="isNumber"></a>isNumber</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a Number</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a Number, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNumber</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">&#x27;number&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isObject"><a href="#isObject" class="headerlink" title="isObject"></a>isObject</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> val !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">&#x27;object&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>typeof null === â€˜objectâ€™;</li>
</ol>
<h2 id="isPlainObject"><a href="#isPlainObject" class="headerlink" title="isPlainObject"></a>isPlainObject</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a plain Object åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªçº¯å¯¹è±¡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;boolean&#125;</span> </span>True if value is a plain Object, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (toString.call(val) !== <span class="string">&#x27;[object Object]&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> prototype = <span class="built_in">Object</span>.getPrototypeOf(val);</span><br><span class="line">  <span class="keyword">return</span> prototype === <span class="literal">null</span> || prototype === <span class="built_in">Object</span>.prototype;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Plain Object</p>
</blockquote>
<ol>
<li><p>æ¦‚å¿µï¼š çº¯ç²¹çš„å¯¹è±¡</p>
</li>
<li><p>æ€ä¹ˆåˆ›å»ºplain objectï¼Œé€šè¿‡â€™{}â€™æˆ–â€™new Objectâ€™ã€‚å³ï¼š</p>
<ul>
<li><p>let obj = {}</p>
</li>
<li><p>let obj = new Object()</p>
</li>
</ul>
</li>
<li><p>å¯¹isPlainObjectæ–¹æ³•çš„ç†è§£</p>
<ul>
<li>Object.getPrototypeOf(val) è·å–valçš„åŸå‹é“¾å¯¹è±¡</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj1Pro = <span class="built_in">Object</span>.getPrototypeOf(obj1);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj1Pro&quot;</span>, obj1Pro === <span class="built_in">Object</span>.prototype); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj1&quot;</span>, isPlainObject(obj1)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">const</span> obj2Pro = <span class="built_in">Object</span>.getPrototypeOf(obj2);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj2Pro&quot;</span>, obj2Pro === <span class="built_in">Object</span>.prototype); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj2&quot;</span>, isPlainObject(obj2)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj3 = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype);</span><br><span class="line"><span class="keyword">const</span> obj3Pro = <span class="built_in">Object</span>.getPrototypeOf(obj3);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj3Pro&quot;</span>, obj3Pro === <span class="built_in">Object</span>.prototype); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj3&quot;</span>, isPlainObject(obj3)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">let</span> obj4 = <span class="keyword">new</span> C();</span><br><span class="line"><span class="keyword">const</span> obj4Pro = <span class="built_in">Object</span>.getPrototypeOf(obj4);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj4Pro&quot;</span>, obj4Pro === <span class="built_in">Object</span>.prototype); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;obj4&quot;</span>, isPlainObject(obj4)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="isDate"><a href="#isDate" class="headerlink" title="isDate"></a>isDate</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a Date</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a Date, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDate</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(val) === <span class="string">&#x27;[object Date]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isFile"><a href="#isFile" class="headerlink" title="isFile"></a>isFile</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a File</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a File, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFile</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(val) === <span class="string">&#x27;[object File]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isBlob"><a href="#isBlob" class="headerlink" title="isBlob"></a>isBlob</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a Blob</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a Blob, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBlob</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(val) === <span class="string">&#x27;[object Blob]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isFunction"><a href="#isFunction" class="headerlink" title="isFunction"></a>isFunction</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFunction</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(val) === <span class="string">&#x27;[object Function]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isStream"><a href="#isStream" class="headerlink" title="isStream"></a>isStream</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a Stream</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a Stream, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStream</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> isObject(val) &amp;&amp; isFunction(val.pipe);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="isURLSearchParams"><a href="#isURLSearchParams" class="headerlink" title="isURLSearchParams"></a>isURLSearchParams</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if a value is a URLSearchParams object</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>val The value to test</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;boolean&#125;</span> </span>True if value is a URLSearchParams object, otherwise false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isURLSearchParams</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> toString.call(val) === <span class="string">&#x27;[object URLSearchParams]&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h2><blockquote>
<p>å»é™¤é¦–å°¾ç©ºæ ¼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Trim excess whitespace off the beginning and end of a string</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>str The String to trim</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;String&#125;</span> </span>The String freed of excess whitespace</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trim</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.trim ? str.trim() : str.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="isStandardBrowserEnv"><a href="#isStandardBrowserEnv" class="headerlink" title="isStandardBrowserEnv"></a>isStandardBrowserEnv</h2><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯æ ‡å‡†æµè§ˆå™¨ç¯å¢ƒ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Determine if we&#x27;re running in a standard browser environment æ˜¯å¦è¿è¡Œåœ¨æ ‡å‡†æµè§ˆå™¨ç¯å¢ƒ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This allows axios to run in a web worker, and react-native.</span></span><br><span class="line"><span class="comment"> * Both environments support XMLHttpRequest, but not fully standard globals.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * web workers:</span></span><br><span class="line"><span class="comment"> *  typeof window -&gt; undefined</span></span><br><span class="line"><span class="comment"> *  typeof document -&gt; undefined</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * react-native:</span></span><br><span class="line"><span class="comment"> *  navigator.product -&gt; &#x27;ReactNative&#x27;</span></span><br><span class="line"><span class="comment"> * nativescript</span></span><br><span class="line"><span class="comment"> *  navigator.product -&gt; &#x27;NativeScript&#x27; or &#x27;NS&#x27;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStandardBrowserEnv</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> navigator !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; </span><br><span class="line">       (navigator.product === <span class="string">&#x27;ReactNative&#x27;</span> ||                           </span><br><span class="line">        navigator.product === <span class="string">&#x27;NativeScript&#x27;</span> ||</span><br><span class="line">        navigator.product === <span class="string">&#x27;NS&#x27;</span>))&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> 	&#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp;</span><br><span class="line">    <span class="keyword">typeof</span> <span class="built_in">document</span> !== <span class="string">&#x27;undefined&#x27;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Iterate over an Array or an Object invoking a function for each item.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * // fn.call(null, obj[i], i, obj);</span></span><br><span class="line"><span class="comment"> * If `obj` is an Array callback will be called passing</span></span><br><span class="line"><span class="comment"> * the value, index, and complete array for each item.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * // fn.call(null, obj[key], key, obj);</span></span><br><span class="line"><span class="comment"> * If &#x27;obj&#x27; is an Object callback will be called passing</span></span><br><span class="line"><span class="comment"> * the value, key, and complete object for each property.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object|Array&#125;</span> </span>obj The object to iterate</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>fn The callback to invoke for each item</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">forEach</span>(<span class="params">obj, fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Don&#x27;t bother if no value provided</span></span><br><span class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span> || <span class="keyword">typeof</span> obj === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Force an array if not already something iterable</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// å¼ºåˆ¶è½¬æ¢ä¸ºå¯éå†ç±»å‹</span></span><br><span class="line">    <span class="comment">/*eslint no-param-reassign:0*/</span></span><br><span class="line">    obj = [obj];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isArray(obj)) &#123;</span><br><span class="line">    <span class="comment">// Iterate over array values</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = obj.length; i &lt; l; i++) &#123;</span><br><span class="line">      fn.call(<span class="literal">null</span>, obj[i], i, obj);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Iterate over object keys</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, key)) &#123;</span><br><span class="line">        fn.call(<span class="literal">null</span>, obj[key], key, obj);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>Object.prototype.hasOwnProperty.call(obj, key) åˆ¤æ–­objæœ¬èº«æ˜¯å¦æœ‰keyè¿™ä¸ªå±æ€§</li>
<li>forâ€¦in ä»¥ä»»æ„é¡ºåºéå†ä¸€ä¸ªå¯¹è±¡çš„é™¤<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>ä»¥å¤–çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties">å¯æšä¸¾</a>å±æ€§ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„å¯æšä¸¾å±æ€§ã€‚</li>
</ol>
<h2 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Accepts varargs expecting each argument to be an object, then</span></span><br><span class="line"><span class="comment"> * immutably merges the properties of each object and returns result.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * When multiple objects contain the same key the later object in</span></span><br><span class="line"><span class="comment"> * the arguments list will take precedence.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Example:</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ```js</span></span><br><span class="line"><span class="comment"> * var result = merge(&#123;foo: 123&#125;, &#123;foo: 456&#125;);</span></span><br><span class="line"><span class="comment"> * console.log(result.foo); // outputs 456</span></span><br><span class="line"><span class="comment"> * ```</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>obj1 Object to merge</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Object&#125;</span> </span>Result of all merge properties</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params"><span class="comment">/* obj1, obj2, obj3, ... */</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = &#123;&#125;;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">assignValue</span>(<span class="params">val, key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isPlainObject(result[key]) &amp;&amp; isPlainObject(val)) &#123;</span><br><span class="line">      result[key] = merge(result[key], val);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isPlainObject(val)) &#123;</span><br><span class="line">      result[key] = merge(&#123;&#125;, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isArray(val)) &#123;</span><br><span class="line">      result[key] = val.slice();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result[key] = val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++) &#123;</span><br><span class="line">    forEach(<span class="built_in">arguments</span>[i], assignValue);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> merge</p>
</blockquote>
<ol>
<li>æ˜¯ä¸€ä¸ªä¸å®šé•¿å‚æ•°å‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨argumentsç±»æ•°ç»„å»è·å–ä¼ å…¥çš„å‚æ•°</li>
<li>ä½œç”¨ï¼šåˆå¹¶å¯¹è±¡ï¼Œåé¢çš„å¯¹è±¡å¦‚æœkeyå’Œå‰é¢çš„keyæ˜¯ä¸€æ ·çš„ï¼Œä¼šè¿›è¡Œè¦†ç›–ã€‚</li>
</ol>
<p>ï¼ˆè›®å¥½ç©çš„ï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸‹ï¼‰</p>
<h2 id="extend"><a href="#extend" class="headerlink" title="extend"></a>extend</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bindå®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, thisArg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">wrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">arguments</span>.length);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">            args[i] = <span class="built_in">arguments</span>[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fn.apply(thisArg, args);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Extends object a by mutably adding to it the properties of object b.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>a The object to be extended</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>b The object to copy properties from</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg The object to bind function to</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;Object&#125;</span> </span>The resulting value of object a</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">a, b, thisArg</span>) </span>&#123;</span><br><span class="line">  forEach(b, <span class="function"><span class="keyword">function</span> <span class="title">assignValue</span>(<span class="params">val, key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (thisArg &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      a[key] = bind(val, thisArg);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      a[key] = val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>entend</p>
</blockquote>
<ol>
<li><p>ä¼ å…¥ä¸‰ä¸ªå‚æ•°a, b, thisArg; aæ˜¯ç»“æœå¯¹è±¡ï¼Œbæ˜¯è¢«å¤åˆ¶çš„å¯¹è±¡ï¼ŒthisArgæ˜¯thisæŒ‡å‘</p>
</li>
<li><p>ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123; <span class="attr">foo</span>: <span class="number">123</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> b = &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="number">456</span>,</span><br><span class="line">    <span class="attr">log</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;thisæŒ‡å‘&#x27;</span>, <span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = &#123;<span class="attr">foo</span>: <span class="number">789</span>&#125;</span><br><span class="line"><span class="keyword">var</span> result = extend(a, b, c);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// &#123; foo: 456, log: [Function: wrap] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// &#123; foo: 456, log: [Function: wrap] &#125;</span></span><br><span class="line">result.log(); <span class="comment">// thisæŒ‡å‘ &#123; foo: 789 &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="stripBom"><a href="#stripBom" class="headerlink" title="stripBom"></a>stripBom</h2><blockquote>
<p>åˆ é™¤UTF-8ä¸­çš„Bom</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>content with BOM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> </span>content value without BOM</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripBOM</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (content.charCodeAt(<span class="number">0</span>) === <span class="number">0xFEFF</span>) &#123;</span><br><span class="line">    content = content.slice(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Bom â€”â€”  Byte Order Mark</p>
</blockquote>
<ol>
<li><p>å®ƒæ˜¯ä¸€ä¸ªUnicodeå­—ç¬¦ï¼Œé€šå¸¸å‡ºç°åœ¨æ–‡æœ¬çš„å¼€å¤´ï¼Œç”¨æ¥æ ‡è¯†å­—èŠ‚åºã€‚</p>
</li>
<li><p>UTF-8ä¸»è¦çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å…¼å®¹ASCIIï¼Œä½†å¦‚æœä½¿ç”¨BOMçš„è¯ï¼Œè¿™ä¸ªå¥½å¤„å°±è¡ç„¶æ— å­˜äº†ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æºç é˜…è¯»</category>
      </categories>
  </entry>
  <entry>
    <title>gitè§„èŒƒ</title>
    <url>/2022/04/22/git%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<h1 id="ä¸€ã€æäº¤çš„ä»£ç è§„èŒƒ"><a href="#ä¸€ã€æäº¤çš„ä»£ç è§„èŒƒ" class="headerlink" title="ä¸€ã€æäº¤çš„ä»£ç è§„èŒƒ"></a>ä¸€ã€æäº¤çš„ä»£ç è§„èŒƒ</h1><p><code>husky</code> + <code>lint-staged</code> + <code>pre-commit</code></p>
<p><strong>husky:</strong> æ“ä½œgité’©å­çš„å·¥å…·</p>
<p><strong>lint-staged:</strong> æœ¬åœ°æš‚å­˜ä»£ç æ£€æŸ¥å·¥å…·</p>
<p><strong>pre-commit:</strong> é€šè¿‡é’©å­å‡½æ•°ï¼Œåˆ¤æ–­æäº¤çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒ</p>
<span id="more"></span>


<ol>
<li>å®‰è£…ä»£ç æ ¡éªŒä¾èµ–</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm i lint-staged husky -D</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨package.jsonä¸­æ·»åŠ è„šæœ¬</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">		<span class="string">&quot;prepare&quot;</span>: <span class="string">&quot;husky install&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>æ‰§è¡Œ <code>npm run prepare</code> , åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª<code>husky</code> æ–‡ä»¶å¤¹</p>
<ol>
<li><img src="image-20220421194607581.png" alt="image-20220421194607581"></li>
</ol>
</li>
<li><p>æ‰§è¡Œ <code>npx husky add .husky/pre-commit &quot;npx lint-staged&quot;</code> ï¼Œåœ¨.huskyæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºpre-commit shellæ–‡ä»¶ æ‰§è¡Œ npx lint-staged</p>
<ol>
<li><img src="image-20220421194649682.png" alt="image-20220421194649682"></li>
</ol>
</li>
<li><p>æ ¹ç›®å½•åˆ›å»º <strong>.lintstagedrc.json</strong> æ–‡ä»¶æ§åˆ¶æ£€æŸ¥å’Œæ“ä½œæ–¹å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;*.&#123;js,jsx,ts,tsx&#125;&quot;</span>: [<span class="string">&quot;prettier --write .&quot;</span>, <span class="string">&quot;eslint  --fix&quot;</span>],</span><br><span class="line">    <span class="string">&quot;*.md&quot;</span>: [<span class="string">&quot;prettier --write&quot;</span>],</span><br><span class="line">    <span class="string">&quot;*.&#123;less,css&#125;&quot;</span>: [<span class="string">&quot;stylelint --fix&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="äºŒã€æäº¤ä¿¡æ¯è§„èŒƒ"><a href="#äºŒã€æäº¤ä¿¡æ¯è§„èŒƒ" class="headerlink" title="äºŒã€æäº¤ä¿¡æ¯è§„èŒƒ"></a>äºŒã€æäº¤ä¿¡æ¯è§„èŒƒ</h1><ol>
<li><p>å®‰è£…æäº¤ä¿¡æ¯ä¾èµ– <a href="https://www.npmjs.com/package/@commitlint/config-conventional">@commitlint/config-conventional</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm i commitlint @commitlint/config-conventional -D</span><br></pre></td></tr></table></figure></li>
<li><p>æ·»åŠ å¯¹åº”çš„shellè°ƒç”¨æ–¹å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npx husky add .husky/commit-msg <span class="string">&#x27;npx --no-install commitlint --edit &quot;$1&quot;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20220422165135542.png" alt="image-20220422165135542"></p>
</li>
<li><p>æ·»åŠ commitlinté…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">echo <span class="string">&quot;module.exports = &#123;extends: [&#x27;@commitlint/config-conventional&#x27;]&#125;;&quot;</span> &gt; commitlint.config.js</span><br></pre></td></tr></table></figure>

<p>.commitlint.config.jsä¸­é…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123; <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>] &#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>package.jsonä¸­æ·»åŠ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;commitlint&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;@commitlint/config-conventional&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li><p>è‡³æ­¤ï¼Œå°±å¯ä»¥è§„èŒƒcommitæäº¤ä¿¡æ¯äº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹commit-msgæ‰€ä½¿ç”¨åˆ°çš„ä¾èµ–è§„èŒƒå…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</p>
</li>
</ol>
<h2 id="2-1-commitlint-config-conventional"><a href="#2-1-commitlint-config-conventional" class="headerlink" title="2.1 @commitlint/config-conventional"></a>2.1 @commitlint/config-conventional</h2><ol>
<li><p><strong>@commitlint/config-conventional</strong> è¿™æ˜¯ä¸€ä¸ªè§„èŒƒé…ç½®,æ ‡è¯†é‡‡ç”¨ä»€ä¹ˆè§„èŒƒæ¥æ‰§è¡Œæ¶ˆæ¯æ ¡éªŒ, è¿™ä¸ªé»˜è®¤æ˜¯<em><strong>Angular</strong></em>çš„æäº¤è§„èŒƒ</p>
</li>
<li><p><a href="https://www.conventionalcommits.org/en/v1.0.0/">å…·ä½“è§„èŒƒåœ°å€</a></p>
</li>
<li><p>Commit messageçš„æ ¼å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>commit messgaeåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†</p>
<ol>
<li>æ ‡é¢˜è¡Œ(subject)ï¼š å¿…å¡«, æè¿°ä¸»è¦ä¿®æ”¹ç±»å‹å’Œå†…å®¹ã€‚</li>
<li>ä¸»é¢˜å†…å®¹(body)ï¼šæè¿°ä¸ºä»€ä¹ˆä¿®æ”¹, åšäº†ä»€ä¹ˆæ ·çš„ä¿®æ”¹, ä»¥åŠå¼€å‘çš„æ€è·¯ç­‰ç­‰ã€‚</li>
<li>é¡µè„šæ³¨é‡Š(footer)ï¼šå¯ä»¥å†™æ³¨é‡Šï¼Œæ”¾ BUG å·çš„é“¾æ¥ã€‚</li>
</ol>
</li>
<li><p>å„é…ç½®</p>
<ol>
<li>typeç±»å‹<ul>
<li>feat: æ–°åŠŸèƒ½ã€æ–°ç‰¹æ€§</li>
<li>fix: ä¿®æ”¹ bug</li>
<li>perf: æ›´æ”¹ä»£ç ï¼Œä»¥æé«˜æ€§èƒ½ï¼ˆåœ¨ä¸å½±å“ä»£ç å†…éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œå¯¹ç¨‹åºæ€§èƒ½è¿›è¡Œä¼˜åŒ–ï¼‰</li>
<li>refactor: ä»£ç é‡æ„ï¼ˆé‡æ„ï¼Œåœ¨ä¸å½±å“ä»£ç å†…éƒ¨è¡Œä¸ºã€åŠŸèƒ½ä¸‹çš„ä»£ç ä¿®æ”¹ï¼‰</li>
<li>docs: æ–‡æ¡£ä¿®æ”¹</li>
<li>style: ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹ï¼ˆä¾‹å¦‚åˆ†å·ä¿®æ”¹ï¼‰</li>
<li>test: æµ‹è¯•ç”¨ä¾‹æ–°å¢ã€ä¿®æ”¹</li>
<li>build: å½±å“é¡¹ç›®æ„å»ºæˆ–ä¾èµ–é¡¹ä¿®æ”¹</li>
<li>revert: æ¢å¤ä¸Šä¸€æ¬¡æäº¤</li>
<li>ci: æŒç»­é›†æˆç›¸å…³æ–‡ä»¶ä¿®æ”¹</li>
<li>chore: å…¶ä»–ä¿®æ”¹ï¼ˆä¸åœ¨ä¸Šè¿°ç±»å‹ä¸­çš„ä¿®æ”¹ï¼‰</li>
<li>release: å‘å¸ƒæ–°ç‰ˆæœ¬</li>
</ul>
</li>
<li>scope å½±å“çš„åŠŸèƒ½æˆ–æ–‡ä»¶èŒƒå›´, æ¯”å¦‚: route, component, utils, buildâ€¦</li>
<li>commit message å½±å“çš„åŠŸèƒ½æˆ–æ–‡ä»¶èŒƒå›´, æ¯”å¦‚: route, component, utils, buildâ€¦</li>
<li>body å…·ä½“ä¿®æ”¹å†…å®¹, å¯ä»¥åˆ†ä¸ºå¤šè¡Œ.</li>
<li>Footer ä¸€äº›å¤‡æ³¨, é€šå¸¸æ˜¯ BREAKING CHANGE æˆ–ä¿®å¤çš„ bug çš„é“¾æ¥.</li>
</ol>
</li>
<li><p>ä¾‹å­ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fix: prevent racing <span class="keyword">of</span> requests</span><br><span class="line"></span><br><span class="line">Introduce a request id and a reference to latest request. Dismiss</span><br><span class="line">incoming responses other than <span class="keyword">from</span> latest request.</span><br><span class="line"></span><br><span class="line">Remove timeouts which were used to mitigate the racing issue but are</span><br><span class="line">obsolete now.</span><br><span class="line"></span><br><span class="line">Reviewed-by: Z</span><br><span class="line"><span class="attr">Refs</span>: #<span class="number">123</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://juejin.cn/post/7038143752036155428#heading-5">Eslint + Prettier + Husky + Commitlint+ Lint-staged è§„èŒƒå‰ç«¯å·¥ç¨‹ä»£ç è§„èŒƒ</a></p>
]]></content>
      <categories>
        <category>å‰ç«¯å·¥ç¨‹</category>
      </categories>
      <tags>
        <tag>å®è·µ</tag>
      </tags>
  </entry>
  <entry>
    <title>leetcode-19.åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªç»“ç‚¹</title>
    <url>/2022/02/12/leetcode-19-%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E7%BB%93%E7%82%B9/</url>
    <content><![CDATA[<p>[æ¥æº] ğŸ”—<a href="https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/">19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</a></p>
<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ <code>n</code> ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p>
<span id="more"></span>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<p><img src="image.png" alt="image"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], n = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [<span class="number">1</span>], n = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [<span class="number">1</span>,<span class="number">2</span>], n = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<h1 id="æ€è·¯ä¸€"><a href="#æ€è·¯ä¸€" class="headerlink" title="æ€è·¯ä¸€"></a>æ€è·¯ä¸€</h1><ol>
<li>æˆ‘ä»¬å¯ä»¥å…ˆæŠŠé“¾è¡¨çš„æ€»é•¿åº¦lenæ±‚å‡ºæ¥</li>
<li>len - N å°±æ˜¯æˆ‘ä»¬æ­£åºéå†éœ€è¦åˆ é™¤çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹</li>
<li>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å®šä½åˆ°len - N - 1çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œä¸€ä¸ªåˆ é™¤çš„åŠ¨ä½œ</li>
</ol>
<h1 id="ä»£ç ä¸€"><a href="#ä»£ç ä¸€" class="headerlink" title="ä»£ç ä¸€"></a>ä»£ç ä¸€</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> * <span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line"> *     val: number</span><br><span class="line"> *     next: ListNode | <span class="literal">null</span></span><br><span class="line"> *     <span class="function"><span class="title">constructor</span>(<span class="params">val?: number, next?: ListNode | <span class="literal">null</span></span>)</span> &#123;</span><br><span class="line"> *         <span class="built_in">this</span>.val = (val===<span class="literal">undefined</span> ? <span class="number">0</span> : val)</span><br><span class="line"> *         <span class="built_in">this</span>.next = (next===<span class="literal">undefined</span> ? <span class="literal">null</span> : next)</span><br><span class="line"> *     &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeNthFromEnd</span>(<span class="params">head: ListNode | <span class="literal">null</span>, n: number</span>): <span class="title">ListNode</span> | <span class="title">null</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> pNode = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    pNode.next = head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span></span><br><span class="line">        len = <span class="number">0</span>, <span class="comment">// ç»Ÿè®¡é“¾è¡¨é•¿åº¦</span></span><br><span class="line">        temp = head;</span><br><span class="line">    <span class="keyword">while</span> (temp) &#123;</span><br><span class="line">        temp = temp.next;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    temp = pNode;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - n; i++) &#123;</span><br><span class="line">        temp = temp.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    temp.next = temp.next.next;</span><br><span class="line">    <span class="keyword">return</span> pNode.next;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="æ€è·¯äºŒ"><a href="#æ€è·¯äºŒ" class="headerlink" title="æ€è·¯äºŒ"></a>æ€è·¯äºŒ</h1><ol>
<li>å®šä¹‰åŒæŒ‡é’ˆpï¼Œq</li>
<li>è®©qå‰ç§»Nä¸ªèŠ‚ç‚¹ï¼Œpæ­¤æ—¶ä»å¤„äºåŸä½ï¼Œé‚£ä¹ˆqå’Œpçš„è·ç¦»å°±æ˜¯N</li>
<li>æ­¤æ—¶åŒæ—¶ç§»åŠ¨p,qï¼Œé‚£ä¹ˆåˆ°qæŒ‡å‘nullçš„æ—¶å€™ï¼Œpåˆšå¥½å°±æŒ‡å‘è¦è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</li>
</ol>
<h1 id="ä»£ç äºŒ"><a href="#ä»£ç äºŒ" class="headerlink" title="ä»£ç äºŒ"></a>ä»£ç äºŒ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeNthFromEnd</span>(<span class="params">head: ListNode | <span class="literal">null</span>, n: number</span>): <span class="title">ListNode</span> | <span class="title">null</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> dummyHead = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    dummyHead.next = head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> p = dummyHead, q = dummyHead;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        q = q.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (q) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">        q = q.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p.next = p.next.next;</span><br><span class="line">    <span class="keyword">return</span> dummyHead.next;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>leetcode-283.ç§»åŠ¨é›¶</title>
    <url>/2022/02/09/leetcode-283-%E7%A7%BB%E5%8A%A8%E9%9B%B6/</url>
    <content><![CDATA[<p>[æ¥æº] ğŸ”—<a href="https://leetcode-cn.com/problems/move-zeroes/">283. ç§»åŠ¨é›¶</a></p>
<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>nums</code>ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ <code>0</code> ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚</p>
<p><strong>è¯·æ³¨æ„</strong>Â ï¼Œå¿…é¡»åœ¨ä¸å¤åˆ¶æ•°ç»„çš„æƒ…å†µä¸‹åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: nums = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">12</span>]</span><br><span class="line">è¾“å‡º: [<span class="number">1</span>,<span class="number">3</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><ol>
<li>è¿™é‡Œç”±äºåªéœ€è¦å°†0ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæ‰€ä»¥æˆ‘ä»¬è€ƒè™‘åœ¨éå†æ•°ç»„çš„æ—¶å€™ç›´æ¥è·³è¿‡0ï¼Œç­‰åç»­å†å»è¡¥é½ã€‚</li>
<li>é¢˜ç›®è¦æ±‚åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œï¼Œæ„å‘³ç€æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡æ¥è®°å½•ä»å“ªé‡Œå¼€å§‹è¡¥é½0ã€‚</li>
<li>ä½¿ç”¨åŒæŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆä¸æ–­å‘å³ç§»åŠ¨ï¼Œéå†æ•°ç»„å…ƒç´ ï¼Œæ…¢æŒ‡é’ˆç”¨äºè®°å½•å·²ç»å¤„ç†å¥½çš„åºåˆ—çš„å°¾éƒ¨ã€‚</li>
</ol>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moveZeroes</span>(<span class="params">nums: number[]</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> slow = <span class="number">0</span>, fast = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (fast &lt; nums.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[fast] !== <span class="number">0</span>) &#123;</span><br><span class="line">            nums[slow] = nums[fast];</span><br><span class="line">            slow++;</span><br><span class="line">        &#125;</span><br><span class="line">        fast++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(slow &lt; nums.length) &#123;</span><br><span class="line">        nums[slow++] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>leetcode-55.è·³è·ƒæ¸¸æˆ</title>
    <url>/2022/02/12/leetcode-55-%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8F/</url>
    <content><![CDATA[<p>[æ¥æº] ğŸ”—<a href="https://leetcode-cn.com/problems/jump-game/">55. è·³è·ƒæ¸¸æˆ</a></p>
<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ nums ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ ç¬¬ä¸€ä¸ªä¸‹æ ‡ ã€‚</p>
<p>æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚</p>
<p>åˆ¤æ–­ä½ æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šå¯ä»¥å…ˆè·³ <span class="number">1</span> æ­¥ï¼Œä»ä¸‹æ ‡ <span class="number">0</span> åˆ°è¾¾ä¸‹æ ‡ <span class="number">1</span>, ç„¶åå†ä»ä¸‹æ ‡ <span class="number">1</span> è·³ <span class="number">3</span> æ­¥åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹Â 2ï¼š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼šæ— è®ºæ€æ ·ï¼Œæ€»ä¼šåˆ°è¾¾ä¸‹æ ‡ä¸º <span class="number">3</span> çš„ä½ç½®ã€‚ä½†è¯¥ä¸‹æ ‡çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯ <span class="number">0</span> ï¼Œ æ‰€ä»¥æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><ol>
<li><p>é¦–å…ˆè¿™ä¸ªæ€è·¯å’Œæ•°ç»„å…ƒç´ çš„ç´¢å¼•å€¼å…³ç³»éå¸¸å¤§ã€‚</p>
</li>
<li><p>å¯¹äºæ•°ç»„ [2, 3, 1, 1, 4] æˆ‘ä»¬å°½å¯èƒ½çš„å–æœ€å¤§çš„è·³è·ƒé•¿åº¦ï¼Œé‚£ä¹ˆæœ€å¤§è·³è·ƒé•¿åº¦èƒ½è·³åˆ°çš„ç´¢å¼•ä½ç½®ä¸º <a href="%E4%B8%8D%E5%8C%85%E5%90%AB%E6%95%B0%E7%BB%84%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0">2, 4, 3, 4</a></p>
<p> æˆ‘ä»¬å¯ä»¥å¾—å‡º k = Math.max(k, nums[i] + i)ï¼Œ kä¸ºèƒ½å¤Ÿè·³åˆ°çš„æœ€è¿œä½ç½®ã€‚ </p>
<p> å¦‚æœæ­¤æ—¶k == nums.length - 1 é‚£ä¹ˆå°±èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªæ ‡</p>
</li>
<li><p>æ­¤æ—¶è€ƒè™‘åˆ°ä»¥ä¸‹æƒ…å†µï¼Œ[1, 0, 2, 1, 4]ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæœ€å¤§è·³è·ƒé•¿åº¦èƒ½è·³åˆ°çš„ç´¢å¼•ä½ç½®ä¸º[1, 1, 4, 4]ã€‚ä½†æ˜¯æ­¤æ—¶i = 1æ—¶ï¼Œä¸èƒ½è¿›è¡Œè·³è·ƒï¼Œä¹Ÿå°±æ˜¯æ— æ³•è·³åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°½ç®¡åé¢çš„å…ƒç´ è·³è·ƒé•¿åº¦èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ï¼Œæ­¤æ—¶ç»“æœä¹Ÿä¸ºfalseã€‚</p>
<p> æ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡i å’Œ kå€¼è¿›è¡Œå¯¹æ¯”ï¼Œå½“ä¸”ä»…å½“i â‰¤ kæ—¶ï¼Œè¯¥èŠ‚ç‚¹èƒ½å¤Ÿè¿›è¡Œä¸‹ä¸€ä¸ªè·³è·ƒ</p>
</li>
</ol>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">canJump</span>(<span class="params">nums: number[]</span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> maxLen = <span class="number">0</span>, len = nums.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; maxLen) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        maxLen = <span class="built_in">Math</span>.max(maxLen, nums[i] + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>leetcode-6006.æ‹¿å‡ºæœ€å°‘æ•°ç›®çš„é­”æ³•è±†</title>
    <url>/2022/02/13/leetcode-6006-%E6%8B%BF%E5%87%BA%E6%9C%80%E5%B0%91%E6%95%B0%E7%9B%AE%E7%9A%84%E9%AD%94%E6%B3%95%E8%B1%86/</url>
    <content><![CDATA[<p>[æ¥æº] ğŸ”—6006.æ‹¿å‡ºæœ€å°‘æ•°ç›®çš„é­”æ³•è±†</p>
<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>ç»™ä½ ä¸€ä¸ª æ­£Â æ•´æ•°æ•°ç»„Â beansÂ ï¼Œå…¶ä¸­æ¯ä¸ªæ•´æ•°è¡¨ç¤ºä¸€ä¸ªè¢‹å­é‡Œè£…çš„é­”æ³•è±†çš„æ•°ç›®ã€‚</p>
<p>è¯·ä½ ä»æ¯ä¸ªè¢‹å­ä¸­Â æ‹¿å‡ºÂ ä¸€äº›è±†å­ï¼ˆä¹Ÿå¯ä»¥Â ä¸æ‹¿å‡ºï¼‰ï¼Œä½¿å¾—å‰©ä¸‹çš„ éç©º è¢‹å­ä¸­ï¼ˆå³ è‡³å°‘Â è¿˜æœ‰ ä¸€é¢—Â é­”æ³•è±†çš„è¢‹å­ï¼‰é­”æ³•è±†çš„æ•°ç›®Â ç›¸ç­‰Â ã€‚ä¸€æ—¦é­”æ³•è±†ä»è¢‹å­ä¸­å–å‡ºï¼Œä½ ä¸èƒ½å°†å®ƒæ”¾åˆ°ä»»ä½•å…¶ä»–çš„è¢‹å­ä¸­ã€‚</p>
<p>è¯·ä½ è¿”å›ä½ éœ€è¦æ‹¿å‡ºé­”æ³•è±†çš„ æœ€å°‘æ•°ç›®ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šbeans = [<span class="number">4</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">- æˆ‘ä»¬ä»æœ‰ <span class="number">1</span> ä¸ªé­”æ³•è±†çš„è¢‹å­ä¸­æ‹¿å‡º <span class="number">1</span> é¢—é­”æ³•è±†ã€‚</span><br><span class="line">  å‰©ä¸‹è¢‹å­ä¸­é­”æ³•è±†çš„æ•°ç›®ä¸ºï¼š[<span class="number">4</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">5</span>]</span><br><span class="line">- ç„¶åæˆ‘ä»¬ä»æœ‰ <span class="number">6</span> ä¸ªé­”æ³•è±†çš„è¢‹å­ä¸­æ‹¿å‡º <span class="number">2</span> ä¸ªé­”æ³•è±†ã€‚</span><br><span class="line">  å‰©ä¸‹è¢‹å­ä¸­é­”æ³•è±†çš„æ•°ç›®ä¸ºï¼š[<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">- ç„¶åæˆ‘ä»¬ä»æœ‰ <span class="number">5</span> ä¸ªé­”æ³•è±†çš„è¢‹å­ä¸­æ‹¿å‡º <span class="number">1</span> ä¸ªé­”æ³•è±†ã€‚</span><br><span class="line">  å‰©ä¸‹è¢‹å­ä¸­é­”æ³•è±†çš„æ•°ç›®ä¸ºï¼š[<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">4</span>]</span><br><span class="line">æ€»å…±æ‹¿å‡ºäº† <span class="number">1</span> + <span class="number">2</span> + <span class="number">1</span> = <span class="number">4</span> ä¸ªé­”æ³•è±†ï¼Œå‰©ä¸‹éç©ºè¢‹å­ä¸­é­”æ³•è±†çš„æ•°ç›®ç›¸ç­‰ã€‚</span><br><span class="line">æ²¡æœ‰æ¯”å–å‡º <span class="number">4</span> ä¸ªé­”æ³•è±†æ›´å°‘çš„æ–¹æ¡ˆã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><ol>
<li><p> æ‹¿å‡ºé­”æ³•è±† + å‰©ä½™é­”æ³•è±† = åˆå§‹é­”æ³•è±†</p>
</li>
<li><p>è€ƒè™‘æ‹¿å‡ºæœ€å°‘æ•°ç›®çš„é­”æ³•è±†ï¼Œå¯ä»¥è½¬åŒ–ä¸ºå‰©ä½™æœ€å¤šçš„é­”æ³•è±†ã€‚</p>
</li>
<li><p>beansæ•°ç»„çš„é•¿åº¦ä¸ºnï¼Œå¯¹äºæ¯ä¸ªiè¢‹å­ï¼Œå¯ä»¥å‰©ä½™çš„æœ€å¤šé­”æ³•è±†ä¸º</p>
<p> (n - i) * beans[i]</p>
</li>
</ol>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minimumRemoval</span>(<span class="params">beans: number[]</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> </span><br><span class="line">        len = beans.length,</span><br><span class="line">        sum = <span class="number">0</span>,</span><br><span class="line">        maxSum = <span class="number">0</span>; <span class="comment">// é’ˆå¯¹æ¯ä¸ªè¢‹å­å¯ä»¥æ‹¿å‡ºçš„é­”æ³•è±†</span></span><br><span class="line">    beans.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; beans.length; i++) &#123;</span><br><span class="line">        sum += beans[i];</span><br><span class="line">        maxSum = <span class="built_in">Math</span>.max(maxSum, beans[i] * (len - i) )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum - maxSum</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>webpackå‡çº§v4-v5è¸©å‘è®°</title>
    <url>/2022/01/22/webpack%E5%8D%87%E7%BA%A7v4-v5%E8%B8%A9%E5%9D%91%E8%AE%B0/</url>
    <content><![CDATA[<p>å…³äºä¸€äº›æˆ‘å‡çº§webpackç‰ˆæœ¬çš„è¸©å‘è®°å½•ï½ï½ï½ï½ï½</p>
<span id="more"></span>
<h1 id="æŠ¥é”™1-copy-webpack-plugin"><a href="#æŠ¥é”™1-copy-webpack-plugin" class="headerlink" title="æŠ¥é”™1 copy-webpack-plugin"></a>æŠ¥é”™1 copy-webpack-plugin</h1><p><img src="1.png" alt="1.png"></p>
<p>ä¹‹å‰å†™æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> CopyWebpackPlugin([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">from</span>: _src_path + <span class="string">&#x27;/assets&#x27;</span>,</span><br><span class="line">    <span class="attr">to</span>: _build_pro_path + <span class="string">&#x27;/assets&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">]),</span><br></pre></td></tr></table></figure>

<p>å‡çº§åå†™æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> CopyWebpackPlugin(&#123;</span><br><span class="line">  <span class="attr">patterns</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">from</span>: _src_path + <span class="string">&#x27;/assets&#x27;</span>,</span><br><span class="line">      <span class="attr">to</span>: _build_pro_path + <span class="string">&#x27;/assets&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">from</span>: _src_path + <span class="string">&#x27;/iuap-cmdm-fun&#x27;</span>,</span><br><span class="line">      <span class="attr">to</span>: _build_pro_path + <span class="string">&#x27;/iuap-cmdm-fun&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<h1 id="æŠ¥é”™2-hard-source-webpack-plugin"><a href="#æŠ¥é”™2-hard-source-webpack-plugin" class="headerlink" title="æŠ¥é”™2 hard-source-webpack-plugin"></a>æŠ¥é”™2 hard-source-webpack-plugin</h1><p><img src="2.png" alt="image-20220118204432823"></p>
<p>å¯ä»¥çœ‹åˆ°æ˜¯hard-source-webpack-pluginçš„é—®é¢˜ï¼Œwebpack5å†…ç½®äº†ç¼“å­˜ç­–ç•¥ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦ä½¿ç”¨è¯¥æ’ä»¶äº†ã€‚</p>
<h1 id="æŠ¥é”™3-html-webpack-include-assets-plugin"><a href="#æŠ¥é”™3-html-webpack-include-assets-plugin" class="headerlink" title="æŠ¥é”™3 html-webpack-include-assets-plugin"></a>æŠ¥é”™3 html-webpack-include-assets-plugin</h1><p><img src="3.png" alt="image-20220120140015085"></p>
<p>æ˜¯å› ä¸ºhtml-webpack-include-assets-pluginçš„npmåŒ…æ”¹åä¸º<strong>html-webpack-tags-plugin</strong>äº†ï¼Œé‡æ–°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm i -D html-webpack-tags-plugin</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹åŒ…å¼•å…¥æ–¹å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackIncludeAssetsPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-tags-plugin&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="æŠ¥é”™4-less-loader"><a href="#æŠ¥é”™4-less-loader" class="headerlink" title="æŠ¥é”™4 less-loader"></a>æŠ¥é”™4 less-loader</h1><p><img src="4.png" alt="image-20220120190613588"></p>
<p>æ˜¯less-loaderæ’ä»¶æŠ¥çš„é”™, å‡çº§åçš„ç‰ˆæœ¬å·²ç»ä¸æ”¯æŒæ—§ç‰ˆæœ¬çš„å†™æ³•ã€‚</p>
<p>æ—§ç‰ˆæœ¬å†™æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;less-loader&quot;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">javascriptEnabled</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–°ç‰ˆæœ¬å†™æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">loader</span>: <span class="string">&quot;less-loader&quot;</span>,</span><br><span class="line">  <span class="attr">options</span>: &#123;</span><br><span class="line">    <span class="attr">lessOptions</span>: &#123;</span><br><span class="line">      <span class="attr">javascriptEnabled</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æŠ¥é”™5-webpack5ä¸è‡ªåŠ¨å¼•å…¥Polyfills"><a href="#æŠ¥é”™5-webpack5ä¸è‡ªåŠ¨å¼•å…¥Polyfills" class="headerlink" title="æŠ¥é”™5 webpack5ä¸è‡ªåŠ¨å¼•å…¥Polyfills"></a>æŠ¥é”™5 webpack5ä¸è‡ªåŠ¨å¼•å…¥Polyfills</h1><p><img src="6.png" alt="image-20220120192356906"></p>
<p>æŠ¥é”™åŸå› ï¼š</p>
<p>v4ä»¥å‰é™„å¸¦äº†è®¸å¤š<a href="https://so.csdn.net/so/search?q=node&spm=1001.2101.3001.7020">node</a>.jsæ ¸å¿ƒæ¨¡å—çš„<code>polyfill</code>ï¼Œåœ¨æ„å»ºæ—¶ç»™ bundleé™„åŠ äº†åºå¤§çš„polyfillsï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œpolyfillså¹¶ä¸æ˜¯å¿…é¡»ã€‚</p>
<p>æ‰€ä»¥ç°åœ¨v5å°†è¦åœæ­¢è¿™ä¸€åˆ‡ï¼Œåœ¨æ¨¡å—çš„åº”ç”¨ä¸­ä¸å†è‡ªåŠ¨å¼•å…¥<code>Polyfills</code>ï¼Œæ˜æ˜¾çš„å‡å°äº†æ‰“åŒ…ä½“ç§¯ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨è¿™ä¸ªpolyfillæˆ‘ä»¬å°±åœ¨resolve.fallbackä¸­å¼•å…¥ï¼Œå¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">      <span class="attr">fallback</span>: &#123;</span><br><span class="line">        <span class="attr">util</span>: <span class="built_in">require</span>.resolve(<span class="string">&#x27;util/&#x27;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç¡®è®¤è¿™ä¸ªpolyfillæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ï¼Œå¯ä»¥ä¸å¼•å…¥ï¼Œå¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  <span class="attr">fallback</span>: &#123;</span><br><span class="line">    <span class="attr">util</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">![image-20220122110507900](10.png)</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">    fallback: &#123;</span><br><span class="line">      util: false,</span><br><span class="line">      crypto: false,</span><br><span class="line">      path: false</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>



<h1 id="æŠ¥é”™6-èµ„æºæ¨¡å—"><a href="#æŠ¥é”™6-èµ„æºæ¨¡å—" class="headerlink" title="æŠ¥é”™6 èµ„æºæ¨¡å—"></a>æŠ¥é”™6 èµ„æºæ¨¡å—</h1><p><img src="7.png" alt="image-20220120195255483"></p>
<p>æœªå‡çº§ç‰ˆæœ¬æ—¶å†™æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff|woff2|svg|svgz)(\?.+)?$/</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;[name].[ext]&#x27;</span>,</span><br><span class="line">      <span class="attr">outputPath</span>: <span class="string">&#x27;fonts&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡æŸ¥çœ‹webpack5å®˜ç½‘åï¼Œå‘ç°ä»¥ä¸‹ä¸€æ®µè¯</p>
<blockquote>
<p>å½“åœ¨ webpack 5 ä¸­ä½¿ç”¨æ—§çš„ assets loaderï¼ˆå¦‚ <code>file-loader</code>/<code>url-loader</code>/<code>raw-loader</code> ç­‰ï¼‰å’Œ asset æ¨¡å—æ—¶ï¼Œä½ å¯èƒ½æƒ³åœæ­¢å½“å‰ asset æ¨¡å—çš„å¤„ç†ï¼Œå¹¶å†æ¬¡å¯åŠ¨å¤„ç†ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ asset é‡å¤ï¼Œä½ å¯ä»¥é€šè¿‡å°† asset æ¨¡å—çš„ç±»å‹è®¾ç½®ä¸º <code>&#39;javascript/auto&#39;</code> æ¥è§£å†³ã€‚</p>
</blockquote>
<p>è§£å†³æ–¹å¼</p>
<ol>
<li>æ·»åŠ type: â€˜javascript/autoâ€™</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff|woff2|svg|svgz)(\?.+)?$/</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">esModule</span>: <span class="literal">false</span>, <span class="comment">// ä¸åŠ çš„è¯ä¼šæœ‰è¿™ç§æƒ…å†µ imgå±æ€§src=&quot;[object Module]&quot;</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;[name].[ext]&#x27;</span>,</span><br><span class="line">      <span class="attr">outputPath</span>: <span class="string">&#x27;fonts&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;javascript/auto&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>ä½¿ç”¨èµ„æºæ¨¡å—ç±»å‹</p>
<ol>
<li>ä½¿ç”¨æ–¹å¼</li>
</ol>
<blockquote>
<ul>
<li><code>asset/resource</code> å‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URLã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ <code>file-loader</code> å®ç°ã€‚</li>
<li><code>asset/inline</code> å¯¼å‡ºä¸€ä¸ªèµ„æºçš„ data URIã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ <code>url-loader</code> å®ç°ã€‚</li>
<li><code>asset/source</code> å¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ <code>raw-loader</code> å®ç°ã€‚</li>
<li><code>asset</code> åœ¨å¯¼å‡ºä¸€ä¸ª data URI å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ <code>url-loader</code>ï¼Œå¹¶ä¸”é…ç½®èµ„æºä½“ç§¯é™åˆ¶å®ç°ã€‚</li>
</ul>
</blockquote>
<ol start="2">
<li>è¿™é‡Œé€šè¿‡assetå®ç°</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff|woff2|svg|svgz)(\?.+)?$/</span>,</span><br><span class="line">  type: <span class="string">&#x27;asset&#x27;</span>,</span><br><span class="line">  <span class="attr">generator</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;fonts/[name].[ext]&quot;</span></span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parser</span>: &#123;</span><br><span class="line">    <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">      <span class="attr">limit</span>: <span class="number">8196</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="æŠ¥é”™7-html-webpack-plugin"><a href="#æŠ¥é”™7-html-webpack-plugin" class="headerlink" title="æŠ¥é”™7 html-webpack-plugin"></a>æŠ¥é”™7 html-webpack-plugin</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ERROR <span class="keyword">in</span>   <span class="built_in">Error</span>: The loader <span class="string">&quot;/Users/chenlili/yonyou/versionTotal/develop-cll-test-webpack/iuap_cmdm_front/node_modules/html-webpack-plugin/lib/loader.js!/Users/chenlili/yonyou/versionTotal/develop-cll-test-webpac  k/iuap_cmdm_front/src/pages/model-management/flow-model/index.html&quot;</span> didn<span class="string">&#x27;t return html.</span></span><br></pre></td></tr></table></figure>

<p><img src="11.png" alt="image-20220122101322313"></p>
<p>å‘ç°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ç›´æ¥ç™¾åº¦äº†ï¼Œçœ‹åˆ°æœ‰å“¥ä»¬è¯´æ˜¯html-webpack-pluginå†…ç½®ä»£ç çš„é—®é¢˜ï¼Œä»–ä¿®æ”¹äº†æºç ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™ç§å¤„ç†æ–¹å¼ä¸å¤ªå®Œç¾ï¼Œå°±æ‰“å¼€äº†html-webpack-pluginåœ¨githubçš„issuesã€‚ç¡®å®æœ‰äººé‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œç»™å‡ºçš„è§£å†³æ–¹å¼æ˜¯å‡çº§html-webpack-pluginç‰ˆæœ¬ï¼Œäºæ˜¯æˆ‘å‡çº§åˆ°äº†5.5.0ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install html-webpack-plugin@<span class="number">5.5</span><span class="number">.0</span> -D</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œå•æ¨¡å—çš„æ‰“åŒ…å¯ç®—æ˜¯æ„å»ºæˆåŠŸäº†ã€‚</p>
<p><img src="12.png" alt="image-20220122102521491"></p>
<blockquote>
<p> æ¥ä¸‹æ¥å°è¯•æ•´ä¸ªé¡¹ç›®æ‰“åŒ…ï¼Œçœ‹çœ‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
</blockquote>
<p>å¼€å§‹äº†æ–°ä¸€è½®çš„WARNINGå’ŒErrorï¼ï¼ï¼</p>
<h1 id="æŠ¥é”™8-react-dnd"><a href="#æŠ¥é”™8-react-dnd" class="headerlink" title="æŠ¥é”™8 react-dnd"></a>æŠ¥é”™8 react-dnd</h1><p><img src="13.png" alt="image-20220122105143120"></p>
<p>åº”è¯¥æ˜¯react-dndçš„é—®é¢˜ï¼Œå‡çº§react-dnd @9.4.0 -&gt; æœ€æ–°ç‰ˆæœ¬@14.5.0</p>
<h1 id="æŠ¥é”™9-react-dnd-html5-backend"><a href="#æŠ¥é”™9-react-dnd-html5-backend" class="headerlink" title="æŠ¥é”™9 react-dnd-html5-backend"></a>æŠ¥é”™9 react-dnd-html5-backend</h1><p><img src="14.png" alt="image-20220122110741387"></p>
<p>ç›²çŒœreact-dnd-html5-backendé—®é¢˜ï¼Œå‡çº§react-dnd-html5-backendæœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p>å‡ºç°ä¸€ä¸ªwarning</p>
<p><img src="15.png" alt="image-20220122111828816"></p>
<p>æºä»£ç å¼•å…¥æ–¹å¼</p>
<p><img src="16.png" alt="image-20220122111849687"></p>
<p>æ›´æ”¹ä¸º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HTML5Backend&#125; <span class="keyword">from</span> <span class="string">&#x27;react-dnd-html5-backend&#x27;</span>;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
  </entry>
  <entry>
    <title>ä»£ç è§„èŒƒ</title>
    <url>/2022/04/19/%E3%80%8A%E5%B8%A6%E4%BD%A0%E5%85%A5%E9%97%A8%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E3%80%8B%E5%AE%9E%E8%B7%B5-%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<h1 id="ä¸€ã€ä»£ç è§„èŒƒ"><a href="#ä¸€ã€ä»£ç è§„èŒƒ" class="headerlink" title="ä¸€ã€ä»£ç è§„èŒƒ"></a>ä¸€ã€ä»£ç è§„èŒƒ</h1><p>å·¥ç¨‹æ²¡æœ‰å…·ä½“ç»Ÿä¸€çš„è§„èŒƒï¼ŒåŒ…æ‹¬æœ‰<code>ä»£ç æ ¼å¼</code> , <code>å‘½åè§„èŒƒ</code> , <code>æ–‡æ¡£æ³¨é‡Š</code> ã€‚ç°åœ¨æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä»£ç è§„èŒƒé€ æˆé¡¹ç›®å­˜åœ¨å‡ ç§ä¸åŒçš„è§„èŒƒï¼Œéš¾ä»¥é˜…è¯»ã€‚</p>
<span id="more"></span>


<p>ç»Ÿä¸€ä»£ç è§„èŒƒä¸ä»…å¯ä»¥è®©ç¨‹åºå‘˜ç¼–å†™æ˜“äºé˜…è¯»ã€å¯ç»´æŠ¤æ€§çš„ä»£ç ï¼Œè¿˜æœ‰å…¶ä»–å¥½å¤„</p>
<ol>
<li>è§„èŒƒçš„ä»£ç å¯ä»¥ä¿ƒè¿›å›¢é˜Ÿåˆä½œ</li>
<li>è§„èŒƒçš„ä»£ç å¯ä»¥é™ä½ç»´æŠ¤æˆæœ¬</li>
<li>è§„èŒƒçš„ä»£ç æœ‰åŠ©äº code reviewï¼ˆä»£ç å®¡æŸ¥ï¼‰</li>
<li>å…»æˆä»£ç è§„èŒƒçš„ä¹ æƒ¯ï¼Œæœ‰åŠ©äºç¨‹åºå‘˜è‡ªèº«çš„æˆé•¿</li>
</ol>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸ºæˆ‘ä»¬çš„é¡¹ç›®æŒ‡å®šä¸€å¥—ç»Ÿä¸€çš„ä»£ç è§„èŒƒã€‚</p>
<!--more-->


<h1 id="äºŒã€å¦‚ä½•åˆ¶å®šä»£ç è§„èŒƒ"><a href="#äºŒã€å¦‚ä½•åˆ¶å®šä»£ç è§„èŒƒ" class="headerlink" title="äºŒã€å¦‚ä½•åˆ¶å®šä»£ç è§„èŒƒ"></a>äºŒã€å¦‚ä½•åˆ¶å®šä»£ç è§„èŒƒ</h1><p>ç°åœ¨æœ‰å¾ˆå¤šä¼˜ç§€çš„å¼€æºä»£ç è§„èŒƒï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦ä»å¤´å¼€å§‹åˆ¶å®šä¸€ä»½ä»£ç è§„èŒƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¼˜ç§€çš„ä»£ç è§„èŒƒä¸Šç»“åˆå›¢é˜Ÿçš„éœ€æ±‚ä½œä¸ªæ€§åŒ–ä¿®æ”¹ã€‚</p>
<p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›æ¯”è¾ƒå‡ºåçš„ JavaScript ä»£ç è§„èŒƒï¼š</p>
<ul>
<li><a href="https://github.com/airbnb/javascript">airbnb (101k star è‹±æ–‡ç‰ˆ) (opens new window)</a>ï¼Œ<a href="https://github.com/lin-123/javascript">airbnb-ä¸­æ–‡ç‰ˆ(opens new window)</a></li>
<li><a href="https://github.com/standard/standard/blob/master/docs/README-zhcn.md">standard (24.5k star) ä¸­æ–‡ç‰ˆ(opens new window)</a></li>
<li><a href="https://github.com/ecomfe/spec">ç™¾åº¦å‰ç«¯ç¼–ç è§„èŒƒ 3.9k star(opens new window)</a></li>
</ul>
<p>CSS ä»£ç è§„èŒƒä¹Ÿæœ‰ä¸å°‘ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><a href="https://github.com/fex-team/styleguide/blob/master/css.md">styleguide 2.3k star(opens new window)</a></li>
<li><a href="https://github.com/ecomfe/spec/blob/master/css-style-guide.md">spec 3.9k star(opens new window)</a></li>
</ul>
<h1 id="ä¸‰ã€å¦‚ä½•æ£€æŸ¥ä»£ç è§„èŒƒ"><a href="#ä¸‰ã€å¦‚ä½•æ£€æŸ¥ä»£ç è§„èŒƒ" class="headerlink" title="ä¸‰ã€å¦‚ä½•æ£€æŸ¥ä»£ç è§„èŒƒ"></a>ä¸‰ã€å¦‚ä½•æ£€æŸ¥ä»£ç è§„èŒƒ</h1><ol>
<li>ä½¿ç”¨å·¥å…·æ ¡éªŒä»£ç æ ¼å¼ã€‚</li>
<li>åˆ©ç”¨code reviewå®¡æŸ¥å˜é‡å‘½åã€æ³¨é‡Šã€‚</li>
</ol>
<p>æ¥æ¥ä¸‹æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨å·¥å…·æ ¡éªŒä»£ç æ ¼å¼</p>
<ol>
<li>ä½¿ç”¨<code>Eslint</code>è´Ÿè´£æ‰¾å‡ºä»£ç ä¸­çš„é”™è¯¯</li>
<li>ä½¿ç”¨<code>Prettier</code>è´Ÿè´£ä»£ç æ ¼å¼åŒ–</li>
</ol>
<h2 id="3-1-Eslinté…ç½®"><a href="#3-1-Eslinté…ç½®" class="headerlink" title="3.1 Eslinté…ç½®"></a>3.1 Eslinté…ç½®</h2><h3 id="3-1-1-æ€»è§ˆ"><a href="#3-1-1-æ€»è§ˆ" class="headerlink" title="3.1.1 æ€»è§ˆ"></a>3.1.1 æ€»è§ˆ</h3><p><strong>åŸºç¡€</strong></p>
<ol>
<li><code>eslint</code> : lintä»£ç çš„ä¸»è¦å·¥å…·</li>
</ol>
<p><strong>è§£æå™¨</strong></p>
<ol>
<li><code>babel-eslint</code> è¯¥ä¾èµ–åŒ…å…è®¸ä½ ä½¿ç”¨ä¸€äº›å®éªŒç‰¹æ€§çš„æ—¶å€™ï¼Œä¾ç„¶èƒ½å¤Ÿç”¨ä¸ŠEslintè¯­æ³•æ£€æŸ¥ã€‚åè¿‡æ¥è¯´ï¼Œå½“ä½ ä»£ç å¹¶æ²¡æœ‰ç”¨åˆ°Eslintä¸æ”¯æŒçš„å®éªŒç‰¹æ€§çš„æ—¶å€™æ˜¯ä¸éœ€è¦å®‰è£…æ­¤ä¾èµ–åŒ…çš„ã€‚</li>
<li><code>@typescript-eslint/parser </code>  Typescriptè¯­æ³•çš„è§£æå™¨ï¼Œç±»ä¼¼äº<code>babel-eslint</code>è§£æå™¨ä¸€æ ·ã€‚å¯¹åº”<code>parserOptions</code>çš„é…ç½®å‚è€ƒå®˜æ–¹çš„READMEã€‚</li>
</ol>
<p><strong>æ‰©å±•çš„é…ç½®</strong></p>
<ol>
<li><code>eslint-config-airbnb</code> è¯¥åŒ…æä¾›äº†æ‰€æœ‰çš„Airbnbçš„ESLinté…ç½®ï¼Œä½œä¸ºä¸€ç§æ‰©å±•çš„å…±äº«é…ç½®ï¼Œä½ æ˜¯å¯ä»¥ä¿®æ”¹è¦†ç›–æ‰æŸäº›ä¸éœ€è¦çš„é…ç½®çš„ï¼Œ<strong>è¯¥å·¥å…·åŒ…åŒ…å«äº†reactçš„ç›¸å…³Eslintè§„åˆ™(eslint-plugin-reactä¸eslint-plugin-jsx-a11y)ï¼Œæ‰€ä»¥å®‰è£…æ­¤ä¾èµ–åŒ…çš„æ—¶å€™è¿˜éœ€è¦å®‰è£…åˆšæ‰æåŠçš„ä¸¤ä¸ªæ’ä»¶</strong></li>
<li><code>eslint-config-airbnb-base</code> ä¸ä¸Šä¸€ä¸ªåŒ…çš„åŒºåˆ«æ˜¯ï¼Œæ­¤ä¾èµ–åŒ…ä¸åŒ…å«reactçš„è§„åˆ™ï¼Œä¸€èˆ¬ç”¨äºæœåŠ¡ç«¯æ£€æŸ¥ã€‚</li>
<li><code>eslint-config-prettier</code> å°†ä¼šç¦ç”¨æ‰æ‰€æœ‰é‚£äº›éå¿…é¡»æˆ–è€…å’Œ<a href="https://link.juejin.cn/?target=https://github.com/prettier/prettier">prettier</a>å†²çªçš„è§„åˆ™ã€‚è¿™è®©æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨æœ€å–œæ¬¢çš„shareableé…ç½®ï¼Œè€Œä¸è®©å®ƒçš„é£æ ¼é€‰æ‹©åœ¨ä½¿ç”¨Prettieræ—¶ç¢äº‹ã€‚è¯·æ³¨æ„è¯¥é…ç½®<strong>åªæ˜¯</strong>å°†è§„åˆ™<strong>off</strong>æ‰,æ‰€ä»¥å®ƒåªæœ‰åœ¨å’Œåˆ«çš„é…ç½®ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™æ‰æœ‰æ„ä¹‰ã€‚</li>
</ol>
<p><strong>æ’ä»¶</strong></p>
<ol>
<li><code>eslint-plugin-babel</code> å’Œbabel-eslintä¸€èµ·ç”¨çš„ä¸€æ¬¾æ’ä»¶ã€‚babel-eslintåœ¨å°†eslintåº”ç”¨äºBabelæ–¹é¢åšå¾—å¾ˆå¥½ï¼Œä½†æ˜¯å®ƒä¸èƒ½æ›´æ”¹å†…ç½®è§„åˆ™æ¥æ”¯æŒå®éªŒæ€§ç‰¹æ€§ã€‚eslint-plugin-babelé‡æ–°å®ç°äº†æœ‰é—®é¢˜çš„è§„åˆ™ï¼Œå› æ­¤å°±ä¸ä¼šè¯¯æŠ¥ä¸€äº›é”™è¯¯ä¿¡æ¯</li>
<li><code>eslint-plugin-import</code>è¯¥æ’ä»¶æƒ³è¦æ”¯æŒå¯¹ES2015+ (ES6+) import/exportè¯­æ³•çš„æ ¡éªŒ, å¹¶é˜²æ­¢ä¸€äº›æ–‡ä»¶è·¯å¾„æ‹¼é”™æˆ–è€…æ˜¯å¯¼å…¥åç§°é”™è¯¯çš„æƒ…å†µ</li>
<li><code>eslint-plugin-jsx-a11y</code> è¯¥ä¾èµ–åŒ…ä¸“æ³¨äºæ£€æŸ¥JSXå…ƒç´ çš„å¯è®¿é—®æ€§ã€‚</li>
<li><code>eslint-import-resolve-webpack</code> å¯ä»¥å€ŸåŠ©webpackçš„é…ç½®æ¥è¾…åŠ©eslintè§£æï¼Œæœ€æœ‰ç”¨çš„å°±æ˜¯aliasï¼Œä»è€Œé¿å…unresolvedçš„é”™è¯¯</li>
<li><code>eslint-import-resolver-alias</code> è§£å†³æˆ‘ä»¬åœ¨webpackä¸­é…ç½®åˆ«åï¼Œä½†æ˜¯eslintæ— æ³•é‰´åˆ«å‡ºæ¥çš„é—®é¢˜ï¼Œå¯ä»¥åˆ©ç”¨è¯¥æ’ä»¶è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚</li>
<li><code>eslint-plugin-react</code> Reactä¸“ç”¨çš„æ ¡éªŒè§„åˆ™æ’ä»¶.</li>
<li><code>eslint-plugin-react-hooks</code> åˆ©ç”¨è¯¥æ’ä»¶å¯¹hooksç‰¹æ€§çš„ä»£ç ä½œæ ¡éªŒã€‚</li>
<li><code>eslint-plugin-prettier</code> è¯¥æ’ä»¶è¾…åŠ©Eslintå¯ä»¥å¹³æ»‘åœ°ä¸Prettierä¸€èµ·åä½œï¼Œå¹¶å°†Prettierçš„è§£æä½œä¸ºEslintçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨æœ€åçš„è¾“å‡ºå¯ä»¥ç»™å‡ºä¿®æ”¹æ„è§ã€‚è¿™æ ·å½“Prettieræ ¼å¼åŒ–ä»£ç çš„æ—¶å€™ï¼Œä¾ç„¶èƒ½å¤Ÿéµå¾ªæˆ‘ä»¬çš„Eslintè§„åˆ™ã€‚å¦‚æœä½ ç¦ç”¨æ‰äº†æ‰€æœ‰å’Œä»£ç æ ¼å¼åŒ–ç›¸å…³çš„Eslintè§„åˆ™çš„è¯ï¼Œè¯¥æ’ä»¶å¯ä»¥æ›´å¥½å¾—å·¥ä½œã€‚æ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨eslint-config-prettierç¦ç”¨æ‰æ‰€æœ‰çš„æ ¼å¼åŒ–ç›¸å…³çš„è§„åˆ™(å¦‚æœå…¶ä»–æœ‰æ•ˆçš„Eslintè§„åˆ™ä¸prettieråœ¨ä»£ç å¦‚ä½•æ ¼å¼åŒ–çš„é—®é¢˜ä¸Šä¸ä¸€è‡´çš„æ—¶å€™ï¼ŒæŠ¥é”™æ˜¯åœ¨æ‰€éš¾å…çš„äº†)</li>
</ol>
<h3 id="3-1-2-é…ç½®"><a href="#3-1-2-é…ç½®" class="headerlink" title="3.1.2 é…ç½®"></a>3.1.2 é…ç½®</h3><h4 id="3-1-2-1-å„å±æ€§"><a href="#3-1-2-1-å„å±æ€§" class="headerlink" title="3.1.2.1 å„å±æ€§"></a>3.1.2.1 å„å±æ€§</h4><hr>
<ol>
<li><p>env: é¢„å®šä¹‰é‚£äº›ç¯å¢ƒéœ€è¦ç”¨åˆ°çš„å…¨å±€å˜é‡ï¼Œå¯ç”¨çš„å‚æ•°æ˜¯ï¼š<code>es6</code>ã€<code>broswer</code>ã€<code>node</code>ç­‰ã€‚</p>
<p><code>es6</code>ä¼šä½¿èƒ½æ‰€æœ‰çš„ECMAScript6çš„ç‰¹æ€§é™¤äº†æ¨¡å—(è¿™ä¸ªåŠŸèƒ½åœ¨è®¾ç½®ecmaVersionç‰ˆæœ¬ä¸º6çš„æ—¶å€™ä¼šè‡ªåŠ¨è®¾ç½®)</p>
<p><code>browser</code>ä¼šæ·»åŠ æ‰€æœ‰çš„æµè§ˆå™¨å˜é‡æ¯”å¦‚Windows</p>
<p><code>node</code>ä¼šæ·»åŠ æ‰€æœ‰çš„å…¨å±€å˜é‡æ¯”å¦‚<code>global</code></p>
<p>æ›´å¤šç¯å¢ƒé…ç½®å‚è€ƒ<a href="https://link.juejin.cn/?target=https://eslint.org/docs/user-guide/configuring%23specifying-environments">Specifying Environments</a></p>
</li>
<li><p>extends: æŒ‡å®šæ‰©å±•çš„é…ç½®ï¼Œé…ç½®æ”¯æŒé€’å½’æ‰©å±•ï¼Œæ”¯æŒè§„åˆ™çš„è¦†ç›–å’Œèšåˆã€‚</p>
</li>
<li><p>plugins: é…ç½®é‚£äº›æˆ‘ä»¬æƒ³è¦Lintingè§„åˆ™çš„æ’ä»¶ã€‚</p>
</li>
<li><p>parser: é»˜è®¤ESlintä½¿ç”¨<a href="https://link.juejin.cn/?target=https://github.com/eslint/espree">Espree</a>ä½œä¸ºè§£æå™¨ï¼Œä½†æ˜¯ä¸€æ—¦æˆ‘ä»¬ä½¿ç”¨babelçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ç”¨babel-eslintã€‚</p>
</li>
<li><p>parserOptions: å½“æˆ‘ä»¬å°†é»˜è®¤çš„è§£æå™¨ä»Espreeæ”¹ä¸ºbabel-eslintçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šparseOptionsï¼Œè¿™ä¸ªæ˜¯å¿…é¡»çš„ã€‚</p>
<p>ecmaVersion: é»˜è®¤å€¼æ˜¯5ï¼Œå¯ä»¥è®¾ç½®ä¸º3ã€5ã€6ã€7ã€8ã€9ã€10ï¼Œç”¨æ¥æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªECMAScriptç‰ˆæœ¬çš„è¯­æ³•ã€‚ä¹Ÿå¯ä»¥è®¾ç½®åŸºäºå¹´ä»½çš„JSæ ‡å‡†ï¼Œæ¯”å¦‚2015(ECMA 6)</p>
<p>sourceType: å¦‚æœä½ çš„ä»£ç æ˜¯ECMAScript æ¨¡å—å†™çš„ï¼Œè¯¥å­—æ®µé…ç½®ä¸º<code>module</code>ï¼Œå¦åˆ™ä¸º<code>script</code>(é»˜è®¤å€¼)</p>
<p>ecmaFeaturesï¼šè¯¥å¯¹è±¡æŒ‡ç¤ºä½ æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">globalReturnï¼šå…è®¸å…¨å±€èŒƒå›´å†…çš„`return`è¯­å¥</span><br><span class="line">   </span><br><span class="line">impliedStrictï¼šä½¿èƒ½å…¨å±€`strict`æ¨¡å¼</span><br><span class="line">   </span><br><span class="line">jsxï¼šä½¿èƒ½JSX</span><br></pre></td></tr></table></figure></li>
<li><p>rules: è‡ªå®šä¹‰è§„åˆ™ï¼Œå¯ä»¥è¦†ç›–æ‰extendsçš„é…ç½®ã€‚</p>
</li>
<li><p>settingsï¼šè¯¥å­—æ®µå®šä¹‰çš„æ•°æ®å¯ä»¥åœ¨æ‰€æœ‰çš„æ’ä»¶ä¸­å…±äº«ã€‚è¿™æ ·æ¯æ¡è§„åˆ™æ‰§è¡Œçš„æ—¶å€™éƒ½å¯ä»¥è®¿é—®è¿™é‡Œé¢å®šä¹‰çš„æ•°æ®</p>
</li>
</ol>
<p>æ›´å¤šé…ç½®é€‰é¡¹å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://link.juejin.cn/?target=https://eslint.org/docs/user-guide/configuring">Eslint</a></p>
<hr>
<h4 id="3-1-2-2-é…ç½®"><a href="#3-1-2-2-é…ç½®" class="headerlink" title="3.1.2.2 é…ç½®"></a>3.1.2.2 é…ç½®</h4><ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º.eslintrc.jsæ–‡ä»¶</li>
<li>é…ç½®è§„åˆ™</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">es2021</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">extends</span>: [<span class="string">&#x27;airbnb&#x27;</span>, <span class="string">&#x27;airbnb/hooks&#x27;</span>],</span><br><span class="line">    <span class="attr">ignorePatterns</span>: [<span class="string">&#x27;node_modules/&#x27;</span>, <span class="string">&#x27;ucf-publish/&#x27;</span>, <span class="string">&#x27;ucf.config.js&#x27;</span>, <span class="string">&#x27;ucf-common/static/&#x27;</span>],</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;@babel/eslint-parser&#x27;</span>,</span><br><span class="line">    <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">ecmaFeatures</span>: &#123;</span><br><span class="line">            <span class="attr">jsx</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">ecmaVersion</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="attr">allowImportExportEverywhere</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">        <span class="attr">requireConfigFile</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">babelOptions</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-react&#x27;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 0 ä¸å¯ç”¨ 1 è­¦å‘Š 2 ç¦ç”¨</span></span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="comment">// ç‰¹æ®Šrulesé…ç½®</span></span><br><span class="line">        <span class="string">&#x27;import/no-extraneous-dependencies&#x27;</span>: [</span><br><span class="line">            <span class="number">0</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">devDependencies</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">optionalDependencies</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">peerDependencies</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">packageDir</span>: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;react/jsx-filename-extension&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&#x27;import/extensions&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;no-debugger&#x27;</span>: <span class="number">2</span>, <span class="comment">// ç¦æ­¢ä½¿ç”¨debugger</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">settings</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;import/resolver&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">node</span>: &#123;</span><br><span class="line">                <span class="attr">extensions</span>: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.tsx&#x27;</span>],</span><br><span class="line">                <span class="attr">paths</span>: [<span class="string">&#x27;./ucf-common&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">alias</span>: &#123;</span><br><span class="line">                <span class="attr">map</span>: [</span><br><span class="line">                    [<span class="string">&#x27;components&#x27;</span>, <span class="string">&#x27;./ucf-common/src/components/&#x27;</span>], <span class="comment">// åˆ«åè·¯å¾„</span></span><br><span class="line">                    [<span class="string">&#x27;utils&#x27;</span>, <span class="string">&#x27;./ucf-common/src/utils/&#x27;</span>], <span class="comment">// åˆ«åè·¯å¾„</span></span><br><span class="line">                    [<span class="string">&#x27;static&#x27;</span>, <span class="string">&#x27;./ucf-common/src/static/&#x27;</span>], <span class="comment">// åˆ«åè·¯å¾„</span></span><br><span class="line">                    [<span class="string">&#x27;styles&#x27;</span>, <span class="string">&#x27;./ucf-common/src/styles/&#x27;</span>], <span class="comment">// åˆ«åè·¯å¾„</span></span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>æ£€æµ‹é¡¹ç›®å­˜åœ¨çš„é—®é¢˜</p>
<ol>
<li>ä½¿ç”¨ <code>npm eslint &#39;æŒ‡å®šæ–‡ä»¶&#39;</code> æ£€æµ‹æŸä¸€æ–‡ä»¶</li>
</ol>
</li>
<li><p>ä¿®æ­£ä»£ç ä¸­çš„æ ¼å¼é—®é¢˜</p>
<ol>
<li>ä½¿ç”¨<code>npx eslint xxx.js --fix</code>æ¥ä¿®æ­£ä»£ç ä¸­çš„éƒ¨åˆ†æ ¼å¼é—®é¢˜</li>
</ol>
</li>
<li><p>å¯ä»¥é€šè¿‡ä½¿ç”¨ VSCodeæ’ä»¶æ¥åœ¨ä»£ç ä¸­ç»™å‡ºä»£ç é”™è¯¯æç¤ºã€‚</p>
<ol>
<li><p>ä¸‹è½½æ’ä»¶Eslint</p>
<p><img src="image-20220417163546554.png" alt="image-20220417163546554"></p>
<ol start="2">
<li><p>åœ¨settings.jsonä¸­è¿›è¡Œé…ç½®</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;eslint.alwaysShowStatus&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;editor.codeActionsOnSave&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;source.fixAll.eslint&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;eslint.options&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;parser&quot;</span>: <span class="string">&quot;@babel/eslint-parser&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;eslint.validate&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;javascript&quot;</span>,</span><br><span class="line">    <span class="string">&quot;javascriptreact&quot;</span>,</span><br><span class="line">    <span class="string">&quot;html&quot;</span>,</span><br><span class="line">    <span class="string">&quot;react&quot;</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure></li>
<li><p>éªŒè¯Eslintæ ¡éªŒæ˜¯å¦å¼€å¯ </p>
<p>å¯ä»¥é€šè¿‡vscodeå³ä¸‹è§’çš„Eslintåˆ¤æ–­æˆ‘ä»¬æ‰€é…ç½®çš„æ˜¯å¦ç”Ÿæ•ˆäº†ã€‚</p>
<p><img src="image-20220417164911943.png" alt="image-20220417164911943"></p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="3-2-Prettieré…ç½®"><a href="#3-2-Prettieré…ç½®" class="headerlink" title="3.2 Prettieré…ç½®"></a>3.2 Prettieré…ç½®</h2><blockquote>
<p>å°†Prettieré›†æˆåœ¨Eslintä¸­ï¼ŒEslintçš„é…ç½®å¯èƒ½ä¼šå’ŒPrettierçš„é…ç½®ç›¸å†²çªï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡eslint-config-prettieræ¥å…³é—­å†²çªè§„åˆ™ã€‚</p>
</blockquote>
<h3 id="3-2-1-æ€»è§ˆ"><a href="#3-2-1-æ€»è§ˆ" class="headerlink" title="3.2.1 æ€»è§ˆ"></a>3.2.1 æ€»è§ˆ</h3><ol>
<li><code>prettier</code> åŸå§‹å®ç°ç‰ˆæœ¬ï¼Œå®šä¹‰äº†prettierè§„åˆ™å¹¶å®ç°è¿™äº›è§„åˆ™ã€‚</li>
<li><code>eslint-config-prettier</code> å…³é—­<code>eslint</code>ä¸­ä¸<code>prettier</code>ç›¸äº’å†²çªçš„è§„åˆ™ã€‚</li>
<li><code>eslint-plugin-prettier</code> èµ‹äºˆ<code>eslint</code>ç”¨<code>prettier</code>æ ¼å¼åŒ–ä»£ç çš„èƒ½åŠ›ã€‚</li>
</ol>
<blockquote>
<p>æœ€åŸºç¡€çš„æ˜¯prettierï¼Œç„¶åä½ éœ€è¦ç”¨eslint-config-prettierå»ç¦ç”¨æ‰æ‰€æœ‰å’Œprettierå†²çªçš„è§„åˆ™ï¼Œè¿™æ ·æ‰å¯ä»¥ä½¿ç”¨eslint-plugin-prettierå»ä»¥ç¬¦åˆeslintè§„åˆ™çš„æ–¹å¼æ ¼å¼åŒ–ä»£ç å¹¶æç¤ºå¯¹åº”çš„ä¿®æ”¹å»ºè®®ã€‚</p>
</blockquote>
<h3 id="3-2-2-é…ç½®"><a href="#3-2-2-é…ç½®" class="headerlink" title="3.2.2 é…ç½®"></a>3.2.2 é…ç½®</h3><ol>
<li>ä¿®æ”¹<code>.eslintrc.js</code>æ–‡ä»¶</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">- <span class="keyword">extends</span>: [<span class="string">&#x27;airbnb&#x27;</span>, <span class="string">&#x27;airbnb/hooks&#x27;</span>]</span><br><span class="line">+ <span class="keyword">extends</span>: [<span class="string">&#x27;airbnb&#x27;</span>, <span class="string">&#x27;airbnb/hooks&#x27;</span>, <span class="string">&#x27;plugin:prettier/recommended&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><strong>è§„åˆ™<code>plugin:prettier/recommended</code> åšäº†ä»€ä¹ˆï¼Ÿ</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// node_modules/eslint-plugin-prettier/eslint-plugin-prettier.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// plugin:prettier/recommended å°±æ˜¯åŠ è½½è¿™ä¸ª</span></span><br><span class="line">  <span class="attr">configs</span>: &#123;</span><br><span class="line">    <span class="attr">recommended</span>: &#123;</span><br><span class="line">      <span class="attr">extends</span>: [<span class="string">&#x27;prettier&#x27;</span>],</span><br><span class="line">      <span class="attr">plugins</span>: [<span class="string">&#x27;prettier&#x27;</span>],</span><br><span class="line">      <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;prettier/prettier&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;arrow-body-style&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;prefer-arrow-callback&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å…¶ä»–çš„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º<code>.prettierrc.js</code>æ–‡ä»¶</li>
<li>é…ç½®è§„åˆ™</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">printWidth</span>: <span class="number">120</span>,</span><br><span class="line">    <span class="attr">tabWidth</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">semi</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">useTabs</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">trailingComma</span>: <span class="string">&#x27;es5&#x27;</span>,</span><br><span class="line">    <span class="attr">endOfLine</span>: <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>æ ¼å¼åŒ–ä»£ç </p>
<ol>
<li><p>æ ¼å¼åŒ–å…¨éƒ¨æ–‡æ¡£</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npx prettier --write .</span><br><span class="line"><span class="comment">//æˆ–</span></span><br><span class="line">yarn prettier --write .</span><br></pre></td></tr></table></figure></li>
<li><p>æ ¼å¼åŒ–æŒ‡å®šæ–‡æ¡£</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npx prettier --write src/components/Button.js</span><br><span class="line"><span class="comment">//æˆ–</span></span><br><span class="line">yarn prettier --write src/components/Button.js</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>æ£€æŸ¥æ–‡æ¡£æ˜¯å¦å·²æ ¼å¼åŒ–</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npx prettier --check .</span><br><span class="line"><span class="comment">//æˆ–</span></span><br><span class="line">yarn prettier --check .</span><br><span class="line"><span class="comment">//æ£€æŸ¥æŒ‡å®šæ–‡ä»¶åŒä¸Š</span></span><br></pre></td></tr></table></figure></li>
<li><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬å®‰è£…vscodeä¸­çš„<code>Prettier</code>ï¼Œè¿™æ ·å°±å¯ä»¥è¿ç”¨ç¼–è¾‘å™¨å¿«æ·é”®è¿›è¡Œæ ¼å¼åŒ–ã€‚</p>
<p><img src="image-20220417170410876.png" alt="image-20220417170410876"></p>
</li>
<li><p>åœ¨<code>.setting.json</code>æ–‡ä»¶ä¸­é…ç½®</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;[javascript]&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3-3-æ£€æŸ¥CSSè§„èŒƒ"><a href="#3-3-æ£€æŸ¥CSSè§„èŒƒ" class="headerlink" title="3.3 æ£€æŸ¥CSSè§„èŒƒ"></a>3.3 æ£€æŸ¥CSSè§„èŒƒ</h2><h3 id="3-3-1-æ€»è§ˆ"><a href="#3-3-1-æ€»è§ˆ" class="headerlink" title="3.3.1 æ€»è§ˆ"></a>3.3.1 æ€»è§ˆ</h3><ol>
<li><code>stylelint</code>  è¿è¡Œå·¥å…·</li>
<li><code>stylelint-config-standard</code>  æ˜¯stylelintçš„æ¨èé…ç½®</li>
<li><code>stylelint-order</code>æ˜¯ç”¨æ¥åœ¨æ ¼å¼åŒ–cssæ–‡ä»¶æ—¶å¯¹ä»£ç çš„å±æ€§è¿›è¡Œæ’åºã€‚</li>
<li> <code>stylelint-config-css-modules</code> æ˜¯<code>css-module</code>çš„æ–¹æ¡ˆæ¥å¤„ç†æ ·å¼æ–‡ä»¶</li>
</ol>
<h3 id="3-3-2-é…ç½®"><a href="#3-3-2-é…ç½®" class="headerlink" title="3.3.2 é…ç½®"></a>3.3.2 é…ç½®</h3><ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º<code>.stylelintrc.js</code> æ–‡ä»¶</li>
<li>é…ç½®</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .stylelintrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">processors</span>: [],</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="string">&#x27;stylelint-order&#x27;</span>],</span><br><span class="line">    <span class="attr">extends</span>: [<span class="string">&#x27;stylelint-config-standard&#x27;</span>, <span class="string">&#x27;stylelint-config-css-modules&#x27;</span>],</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;string-quotes&#x27;</span>: <span class="string">&#x27;single&#x27;</span>, <span class="comment">// å•å¼•å·</span></span><br><span class="line">        <span class="string">&#x27;at-rule-empty-line-before&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;at-rule-no-unknown&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;at-rule-name-case&#x27;</span>: <span class="string">&#x27;lower&#x27;</span>, <span class="comment">// æŒ‡å®š@è§„åˆ™åçš„å¤§å°å†™</span></span><br><span class="line">        <span class="string">&#x27;length-zero-no-unit&#x27;</span>: <span class="literal">true</span>, <span class="comment">// ç¦æ­¢é›¶é•¿åº¦çš„å•ä½ï¼ˆå¯è‡ªåŠ¨ä¿®å¤ï¼‰</span></span><br><span class="line">        <span class="string">&#x27;shorthand-property-no-redundant-values&#x27;</span>: <span class="literal">true</span>, <span class="comment">// ç®€å†™å±æ€§</span></span><br><span class="line">        <span class="string">&#x27;number-leading-zero&#x27;</span>: <span class="string">&#x27;never&#x27;</span>, <span class="comment">// å°æ•°ä¸å¸¦0</span></span><br><span class="line">        <span class="string">&#x27;declaration-block-no-duplicate-properties&#x27;</span>: <span class="literal">true</span>, <span class="comment">// ç¦æ­¢å£°æ˜å¿«é‡å¤å±æ€§</span></span><br><span class="line">        <span class="string">&#x27;no-descending-specificity&#x27;</span>: <span class="literal">true</span>, <span class="comment">// ç¦æ­¢åœ¨å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨åå‡ºç°è¢«å…¶è¦†ç›–çš„è¾ƒä½ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨ã€‚</span></span><br><span class="line">        <span class="string">&#x27;selector-max-id&#x27;</span>: <span class="number">0</span>, <span class="comment">// é™åˆ¶ä¸€ä¸ªé€‰æ‹©å™¨ä¸­ ID é€‰æ‹©å™¨çš„æ•°é‡</span></span><br><span class="line">        <span class="string">&#x27;max-nesting-depth&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">indentation</span>: [</span><br><span class="line">            <span class="number">2</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// æŒ‡å®šç¼©è¿›  warning æé†’</span></span><br><span class="line">                <span class="attr">severity</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;order/properties-order&#x27;</span>: [</span><br><span class="line">            <span class="comment">// è§„åˆ™é¡ºåº</span></span><br><span class="line">            <span class="string">&#x27;position&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;bottom&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;z-index&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;display&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;float&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;width&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;height&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;max-width&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;max-height&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;min-width&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;min-height&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;padding&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;padding-top&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;padding-right&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;padding-bottom&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;padding-left&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-top&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-right&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-bottom&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-left&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-collapse&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-top-collapse&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-right-collapse&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-bottom-collapse&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;margin-left-collapse&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;overflow&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;overflow-x&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;overflow-y&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;clip&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;clear&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;font&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;font-family&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;font-size&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;font-smoothing&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;osx-font-smoothing&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;font-style&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;font-weight&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;line-height&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;letter-spacing&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;word-spacing&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;color&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-align&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-decoration&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-indent&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-overflow&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-rendering&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-size-adjust&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-shadow&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;text-transform&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;word-break&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;word-wrap&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;white-space&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;vertical-align&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;list-style&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;list-style-type&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;list-style-position&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;list-style-image&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pointer-events&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;cursor&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;background&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;background-color&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;border&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;border-radius&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;outline&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;outline-offset&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;opacity&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;filter&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;visibility&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;size&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;transform&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>å®‰è£…vscode-stylelintæ’ä»¶ï¼Œå®ç°ä¿å­˜æ—¶è‡ªåŠ¨autoSave</p>
<ol>
<li><p><img src="image-20220418090151929.png" alt="image-20220418090151929"></p>
</li>
<li><p><code>Styleline</code>å’Œ<code>stylelint-plus</code>çš„åŒºåˆ«æ˜¯ï¼Œstylelint-plusæ”¯æŒäº†ä¿å­˜æ—¶autoSave</p>
</li>
<li><p>é…ç½®vscode-setting.jsonæ–‡ä»¶ </p>
<blockquote>
<p> å‚è€ƒ </p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;stylelint.validate&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;css&quot;</span>,</span><br><span class="line">    <span class="string">&quot;less&quot;</span>,</span><br><span class="line">    <span class="string">&quot;postcss&quot;</span>,</span><br><span class="line">    <span class="string">&quot;scss&quot;</span>,</span><br><span class="line">    <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sass&quot;</span></span><br><span class="line">],</span><br><span class="line"><span class="string">&quot;editor.codeActionsOnSave&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;source.fixAll.stylelint&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li><p>å¿½ç•¥lintæ–‡ä»¶</p>
<blockquote>
<p>é¡¹ç›®ä¸­æœ‰ä¸€äº›ä¸éœ€è¦æ ¼å¼åŒ–çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®åœ¨è¿è¡Œlintæ—¶å¿½ç•¥è¿™äº›æ–‡ä»¶</p>
</blockquote>
<p>æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥èµ·åˆ°å¿½ç•¥ä½œç”¨</p>
<ol>
<li>æˆ‘ä»¬å¯ä»¥åœ¨<code>.stylelintrc.js</code>ä¸­é…ç½®<code>ignoreFiles</code>ã€‚</li>
<li>åˆ›å»º<code>.stylelintignore</code>æ–‡ä»¶ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>/* stylelint-disable */</code>çš„æ–¹æ³•ï¼Œæ¥å¯¹ä»£ç å—è¿›è¡Œå¿½ç•¥lintæ£€æµ‹ã€‚</li>
</ol>
<p>è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹å¼</p>
<ol>
<li><p>æ–°å»º<code>.stylelintignore</code> æ–‡ä»¶</p>
</li>
<li><p>é…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">*.js</span><br><span class="line">*.tsx</span><br><span class="line">*.ts</span><br><span class="line">*.json</span><br><span class="line">*.png</span><br><span class="line">*.eot</span><br><span class="line">*.ttf</span><br><span class="line">*.woff</span><br><span class="line">*.css</span><br><span class="line">src/styles/antd-overrides.less</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
</li>
</ol>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol>
<li><a href="https://juejin.cn/post/6844903859488292871#heading-9">æœ€å…¨çš„Eslinté…ç½®æ¨¡æ¿ï¼Œä»æ­¤ç»Ÿä¸€å›¢é˜Ÿçš„ç¼–ç¨‹ä¹ æƒ¯</a></li>
<li><a href="https://blog.csdn.net/qq_40618238/article/details/122021435">eslintæˆ–stylelinté…ç½®å®Œä¹‹åvscodeæ— æ³•è‡ªåŠ¨æ ¼å¼åŒ–é—®é¢˜çš„è§£å†³åŠæ³•</a></li>
<li><a href="https://blog.csdn.net/weixin_41996102/article/details/121166987">stylelint æ¥å…¥å®æˆ˜è¸©å‘æ€»ç»“</a></li>
<li><a href="https://woai3c.gitee.io/introduction-to-front-end-engineering/02.html#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83">å¸¦ä½ å…¥é—¨å‰ç«¯å·¥ç¨‹</a></li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯å·¥ç¨‹</category>
      </categories>
      <tags>
        <tag>å®è·µ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€è‹¥å·è§†é‡ x æºç å…±è¯»ã€‘ç¬¬24æœŸ|vue2åŸºç¡€å·¥å…·</title>
    <url>/2022/04/26/%E3%80%90%E8%8B%A5%E5%B7%9D%E8%A7%86%E9%87%8E-x-%E6%BA%90%E7%A0%81%E5%85%B1%E8%AF%BB%E3%80%91%E7%AC%AC24%E6%9C%9F-vue2%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<p><strong>æœ¬æ–‡å‚åŠ äº†ç”±<a href="https://link.juejin.cn/?target=https://lxchuan12.gitee.io" title="https://lxchuan12.gitee.io">å…¬ä¼—å·@è‹¥å·è§†é‡</a> å‘èµ·çš„æ¯å‘¨æºç å…±è¯»æ´»åŠ¨ï¼Œ<a href="https://juejin.cn/post/7079706017579139102" title="https://juejin.cn/post/7079706017579139102">ç‚¹å‡»äº†è§£è¯¦æƒ…ä¸€èµ·å‚ä¸ã€‚</a></strong></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><ol>
<li>è¿™æ˜¯è·Ÿéš<a href="https://juejin.cn/user/1415826704971918">@è‹¥å·</a> æºç æ´»åŠ¨çš„ç¬¬äºŒä¸ªæ‰“å¡ã€‚</li>
<li>è¯¥æœŸæ´»åŠ¨åœ°å€<a href="https://juejin.cn/post/7079765637437849614">ã€è‹¥å·è§†é‡ x æºç å…±è¯»ã€‘ç¬¬24æœŸ | vue2å·¥å…·å‡½æ•°</a></li>
</ol>
<h1 id="å·¥å…·å‡½æ•°"><a href="#å·¥å…·å‡½æ•°" class="headerlink" title="å·¥å…·å‡½æ•°"></a>å·¥å…·å‡½æ•°</h1><h2 id="1-emptyObject"><a href="#1-emptyObject" class="headerlink" title="1. emptyObject"></a>1. emptyObject</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> * Vue.js v2.6.14</span></span><br><span class="line"><span class="comment"> * (c) 2014-2021 Evan You</span></span><br><span class="line"><span class="comment"> * Released under the MIT License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*  */</span></span><br><span class="line"><span class="keyword">var</span> emptyObject = <span class="built_in">Object</span>.freeze(&#123;&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="https://lxchuan12.gitee.io/js-object-api/#object-isfrozen-obj-es5"><strong>Object.freeze()</strong></a></p>
<blockquote>
<p><code>Object.freeze()</code> æ–¹æ³•å¯ä»¥å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼Œå†»ç»“æŒ‡çš„æ˜¯ä¸èƒ½å‘è¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹å…¶å·²æœ‰å±æ€§çš„å€¼ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹è¯¥å¯¹è±¡å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå¯¹è±¡æ°¸è¿œæ˜¯ä¸å¯å˜çš„ã€‚è¯¥æ–¹æ³•è¿”å›è¢«å†»ç»“çš„å¯¹è±¡ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> deadline = <span class="built_in">Object</span>.freeze(&#123;<span class="attr">date</span>: <span class="string">&#x27;yesterday&#x27;</span>&#125;);</span><br><span class="line">deadline.date = <span class="string">&#x27;tomorrow&#x27;</span>;</span><br><span class="line">deadline.excuse = <span class="string">&#x27;lame&#x27;</span>;</span><br><span class="line">deadline.date; <span class="comment">// &#x27;yesterday&#x27; ä¸å¯ä»¥ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼</span></span><br><span class="line">deadline.excuse; <span class="comment">// undefined ä¸å¯ä»¥å‘è¿™ä¸ªå¯¹è±¡ä¸­æ·»åŠ æ–°çš„å±æ€§</span></span><br><span class="line"><span class="built_in">Object</span>.isSealed(deadline); <span class="comment">// true; </span></span><br><span class="line"><span class="built_in">Object</span>.isFrozen(deadline); <span class="comment">// true åˆ¤æ–­å¯¹è±¡æ˜¯å¦å†»ç»“çš„æ–¹æ³•</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(deadline, <span class="string">&#x27;date&#x27;</span>);</span><br><span class="line"><span class="comment">// &#123;value: &quot;yesterday&quot;, writable: false, enumerable: true, configurable: false&#125; (ä¸å¯é…ç½®ï¼Œä¸å¯å†™)</span></span><br><span class="line"><span class="built_in">Object</span>.keys(deadline); <span class="comment">// [&#x27;date&#x27;] (å¯æšä¸¾)</span></span><br></pre></td></tr></table></figure>

<h2 id="2-isUndef"><a href="#2-isUndef" class="headerlink" title="2. isUndef"></a>2. isUndef</h2><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯æœªå®šä¹‰</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// These helpers produce better VM code in JS engines due to their</span></span><br><span class="line"><span class="comment">// explicitness and function inlining.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUndef</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v === <span class="literal">undefined</span> || v === <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-isDef"><a href="#3-isDef" class="headerlink" title="3. isDef"></a>3. isDef</h2><blockquote>
<p>åˆ¤æ–­æ˜¯å¦å·²ç»å®šä¹‰</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// These helpers produce better VM code in JS engines due to their</span></span><br><span class="line"><span class="comment">// explicitness and function inlining.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDef</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v !== <span class="literal">undefined</span> &amp;&amp; v !== <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-isTrue"><a href="#4-isTrue" class="headerlink" title="4. isTrue"></a>4. isTrue</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isTrue</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v === <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-isFalse"><a href="#5-isFalse" class="headerlink" title="5. isFalse"></a>5. isFalse</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFalse</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v === <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-isPrimitive"><a href="#6-isPrimitive" class="headerlink" title="6. isPrimitive"></a>6. isPrimitive</h2><blockquote>
<p>åˆ¤æ–­å€¼æ˜¯å¦æ˜¯åŸå§‹å€¼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Check if value is primitive.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPrimitive</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span> ||</span><br><span class="line">    <span class="keyword">typeof</span> value === <span class="string">&#x27;number&#x27;</span> ||</span><br><span class="line">    <span class="comment">// $flow-disable-line</span></span><br><span class="line">    <span class="keyword">typeof</span> value === <span class="string">&#x27;symbol&#x27;</span> ||</span><br><span class="line">    <span class="keyword">typeof</span> value === <span class="string">&#x27;boolean&#x27;</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-isObject"><a href="#7-isObject" class="headerlink" title="7. isObject"></a>7. isObject</h2><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡ï¼Œæ²¡æœ‰åŒºåˆ†å¯¹è±¡å’Œæ•°ç»„</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Quick object check - this is primarily used to tell</span></span><br><span class="line"><span class="comment"> * Objects from primitive values when we know the value</span></span><br><span class="line"><span class="comment"> * is a JSON-compliant type.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObejct</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj !== <span class="literal">null</span> &amp;&amp; type <span class="keyword">of</span> === <span class="string">&#x27;object&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-toRowType"><a href="#8-toRowType" class="headerlink" title="8. toRowType"></a>8. toRowType</h2><blockquote>
<p>è½¬æ¢æˆåŸå§‹ç±»å‹</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> _toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toRowType</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> _toString.call(value).slice(<span class="number">8</span>, -<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">toRowType(<span class="string">&#x27;&#x27;</span>) <span class="comment">// &#x27;String&#x27;</span></span><br><span class="line">toRowType()<span class="comment">// &#x27;undefined&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸ºä»€ä¹ˆéœ€è¦.slice(8, -1)</strong></p>
<ol>
<li>_toString.call(value) ç”Ÿæˆç»“æœ[object String] ã€‚</li>
<li><a href="%E4%BA%8C%E3%80%81vue-shared.md">äºŒã€vue-shared.md</a> __toString.call(value).slice(8, -1) å»æ‰[objectå’Œ]ã€‚</li>
</ol>
<h2 id="9-isPlainObject"><a href="#9-isPlainObject" class="headerlink" title="9. isPlainObject"></a>9. isPlainObject</h2><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯çº¯å¯¹è±¡</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> _toString.call(obj) === <span class="string">&#x27;[object Object]&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isPlainObject(&#123;&#125;) <span class="comment">// true</span></span><br><span class="line">isPlainObject([])</span><br></pre></td></tr></table></figure>

<h2 id="10-isRegExp"><a href="#10-isRegExp" class="headerlink" title="10. isRegExp"></a>10. isRegExp</h2><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯æ­£åˆ™è¡¨è¾¾å¼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isRegExp</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> _toString.call(obj) === <span class="string">&#x27;[object RegExp]&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-isValidArrayIndex"><a href="#11-isValidArrayIndex" class="headerlink" title="11. isValidArrayIndex"></a>11. isValidArrayIndex</h2><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯å¯ç”¨çš„æ•°ç»„ç´¢å¼•å€¼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isValidArrayIndex</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n = <span class="built_in">parseFloat</span>(<span class="built_in">String</span>(val));</span><br><span class="line">  <span class="keyword">return</span> n &gt;= <span class="number">0</span> &amp;&amp; <span class="built_in">Math</span>.floor(n) === n &amp;&amp; <span class="built_in">isFinite</span>(val);ã€</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨parseFloatï¼Ÿ</p>
<p>ä½¿ç”¨parseFloatå¯è§£æå…¶ä»–è¿›åˆ¶å­—ç¬¦ä¸²æ—¶ï¼Œæœ‰å¯èƒ½ç”±äºè®¡ç®—ç²¾åº¦é—®é¢˜æ— æ³•å¾—åˆ°ä¸€ä¸ªç¡®å®šçš„åè¿›åˆ¶è¯ä¹¦ã€‚</p>
</li>
<li><p>ä¸ºä»€ä¹ˆä½¿ç”¨isFinite</p>
<blockquote>
<p>is Finite()å‡½æ•°åˆ¤æ–­è¢«ä¼ å…¥çš„å‚æ•°å€¼æ˜¯å¦ä¸ºä¸€ä¸ªæœ‰é™æ•°å€¼ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">isFinite</span>(<span class="literal">Infinity</span>);  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="literal">NaN</span>);       <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(-<span class="literal">Infinity</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="number">0</span>);         <span class="comment">// true</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="number">2e64</span>);      <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="string">&#x27;0&#x27;</span>);       <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="string">&#x27;0&#x27;</span>) <span class="comment">// false </span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="literal">null</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="12-isPromise"><a href="#12-isPromise" class="headerlink" title="12. isPromise"></a>12. isPromise</h1><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯promise</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">funciton <span class="function"><span class="title">isPromise</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">  	isDef(val) &amp;&amp; </span><br><span class="line">    <span class="keyword">typeof</span> val.then === <span class="string">&#x27;function&#x27;</span> &amp;&amp;</span><br><span class="line">    <span class="keyword">typeof</span> val.catch === <span class="string">&#x27;function&#x27;</span></span><br><span class="line"> 	)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">isPromise(<span class="keyword">new</span> <span class="built_in">Promise</span>()) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h1 id="13-toStringè½¬å­—ç¬¦ä¸²"><a href="#13-toStringè½¬å­—ç¬¦ä¸²" class="headerlink" title="13. toStringè½¬å­—ç¬¦ä¸²"></a>13. toStringè½¬å­—ç¬¦ä¸²</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toString</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> val == <span class="literal">null</span> </span><br><span class="line">		? <span class="string">&#x27;&#x27;</span> </span><br><span class="line">		: <span class="built_in">Array</span>.isArray(val) || (isPlainObject(val) &amp;&amp; val.toString === _toString)</span><br><span class="line">			? <span class="built_in">JSON</span>.stringify(val, <span class="literal">null</span>, <span class="number">2</span>)</span><br><span class="line">			: <span class="built_in">String</span>(val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>æ•°ç»„æˆ–è€…å¯¹è±¡å¹¶ä¸”å¯¹è±¡çš„<code>toString</code> æ–¹æ³•æ˜¯Object.prototype.toStringï¼Œç”¨JSON.stringifyè½¬æ¢</p>
</li>
<li><p>JSON.stringify(val, null, 2)</p>
<ol>
<li><p>JSON.stringify(value, replacer, space)</p>
<ul>
<li><code>value</code> åºåˆ—åŒ–ä¸ºä¸€ä¸ªJSONå­—ç¬¦ä¸²çš„å€¼</li>
<li><code>replacer</code> å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œè¢«åºåˆ—åŒ–çš„å€¼çš„æ¯ä¸ªå±æ€§éƒ½ä¼šç»è¿‡è¯¥å‡½æ•°çš„è½¬æ¢å’Œå¤„ç†ï¼›å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™åªæœ‰åŒ…å«åœ¨è¿™ä¸ªæ•°ç»„ä¸­çš„å±æ€§åæ‰ä¼šè¢«åºåˆ—åŒ–åˆ°æœ€ç»ˆçš„ JSON å­—ç¬¦ä¸²ä¸­ï¼›å¦‚æœè¯¥å‚æ•°ä¸º null æˆ–è€…æœªæä¾›ï¼Œåˆ™å¯¹è±¡æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè¢«åºåˆ—åŒ–ã€‚</li>
<li><code>space</code> æŒ‡å®šç¼©è¿›ç”¨çš„ç©ºç™½å­—ç¬¦ä¸²ï¼Œç”¨äºç¾åŒ–è¾“å‡ºï¼ˆpretty-printï¼‰ï¼›å¦‚æœå‚æ•°æ˜¯ä¸ªæ•°å­—ï¼Œå®ƒä»£è¡¨æœ‰å¤šå°‘çš„ç©ºæ ¼ï¼›ä¸Šé™ä¸º10ã€‚è¯¥å€¼è‹¥å°äº1ï¼Œåˆ™æ„å‘³ç€æ²¡æœ‰ç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼ˆå½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡10ä¸ªå­—æ¯ï¼Œå–å…¶å‰10ä¸ªå­—æ¯ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²å°†è¢«ä½œä¸ºç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°æ²¡æœ‰æä¾›ï¼ˆæˆ–è€…ä¸º nullï¼‰ï¼Œå°†æ²¡æœ‰ç©ºæ ¼ã€‚</li>
</ul>
</li>
<li><p>ä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  <span class="attr">foundation</span>: <span class="string">&quot;Mozilla&quot;</span>,</span><br><span class="line">  <span class="attr">model</span>: <span class="string">&quot;box&quot;</span>,</span><br><span class="line">  <span class="attr">week</span>: <span class="number">45</span>,</span><br><span class="line">  <span class="attr">transport</span>: <span class="string">&quot;car&quot;</span>,</span><br><span class="line">  <span class="attr">month</span>: <span class="number">7</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> jsonString = <span class="built_in">JSON</span>.stringify(foo, replacer);<span class="comment">// &#123;week: 45, month: 7&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h1 id="14-toNumber"><a href="#14-toNumber" class="headerlink" title="14. toNumber"></a>14. toNumber</h1><blockquote>
<p>è½¬æ•°å­—</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toNumber</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n = <span class="built_in">parseFloat</span>(val);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">isNaN</span>(n) ? val : n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">toNumber(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// &#x27;a&#x27;</span></span><br><span class="line">toNumber(<span class="string">&#x27;1&#x27;</span>) <span class="comment">// 1</span></span><br><span class="line">toNumber(<span class="string">&#x27;1a&#x27;</span>) <span class="comment">// 1</span></span><br><span class="line">toNumber(<span class="string">&#x27;a1&#x27;</span>) <span class="comment">// &#x27;a1&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="15-makeMapç”Ÿæˆä¸€ä¸ªmap"><a href="#15-makeMapç”Ÿæˆä¸€ä¸ªmap" class="headerlink" title="15. makeMapç”Ÿæˆä¸€ä¸ªmap"></a>15. makeMapç”Ÿæˆä¸€ä¸ªmap</h1><blockquote>
<p>ä¼ å…¥ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œç”Ÿæˆä¸€ä¸ªmapï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°æ£€æµ‹keyå€¼åœ¨ä¸åœ¨è¿™ä¸ªmapä¸­ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å°å†™é€‰é¡¹ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¼ å…¥ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œç”Ÿæˆä¸€ä¸ª map(é”®å€¼å¯¹) ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°æ£€æµ‹ key å€¼åœ¨ä¸åœ¨è¿™ä¸ª map ä¸­ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å°å†™é€‰é¡¹ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeMap</span>(<span class="params">str, expectsLowerCase</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> map = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">let</span> list = str.split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">    map[list[i]] = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> expectsLowerCase</span><br><span class="line">    ? <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123; <span class="keyword">return</span> map[val.toLowerCase()]; &#125;</span><br><span class="line">    : <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123; <span class="keyword">return</span> map[val] &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;123,456,789&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> makeMapStrFunc = makeMap(str, <span class="literal">false</span>);</span><br><span class="line">makeMapStrFunc(<span class="string">&#x27;123&#x27;</span>); <span class="comment">// true</span></span><br><span class="line">makeMapStrFunc(<span class="string">&#x27;145&#x27;</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="16-isBuiltInTag"><a href="#16-isBuiltInTag" class="headerlink" title="16. isBuiltInTag"></a>16. isBuiltInTag</h1><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯å†…ç½®çš„Tag</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isBuiltInTag = makeMap(<span class="string">&#x27;slot, component&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">isBuiltInTag(<span class="string">&#x27;slot&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isBuiltInTag(<span class="string">&#x27;component&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isBuiltInTag(<span class="string">&#x27;Slot&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isBuiltInTag(<span class="string">&#x27;Component&#x27;</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h1 id="17-isReservedAttribute"><a href="#17-isReservedAttribute" class="headerlink" title="17. isReservedAttribute"></a>17. isReservedAttribute</h1><blockquote>
<p>åˆ¤æ–­æ˜¯å¦æ˜¯ä¿ç•™çš„å±æ€§</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> isReservedAttribute = makeMap(<span class="string">&#x27;key,ref,slot,slot-scope,is&#x27;</span>);</span><br><span class="line"></span><br><span class="line">isReservedAttribute(<span class="string">&#x27;key&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isReservedAttribute(<span class="string">&#x27;ref&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isReservedAttribute(<span class="string">&#x27;slot&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isReservedAttribute(<span class="string">&#x27;slot-scope&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isReservedAttribute(<span class="string">&#x27;is&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">isReservedAttribute(<span class="string">&#x27;IS&#x27;</span>) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h1 id="18-remove"><a href="#18-remove" class="headerlink" title="18. remove"></a>18. remove</h1><blockquote>
<p>ç§»é™¤æ•°ç»„ä¸­çš„æŸä¸€é¡¹</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">arr, item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length) &#123;</span><br><span class="line">    <span class="keyword">var</span> index = arr.indexOf(item);</span><br><span class="line">    <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> arr.splice(index, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>splice</code> å…¶å®æ˜¯ä¸€ä¸ªå¾ˆè€—æ€§èƒ½çš„æ–¹æ³•ã€‚åˆ é™¤æ•°ç»„ä¸­çš„ä¸€é¡¹ï¼Œå…¶ä»–å…ƒç´ éƒ½è¦ç§»åŠ¨ä½ç½®ã€‚</p>
<p><strong>å¼•ç”³</strong>ï¼š<a href="https://link.juejin.cn/?target=https://github.com/axios/axios/blob/master/lib/core/InterceptorManager.js"><code>axios InterceptorManager</code> æ‹¦æˆªå™¨æºç </a> ä¸­ï¼Œæ‹¦æˆªå™¨ç”¨æ•°ç»„å­˜å‚¨çš„ã€‚ä½†å®é™…ç§»é™¤æ‹¦æˆªå™¨æ—¶ï¼Œåªæ˜¯æŠŠæ‹¦æˆªå™¨ç½®ä¸º <code>null</code> ã€‚è€Œä¸æ˜¯ç”¨<code>splice</code>ç§»é™¤ã€‚æœ€åæ‰§è¡Œæ—¶ä¸º <code>null</code> çš„ä¸æ‰§è¡Œï¼ŒåŒæ ·æ•ˆæœã€‚<code>axios</code> æ‹¦æˆªå™¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œä¸å¾—ä¸è¯´ä¸ºæ€§èƒ½åšåˆ°äº†å¾ˆå¥½çš„è€ƒè™‘ã€‚<strong>å› ä¸ºæ‹¦æˆªå™¨æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œç†è®ºä¸Šå¯ä»¥æœ‰æ— æ•°ä¸ªï¼Œæ‰€ä»¥åšæ€§èƒ½è€ƒè™‘æ˜¯å¿…è¦çš„</strong>ã€‚</p>
<p>çœ‹å¦‚ä¸‹ <code>axios</code> æ‹¦æˆªå™¨ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»£ç æœ‰åˆ å‡</span></span><br><span class="line"><span class="comment">// å£°æ˜</span></span><br><span class="line"><span class="built_in">this</span>.handlers = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.handlers[id]) &#123;</span><br><span class="line"><span class="built_in">this</span>.handlers[id] = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> (h !== <span class="literal">null</span>) &#123;</span><br><span class="line">fn(h);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="19-hasOwn"><a href="#19-hasOwn" class="headerlink" title="19. hasOwn"></a>19. hasOwn</h1><blockquote>
<p>æ£€æµ‹æ˜¯å¦æ˜¯è‡ªå·±çš„å±æ€§</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hasOwnProperty = <span class="built_in">Object</span>.prototype.hasOwnProperty;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasOwn</span>(<span class="params">obj, key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> hasOwnProperty.call(obj, key)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hasOwnProperty = <span class="built_in">Object</span>.prototype.hasOwnProperty;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasOwn</span>(<span class="params">obj, key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> hasOwnProperty.call(obj, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.hasOwnProperty(<span class="string">&#x27;a&#x27;</span>));  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(hasOwn(obj, <span class="string">&#x27;a&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(hasOwn(obj, <span class="string">&#x27;b&#x27;</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h1 id="20-cached"><a href="#20-cached" class="headerlink" title="20. cached"></a>20. cached</h1><blockquote>
<p>ç¼“å­˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cached</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cache = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">return</span> (<span class="function"><span class="keyword">function</span> <span class="title">cachedFn</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> hit = cached[str];</span><br><span class="line">    <span class="keyword">return</span> hit || (cache[str] = fn(str));</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="21-camelize"><a href="#21-camelize" class="headerlink" title="21. camelize"></a>21. camelize</h1><blockquote>
<p>è¿å­—ç¬¦è½¬å°é©¼å³° å¦‚ on-click =&gt; onClick</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> camelizeRE = <span class="regexp">/-(\w)/g</span>;</span><br><span class="line"><span class="keyword">var</span> camelize = cached(<span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(camelizeRE, <span class="function"><span class="keyword">function</span> (<span class="params">_, c</span>) </span>&#123; <span class="keyword">return</span> c ? c.toUpperCase() : <span class="string">&#x27;&#x27;</span> &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li><p>\w è¡¨ç¤º [0-9a-zA-Z_]ã€‚è¡¨ç¤ºæ•°å­—ã€å¤§å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ã€‚ </p>
</li>
<li><p>```javascript<br>String.prototype.replace(regexp | substr, newSubStr|function)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   æˆ‘ä»¬æ¥é‡ç‚¹çœ‹ä¸€ä¸‹ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„`function` ä¸­çš„å‚æ•° </span><br><span class="line"></span><br><span class="line">   [MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace#%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0)</span><br><span class="line"></span><br><span class="line">   - `match`</span><br><span class="line"></span><br><span class="line">   - `p1,p2, ...` å‡å¦‚replace()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª[`RegExp`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp) å¯¹è±¡ï¼Œåˆ™ä»£è¡¨ç¬¬nä¸ªæ‹¬å·åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯ç”¨ `/(\a+)(\b+)/` è¿™ä¸ªæ¥åŒ¹é…ï¼Œ`p1` å°±æ˜¯åŒ¹é…çš„ `\a+`ï¼Œ`p2` å°±æ˜¯åŒ¹é…çš„ `\b+`ã€‚</span><br><span class="line"></span><br><span class="line">     &gt; å› æ­¤ï¼Œåœ¨è¿™é‡Œï¼Œ_ çš„å€¼æ˜¯ -c,  c çš„å€¼ æ˜¯ c</span><br><span class="line"></span><br><span class="line">   - ...</span><br><span class="line"></span><br><span class="line"># 22. capitalize</span><br><span class="line"></span><br><span class="line">&gt; é¦–å­—æ¯è½¬å¤§å†™</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">var capitalize = cached(function (str) &#123;</span><br><span class="line">  return str.charAt(0).toUpperCase() + str.slice(1);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="23-hyphenate"><a href="#23-hyphenate" class="headerlink" title="23. hyphenate"></a>23. hyphenate</h1><blockquote>
<p>å°é©¼å³°è½¬è¿å­—ç¬¦ onClick =&gt; on-click</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hyphenateRE = <span class="regexp">/\B([A-Z])/g</span>;</span><br><span class="line"><span class="keyword">var</span> hyphenate = cached(<span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(hyphenateRE, <span class="string">&#x27;-$1&#x27;</span>).toLowerCase();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="24-polyfillBind"><a href="#24-polyfillBind" class="headerlink" title="24. polyfillBind"></a>24. polyfillBind</h1><blockquote>
<p> bindå«ç‰‡ å…¼å®¹äº†è€ç‰ˆæœ¬æµè§ˆå™¨ä¸æ”¯æŒåŸç”Ÿçš„bindå‡½æ•°ã€‚åŒæ—¶å…¼å®¹å†™æ³•ï¼Œå¯¹å‚æ•°çš„å¤šå°‘åšå‡ºäº†åˆ¤æ–­ï¼Œä½¿ç”¨callå’Œapplyå®ç°ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">polyfillBind</span>(<span class="params">fn, ctx</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">boundFn</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> l = <span class="built_in">arguments</span>.length;</span><br><span class="line">    <span class="keyword">return</span> l</span><br><span class="line">      ? l &gt; <span class="number">1</span></span><br><span class="line">        ? fn.apply(ctx, <span class="built_in">arguments</span>)</span><br><span class="line">        : fn.call(ctx, a)</span><br><span class="line">      : fn.call(ctx)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  boundFn._length = fn.length;</span><br><span class="line">  <span class="keyword">return</span> boundFn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nativeBind</span>(<span class="params">fn, ctx</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fn.bind(ctx);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bind = <span class="built_in">Function</span>.prototype.bind</span><br><span class="line">  ? nativeBind</span><br><span class="line">  : polyfillBind;</span><br></pre></td></tr></table></figure>

<h1 id="25-toArray"><a href="#25-toArray" class="headerlink" title="25. toArray"></a>25. toArray</h1><blockquote>
<p>æŠŠç±»æ•°ç»„è½¬æˆçœŸæ­£çš„æ•°ç»„ï¼Œ æ”¯æŒä»æŒ‡å®šä½ç½®å¼€å§‹è½¬åŒ–ï¼Œé»˜è®¤ä»0å¼€å§‹ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toArray</span>(<span class="params">list, start</span>) </span>&#123;</span><br><span class="line">  start = start || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> i = list.length - start;</span><br><span class="line">  <span class="keyword">var</span> ret = <span class="keyword">new</span> <span class="built_in">Array</span>(i);</span><br><span class="line">  <span class="keyword">while</span> (i--) &#123;</span><br><span class="line">    ret[i] = list[i + start];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹å­</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = toArray(<span class="built_in">arguments</span>); </span><br><span class="line">  <span class="built_in">console</span>.log(args); <span class="comment">// 1, 2, 3, 4, 5</span></span><br><span class="line">  <span class="keyword">var</span> args2 = toArray(<span class="built_in">arguments</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(args2); <span class="comment">// 3, 4, 5</span></span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<h1 id="26-extend"><a href="#26-extend" class="headerlink" title="26. extend"></a>26. extend</h1><blockquote>
<p>åˆå¹¶å¯¹è±¡</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">to, _from</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> _from) &#123;</span><br><span class="line">    to[key] = _from[key];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> to;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹å­</span></span><br><span class="line"><span class="keyword">const</span> data = &#123; <span class="attr">name</span>: <span class="string">&#x27;lily&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> data2 = extend(data, &#123; <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;lily1&#x27;</span> &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(data); <span class="comment">// &#123; age: &#x27;18&#x27;, name: &#x27;lily1&#x27; &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(data2); <span class="comment">// &#123; age: &#x27;18&#x27;, name: &#x27;lily1&#x27; &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(data === data2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h1 id="27-toObject"><a href="#27-toObject" class="headerlink" title="27. toObject"></a>27. toObject</h1><blockquote>
<p>è½¬å¯¹è±¡ï¼Œ ä¼ å…¥çš„æ˜¯ä¸ªæ•°ç»„ï¼Œåé¢çš„å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toObject</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i]) &#123;</span><br><span class="line">      extend(res, arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¾‹å­</span></span><br><span class="line">toObject([<span class="string">&#x27;ç¬‘å˜»å˜»&#x27;</span>,<span class="string">&#x27;å“ˆå“ˆå‘µå‘µ&#x27;</span>]); <span class="comment">// å“ˆå“ˆå‘µå‘µ</span></span><br></pre></td></tr></table></figure>

<h1 id="28-noop"><a href="#28-noop" class="headerlink" title="28. noop"></a>28. noop</h1><blockquote>
<p>ç©ºå‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">noop</span>(<span class="params">a, b, c</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="29-no"><a href="#29-no" class="headerlink" title="29. no"></a>29. no</h1><blockquote>
<p>ä¸€ç›´è¿”å›false</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> no = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;;</span><br></pre></td></tr></table></figure>

<h1 id="30-identity"><a href="#30-identity" class="headerlink" title="30. identity"></a>30. identity</h1><blockquote>
<p>è¿”å›å‚æ•°æœ¬èº«</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> identity = <span class="function"><span class="keyword">function</span>(<span class="params">_</span>) </span>&#123;  <span class="keyword">return</span> _; &#125;;</span><br></pre></td></tr></table></figure>

<h1 id="31-genStaticKeys"><a href="#31-genStaticKeys" class="headerlink" title="31. genStaticKeys"></a>31. genStaticKeys</h1><blockquote>
<p>ç”Ÿæˆé™æ€å±æ€§</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">genStaticKeys</span> (<span class="params">modules</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> modules.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">keys, m</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> keys.concat(m.staticKeys || [])</span><br><span class="line">  &#125;, []).join(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="32-looseEqual"><a href="#32-looseEqual" class="headerlink" title="32. looseEqual"></a>32. looseEqual</h1><blockquote>
<p>å®½æ¾ç›¸ç­‰</p>
</blockquote>
<p>ç”±äºæ•°ç»„ã€å¯¹è±¡ç­‰æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥ä¸¤ä¸ªå†…å®¹çœ‹èµ·æ¥ç›¸ç­‰ï¼Œä¸¥æ ¼ç›¸ç­‰éƒ½æ˜¯ä¸ç›¸ç­‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> b = &#123;&#125;;</span><br><span class="line">a === b; <span class="comment">// false</span></span><br><span class="line">a == b; <span class="comment">// false</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥è¯¥å‡½æ•°æ˜¯å¯¹æ•°ç»„ã€æ—¥æœŸã€å¯¹è±¡è¿›è¡Œé€’å½’æ¯”å¯¹ã€‚å¦‚æœå†…å®¹å®Œå…¨ç›¸ç­‰åˆ™å®½æ¾ç›¸ç­‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">looseEqual</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a === b) &#123; <span class="keyword">return</span> <span class="literal">true</span> &#125;;</span><br><span class="line">  <span class="keyword">var</span> isObjectA = isObject(a);</span><br><span class="line">  <span class="keyword">var</span> isObjectB = isObject(b);</span><br><span class="line">  <span class="keyword">if</span> (isObjectA &amp;&amp; isObjectB) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> isArrayA = <span class="built_in">Array</span>.isArray(a);</span><br><span class="line">      <span class="keyword">var</span> isArrayB = <span class="built_in">Array</span>.isArray(b);</span><br><span class="line">      <span class="keyword">if</span> (isArrayA &amp;&amp; isArrayB) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.length === b.length &amp;&amp; a.every(<span class="function"><span class="keyword">function</span> (<span class="params">e, i</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> looseEqual(e, b[i])</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="keyword">instanceof</span> <span class="built_in">Date</span> &amp;&amp; b <span class="keyword">instanceof</span> <span class="built_in">Date</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.getTime() === b.getTime();</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isArrayA &amp;&amp; !isArrayB) &#123;</span><br><span class="line">        <span class="keyword">var</span> keysA = <span class="built_in">Object</span>.keys(a);</span><br><span class="line">        <span class="keyword">var</span> keysB = <span class="built_in">Object</span>.keys(b);</span><br><span class="line">        <span class="keyword">return</span> keysA.length === keysB.length &amp;&amp; keysA.every(<span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> looseEqual(a[key], b[key])</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isObjectA &amp;&amp; !isObjectB) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">String</span>(a) === <span class="built_in">String</span>(b);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="33-looseIndexOf"><a href="#33-looseIndexOf" class="headerlink" title="33. looseIndexOf"></a>33. looseIndexOf</h1><blockquote>
<p>å®½æ¾çš„in de x O f</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">looseIndexOf</span>(<span class="params">arr, val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="function"><span class="title">looseEqual</span>(<span class="params">arr[i], val</span>)</span> &#123; <span class="keyword">return</span> i &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="34-once"><a href="#34-once" class="headerlink" title="34. once"></a>34. once</h1><blockquote>
<p>åˆ©ç”¨é—­åŒ…ç‰¹æ€§ï¼Œå­˜å‚¨çŠ¶æ€ï¼Œå®ç°å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">once</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> called = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!called) &#123; </span><br><span class="line">      called = <span class="literal">true</span>;</span><br><span class="line">      fn.apply(called, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æºç é˜…è¯»</category>
      </categories>
  </entry>
  <entry>
    <title>æœ€é•¿é€’å¢å­åºåˆ—</title>
    <url>/2022/01/18/%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<p>[æ¥æº] ğŸ”—<a href="https://leetcode-cn.com/problems/longest-increasing-subsequence/">300. æœ€é•¿é€’å¢å­åºåˆ—</a></p>
<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚</p>
<p>å­åºåˆ—æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ[3,6,2,7] æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„å­åºåˆ—ã€‚</p>
<span id="more"></span>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">10</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">101</span>,<span class="number">18</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">101</span>]ï¼Œå› æ­¤é•¿åº¦ä¸º <span class="number">4</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h1 id="æ€è·¯ä¸€"><a href="#æ€è·¯ä¸€" class="headerlink" title="æ€è·¯ä¸€"></a>æ€è·¯ä¸€</h1><ol>
<li>é¦–å…ˆæˆ‘ä»¬å…ˆè€ƒè™‘ç›´æ¥çš„åŠ¨æ€è§„åˆ’ï¼Œåˆå§‹åŒ–dpæ•°ç»„ä¸ºnew Array(len).fill(1)ã€‚<ol>
<li>ç”¨1å¡«å……çš„åŸå› æ˜¯å› ä¸ºä»»æ„ä¸€ä¸ªæ•°å­—éƒ½å¯ä»¥ç»„æˆä¸€ä¸ªé•¿åº¦ï¼Œæ‰€ä»¥æœ€çŸ­åˆå§‹å€¼ä¸º1ã€‚</li>
</ol>
</li>
<li>é‚£ä¹ˆç°åœ¨æˆ‘ä»¬çš„æ•°ç»„å°†æ˜¯å¦‚ä¸‹æƒ…å†µ</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹æƒ…å†µ</span></span><br><span class="line">nums = [<span class="number">10</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">101</span>,<span class="number">18</span>]</span><br><span class="line">dp = [<span class="number">1</span>, <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,  <span class="number">1</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è®¡ç®—æœ€é•¿é€’å¢å­åºåˆ—è‚¯å®šè¦éå†æ•°ç»„çš„ï¼Œè€Œä¸”<br> 3.1. è®¡ç®—æœ€é•¿ï¼Œæˆ‘ä»¬è‚¯å®šè¦ä½¿ç”¨åˆ°Math.maxï¼›<br> 3.2. æ¯”è¾ƒå‰åä¸¤ä¸ªæ•°çš„å¤§å°ï¼Œæˆ‘ä»¬å…ˆå§‘ä¸”çš„ä½¿ç”¨ä¸¤å±‚forå¾ªç¯å§ ç®€å•è€Œç²—æš´</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> i = <span class="number">1</span>, j = <span class="number">0</span></span><br><span class="line">nums[i] &lt; nums[j]  <span class="keyword">continue</span>;</span><br><span class="line"><span class="number">2.</span> i = <span class="number">2</span>, j <span class="keyword">from</span> <span class="number">0</span> </span><br><span class="line">  <span class="number">2.1</span> j = <span class="number">0</span></span><br><span class="line">  nums[i] &lt; nums[j] <span class="keyword">continue</span>; dp = [<span class="number">1</span>, <span class="number">1</span>, ..., <span class="number">1</span>]</span><br><span class="line">  <span class="number">2.2</span> j = <span class="number">1</span></span><br><span class="line">  nums[i] &lt; nums[j] <span class="keyword">continue</span>; dp = [<span class="number">1</span>, <span class="number">1</span>, ..., <span class="number">1</span>]</span><br><span class="line"><span class="number">3.</span> i = <span class="number">3</span>, j <span class="keyword">from</span> <span class="number">0</span></span><br><span class="line">  <span class="number">3.1</span> <span class="number">3.2</span> å¦‚ä¸Š dp = [<span class="number">1</span>, <span class="number">1</span>, ..., <span class="number">1</span>]</span><br><span class="line">  <span class="number">3.3</span> j = <span class="number">2</span></span><br><span class="line">  nums[i] &gt; nums[j]  dp[i] = <span class="built_in">Math</span>.max(dp[j] + <span class="number">1</span>, dp[i]); dp = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, ..<span class="number">.1</span>]</span><br><span class="line">ä»¥æ­¤ç±»æ¨....</span><br></pre></td></tr></table></figure>

<h1 id="ä»£ç ä¸€"><a href="#ä»£ç ä¸€" class="headerlink" title="ä»£ç ä¸€"></a>ä»£ç ä¸€</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lengthOfLIS</span>(<span class="params">nums: number[]</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> len = nums.length;</span><br><span class="line">    <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(len).fill(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; nums[j]) &#123;</span><br><span class="line">                dp[i] = <span class="built_in">Math</span>.max(dp[j] + <span class="number">1</span>, dp[i])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="built_in">Math</span>.max(dp[i], ans)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
</search>
